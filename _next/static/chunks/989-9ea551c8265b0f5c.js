"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[989],{897:function(e,t,r){r.d(t,{q:function(){return c}});var n=r(7378),o=r(1823),s=r(2212);class a extends s.DataTextureLoader{constructor(e){super(e),this.type=s.UnsignedByteType}parse(e){const t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},r=function(e,t,r){t=t||1024;let n=e.pos,o=-1,s=0,a="",i=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));for(;0>(o=i.indexOf("\n"))&&s<t&&n<e.byteLength;)a+=i,s+=i.length,n+=128,i+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));return-1<o&&(!1!==r&&(e.pos+=s+o+1),a+i.slice(0,o))},n=function(e,t,r,n){const o=e[t+3],s=Math.pow(2,o-128)/255;r[n+0]=e[t+0]*s,r[n+1]=e[t+1]*s,r[n+2]=e[t+2]*s},o=function(e,t,r,n){const o=e[t+3],a=Math.pow(2,o-128)/255;r[n+0]=s.DataUtils.toHalfFloat(e[t+0]*a),r[n+1]=s.DataUtils.toHalfFloat(e[t+1]*a),r[n+2]=s.DataUtils.toHalfFloat(e[t+2]*a)},a=new Uint8Array(e);a.pos=0;const i=function(e){const n=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,a=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,i={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,c;if(e.pos>=e.byteLength||!(l=r(e)))return t(1,"no header found");if(!(c=l.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(i.valid|=1,i.programtype=c[1],i.string+=l+"\n";l=r(e),!1!==l;)if(i.string+=l+"\n","#"!==l.charAt(0)){if((c=l.match(n))&&(i.gamma=parseFloat(c[1],10)),(c=l.match(o))&&(i.exposure=parseFloat(c[1],10)),(c=l.match(s))&&(i.valid|=2,i.format=c[1]),(c=l.match(a))&&(i.valid|=4,i.height=parseInt(c[1],10),i.width=parseInt(c[2],10)),2&i.valid&&4&i.valid)break}else i.comments+=l+"\n";return 2&i.valid?4&i.valid?i:t(3,"missing image size specifier"):t(3,"missing format specifier")}(a);if(-1!==i){const e=i.width,r=i.height,l=function(e,r,n){const o=r;if(o<8||o>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(o!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");const s=new Uint8Array(4*r*n);if(!s.length)return t(4,"unable to allocate buffer space");let a=0,i=0;const l=4*o,c=new Uint8Array(4),u=new Uint8Array(l);let h=n;for(;h>0&&i<e.byteLength;){if(i+4>e.byteLength)return t(1);if(c[0]=e[i++],c[1]=e[i++],c[2]=e[i++],c[3]=e[i++],2!=c[0]||2!=c[1]||(c[2]<<8|c[3])!=o)return t(3,"bad rgbe scanline format");let r,n=0;for(;n<l&&i<e.byteLength;){r=e[i++];const o=r>128;if(o&&(r-=128),0===r||n+r>l)return t(3,"bad scanline data");if(o){const t=e[i++];for(let e=0;e<r;e++)u[n++]=t}else u.set(e.subarray(i,i+r),n),n+=r,i+=r}const d=o;for(let e=0;e<d;e++){let t=0;s[a]=u[e+t],t+=o,s[a+1]=u[e+t],t+=o,s[a+2]=u[e+t],t+=o,s[a+3]=u[e+t],a+=4}h--}return s}(a.subarray(a.pos),e,r);if(-1!==l){let t,a,c,u;switch(this.type){case s.UnsignedByteType:t=l,a=s.RGBEFormat,c=s.UnsignedByteType;break;case s.FloatType:u=l.length/4*3;const e=new Float32Array(u);for(let t=0;t<u;t++)n(l,4*t,e,3*t);t=e,a=s.RGBFormat,c=s.FloatType;break;case s.HalfFloatType:u=l.length/4*3;const r=new Uint16Array(u);for(let t=0;t<u;t++)o(l,4*t,r,3*t);t=r,a=s.RGBFormat,c=s.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:e,height:r,data:t,header:i.string,gamma:i.gamma,exposure:i.exposure,format:a,type:c}}}return null}setDataType(e){return this.type=e,this}load(e,t,r,n){return super.load(e,(function(e,r){switch(e.type){case s.UnsignedByteType:e.encoding=s.RGBEEncoding,e.minFilter=s.NearestFilter,e.magFilter=s.NearestFilter,e.generateMipmaps=!1,e.flipY=!0;break;case s.FloatType:case s.HalfFloatType:e.encoding=s.LinearEncoding,e.minFilter=s.LinearFilter,e.magFilter=s.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,r)}),r,n)}}var i=r(8998);const l={sunset:"venice_sunset_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",night:"dikhololo_night_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr",forest:"forest_slope_1k.hdr",apartment:"lebombo_1k.hdr",studio:"studio_small_03_1k.hdr",city:"potsdamer_platz_1k.hdr",park:"rooitou_park_1k.hdr",lobby:"st_fagans_interior_1k.hdr"};function c({background:e=!1,files:t=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:r="",preset:c,scene:u,extensions:h}){if(c){if(!(c in l))throw new Error("Preset must be one of: "+Object.keys(l).join(", "));t=l[c],r="https://rawcdn.githack.com/pmndrs/drei-assets/aa3600359ba664d546d05821bcbca42013587df2/hdri/"}const d=(0,o.Ky)((({scene:e})=>e)),f=(0,o.Ky)((({gl:e})=>e)),p=Array.isArray(t),A=p?s.CubeTextureLoader:a,B=(0,o.U2)(A,p?[t]:t,(e=>{e.setPath(r),h&&h(e)})),g=p?B[0]:B,m=(0,i.G)((()=>new Promise((e=>{const t=new s.PMREMGenerator(f),r=function(e,t,r){return r?(t.compileEquirectangularShader(),t.fromCubemap(e).texture):t.fromEquirectangular(e).texture}(g,t,p);t.dispose(),e(r)}))),g);return n.useLayoutEffect((()=>{const t=u?u.background:d.background,r=u?u.environment:d.environment;return u?(u.environment=m,e&&(u.background=m)):(d.environment=m,e&&(d.background=m)),()=>{u?(u.environment=r,u.background=t):(d.environment=r,d.background=t),i.G.clear(g),m.dispose()}}),[m,e,u]),null}},7433:function(e,t,r){r.d(t,{c:function(){return i}});var n=r(7462),o=r(7378),s=r(1823),a=r(5878);const i=o.forwardRef((({makeDefault:e,manual:t,...r},i)=>{const l=(0,s.Ky)((({set:e})=>e)),c=(0,s.Ky)((({camera:e})=>e)),u=(0,s.Ky)((({size:e})=>e)),h=o.useRef();return o.useLayoutEffect((()=>{const{current:e}=h;e&&!t&&(e.aspect=u.width/u.height,e.updateProjectionMatrix())}),[u,r]),o.useLayoutEffect((()=>{if(e&&h.current){const e=c;return l((()=>({camera:h.current}))),()=>l((()=>({camera:e})))}}),[c,h,e,l]),o.createElement("perspectiveCamera",(0,n.Z)({ref:(0,a.Z)([h,i])},r))}))},2849:function(e,t,r){r.d(t,{x:function(){return z}});var n=r(7462),o=r(7378),s=r(2212);r(4155);function a(){var e,t=0,r=[],n=0,o=0;var s=f((function(e){o||l(1,e)})),i=f((function(e){o||l(-1,e)}));function l(r,n){o++;var s=0;try{n===B&&p();var a=r>0&&d(n);a?a.call(n,f((function(e){s++,l(1,e)})),f((function(e){s++,l(-1,e)}))):(t=r,e=n,c())}catch(i){t||s||l(-1,i)}}function c(){n||(setTimeout(u,0),n=1)}function u(){var e=r;n=0,r=[],e.forEach(h)}function h(e){e()}function d(e){var t=e&&(A(e)||"object"===typeof e)&&e.then;return A(t)&&t}function f(e){var t=0;return function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];t++||e.apply(this,r)}}function p(){throw new TypeError("Chaining cycle detected")}var A=function(e){return"function"===typeof e},B={then:function(n,o){var s=a();return r.push((function(){var r=t>0?n:o;if(A(r))try{var a=r(e);a===s&&p();var i=d(a);i?i.call(a,s.resolve,s.reject):s.resolve(a)}catch(l){s.reject(l)}else s[t>0?"resolve":"reject"](e)})),t&&c(),s},resolve:s,reject:i};return B}function i(){var e,t,r=new Promise((function(r,n){e=r,t=n}));return{then:r.then.bind(r),resolve:e,reject:t}}a.all=i.all=function(e){var t=0,r=[],n=l();return 0===e.length?n.resolve([]):e.forEach((function(o,s){var a=l();a.resolve(o),a.then((function(o){t++,r[s]=o,t===e.length&&n.resolve(r)}),n.reject)})),n};var l="function"===typeof Promise?i:a;function c(){var e=Object.create(null);function t(n,o){var s=n.id,a=n.name,i=n.dependencies;void 0===i&&(i=[]);var l=n.init;void 0===l&&(l=function(){});var c=n.getTransferables;if(void 0===c&&(c=null),!e[s])try{i=i.map((function(r){return r&&r.isWorkerModule&&(t(r,(function(e){if(e instanceof Error)throw e})),r=e[r.id].value),r})),l=r("<"+a+">.init",l),c&&(c=r("<"+a+">.getTransferables",c));var u=null;"function"===typeof l?u=l.apply(void 0,i):console.error("worker module init function failed to rehydrate"),e[s]={id:s,value:u,getTransferables:c},o(u)}catch(h){h&&h.noLog||console.error(h),o(h)}}function r(e,t){var r=void 0;self.troikaDefine=function(e){return r=e};var n=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(n)}catch(o){console.error(o)}return URL.revokeObjectURL(n),delete self.troikaDefine,r}self.addEventListener("message",(function(r){var n=r.data,o=n.messageId,s=n.action,a=n.data;try{"registerModule"===s&&t(a,(function(e){e instanceof Error?postMessage({messageId:o,success:!1,error:e.message}):postMessage({messageId:o,success:!0,result:{isCallable:"function"===typeof e}})})),"callModule"===s&&function(t,r){var n,o=t.id,s=t.args;e[o]&&"function"===typeof e[o].value||r(new Error("Worker module "+o+": not found or its 'init' did not return a function"));try{var a=(n=e[o]).value.apply(n,s);a&&"function"===typeof a.then?a.then(i,(function(e){return r(e instanceof Error?e:new Error(""+e))})):i(a)}catch(l){r(l)}function i(t){try{var n=e[o].getTransferables&&e[o].getTransferables(t);n&&Array.isArray(n)&&n.length||(n=void 0),r(t,n)}catch(l){console.error(l),r(l)}}}(a,(function(e,t){e instanceof Error?postMessage({messageId:o,success:!1,error:e.message}):postMessage({messageId:o,success:!0,result:e},t||void 0)}))}catch(i){postMessage({messageId:o,success:!1,error:i.stack})}}))}var u=function(){var e=!1;if("undefined"!==typeof window&&"undefined"!==typeof window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return u=function(){return e},e},h=0,d=0,f=!1,p=Object.create(null),A=Object.create(null),B=Object.create(null);function g(e){if((!e||"function"!==typeof e.init)&&!f)throw new Error("requires `options.init` function");var t=e.dependencies,r=e.init,n=e.getTransferables,o=e.workerId;if(!u())return function(e){var t=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return t._getInitResult().then((function(t){if("function"===typeof t)return t.apply(void 0,e);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return t._getInitResult=function(){var r=e.dependencies,n=e.init;r=Array.isArray(r)?r.map((function(e){return e&&e._getInitResult?e._getInitResult():e})):[];var o=l.all(r).then((function(e){return n.apply(null,e)}));return t._getInitResult=function(){return o},o},t}(e);null==o&&(o="#default");var s="workerModule"+ ++h,a=e.name||s,i=null;function c(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!i){i=C(o,"registerModule",c.workerModuleData);var r=function(){i=null,A[o].delete(r)};(A[o]||(A[o]=new Set)).add(r)}return i.then((function(t){if(t.isCallable)return C(o,"callModule",{id:s,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return t=t&&t.map((function(e){return"function"!==typeof e||e.workerModuleData||(f=!0,e=g({workerId:o,name:"<"+a+"> function dependency: "+e.name,init:"function(){return (\n"+m(e)+"\n)}"}),f=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e})),c.workerModuleData={isWorkerModule:!0,id:s,name:a,dependencies:t,init:m(r),getTransferables:n&&m(n)},c}function m(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function C(e,t,r){var n=l(),o=++d;return B[o]=function(e){e.success?n.resolve(e.result):n.reject(new Error("Error in worker "+t+" call: "+e.error))},function(e){var t=p[e];if(!t){var r=m(c);(t=p[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+r+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,r=t.messageId,n=B[r];if(!n)throw new Error("WorkerModule response with empty or unknown messageId");delete B[r],n(t)}}return t}(e).postMessage({messageId:o,action:t,data:r}),n}var v=g({name:"Thenable",dependencies:[l],init:function(e){return e}});var y=function(){return function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},n={};r.L=1,n[1]="L",Object.keys(t).forEach((function(e,t){r[e]=1<<t+1,n[r[e]]=e})),Object.freeze(r);var o=r.LRI|r.RLI|r.FSI,s=r.L|r.R|r.AL,a=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,i=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,l=r.S|r.WS|r.B|o|r.PDI|i,c=null;function u(e){return function(){if(!c){c=new Map;var e=function(e){if(t.hasOwnProperty(e)){var n=0;t[e].split(",").forEach((function(t){var o=t.split("+"),s=o[0],a=o[1];s=parseInt(s,36),a=a?parseInt(a,36):0,c.set(n+=s,r[e]);for(var i=0;i<a;i++)c.set(++n,r[e])}))}};for(var n in t)e(n)}}(),c.get(e.codePointAt(0))||r.L}var h,d,f,p="14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",A="6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye";function B(e,t){var r,n=0,o=new Map,s=t&&new Map;return e.split(",").forEach((function e(a){if(-1!==a.indexOf("+"))for(var i=+a;i--;)e(r);else{r=a;var l=a.split(">"),c=l[0],u=l[1];c=String.fromCodePoint(n+=parseInt(c,36)),u=String.fromCodePoint(n+=parseInt(u,36)),o.set(c,u),t&&s.set(u,c)}})),{map:o,reverseMap:s}}function g(){if(!h){var e=B(p,!0),t=e.map,r=e.reverseMap;h=t,d=r,f=B(A,!1).map}}function m(e){return g(),h.get(e)||null}function C(e){return g(),d.get(e)||null}function v(e){return g(),f.get(e)||null}var y=r.L,b=r.R,M=r.EN,F=r.ES,x=r.ET,S=r.AN,G=r.CS,T=r.B,I=r.S,E=r.ON,D=r.BN,U=r.NSM,R=r.AL,k=r.LRO,w=r.RLO,_=r.LRE,H=r.RLE,P=r.PDF,L=r.LRI,O=r.RLI,J=r.FSI,K=r.PDI;var N;function Q(e){return function(){if(!N){var e=B("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),t=e.map;e.reverseMap.forEach((function(e,r){t.set(r,e)})),N=t}}(),N.get(e)||null}function j(e,t,r,n){var o=e.length;r=Math.max(0,null==r?0:+r),n=Math.min(o-1,null==n?o-1:+n);var s=[];return t.paragraphs.forEach((function(o){var a=Math.max(r,o.start),i=Math.min(n,o.end);if(a<i){for(var c=t.levels.slice(a,i+1),h=i;h>=a&&u(e[h])&l;h--)c[h]=o.level;for(var d=o.level,f=1/0,p=0;p<c.length;p++){var A=c[p];A>d&&(d=A),A<f&&(f=1|A)}for(var B=d;B>=f;B--)for(var g=0;g<c.length;g++)if(c[g]>=B){for(var m=g;g+1<c.length&&c[g+1]>=B;)g++;g>m&&s.push([m+r,g+r])}}})),s}function X(e,t,r,n){for(var o=j(e,t,r,n),s=[],a=0;a<e.length;a++)s[a]=a;return o.forEach((function(e){for(var t=e[0],r=e[1],n=s.slice(t,r+1),o=n.length;o--;)s[r-o]=n[o]})),s}return e.closingToOpeningBracket=C,e.getBidiCharType=u,e.getBidiCharTypeName=function(e){return n[u(e)]},e.getCanonicalBracket=v,e.getEmbeddingLevels=function(e,t){for(var r=new Uint32Array(e.length),n=0;n<e.length;n++)r[n]=u(e[n]);var c=new Map;function h(e,t){var n=r[e];r[e]=t,c.set(n,c.get(n)-1),n&a&&c.set(a,c.get(a)-1),c.set(t,(c.get(t)||0)+1),t&a&&c.set(a,(c.get(a)||0)+1)}for(var d=new Uint8Array(e.length),f=new Map,p=[],A=null,B=0;B<e.length;B++)A||p.push(A={start:B,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:Jt(B,!1)}),r[B]&T&&(A.end=B,A=null);for(var g=H|_|w|k|o|K|P|T,N=function(e){return e+(1&e?1:2)},Q=function(e){return e+(1&e?2:1)},j=0;j<p.length;j++){var X=[{_level:(A=p[j]).level,_override:0,_isolate:0}],W=void 0,V=0,Y=0,Z=0;c.clear();for(var q=A.start;q<=A.end;q++){var z=r[q];if(W=X[X.length-1],c.set(z,(c.get(z)||0)+1),z&a&&c.set(a,(c.get(a)||0)+1),z&g)if(z&(H|_)){d[q]=W._level;var $=(z===H?Q:N)(W._level);$<=125&&!V&&!Y?X.push({_level:$,_override:0,_isolate:0}):V||Y++}else if(z&(w|k)){d[q]=W._level;var ee=(z===w?Q:N)(W._level);ee<=125&&!V&&!Y?X.push({_level:ee,_override:z&w?b:y,_isolate:0}):V||Y++}else if(z&o){z&J&&(z=1===Jt(q+1,!0)?O:L),d[q]=W._level,W._override&&h(q,W._override);var te=(z===O?Q:N)(W._level);te<=125&&0===V&&0===Y?(Z++,X.push({_level:te,_override:0,_isolate:1,_isolInitIndex:q})):V++}else if(z&K){if(V>0)V--;else if(Z>0){for(Y=0;!X[X.length-1]._isolate;)X.pop();var re=X[X.length-1]._isolInitIndex;null!=re&&(f.set(re,q),f.set(q,re)),X.pop(),Z--}W=X[X.length-1],d[q]=W._level,W._override&&h(q,W._override)}else z&P?(0===V&&(Y>0?Y--:!W._isolate&&X.length>1&&(X.pop(),W=X[X.length-1])),d[q]=W._level):z&T&&(d[q]=A.level);else d[q]=W._level,W._override&&z!==D&&h(q,W._override)}for(var ne=[],oe=null,se=A.start;se<=A.end;se++){var ae=r[se];if(!(ae&i)){var ie=d[se],le=ae&o,ce=ae===K;oe&&ie===oe._level?(oe._end=se,oe._endsWithIsolInit=le):ne.push(oe={_start:se,_end:se,_level:ie,_startsWithPDI:ce,_endsWithIsolInit:le})}}for(var ue=[],he=0;he<ne.length;he++){var de=ne[he];if(!de._startsWithPDI||de._startsWithPDI&&!f.has(de._start)){for(var fe=[oe=de],pe=void 0;oe&&oe._endsWithIsolInit&&null!=(pe=f.get(oe._end));)for(var Ae=he+1;Ae<ne.length;Ae++)if(ne[Ae]._start===pe){fe.push(oe=ne[Ae]);break}for(var Be=[],ge=0;ge<fe.length;ge++)for(var me=fe[ge],Ce=me._start;Ce<=me._end;Ce++)Be.push(Ce);for(var ve=d[Be[0]],ye=A.level,be=Be[0]-1;be>=0;be--)if(!(r[be]&i)){ye=d[be];break}var Me=Be[Be.length-1],Fe=d[Me],xe=A.level;if(!(r[Me]&o))for(var Se=Me+1;Se<=A.end;Se++)if(!(r[Se]&i)){xe=d[Se];break}ue.push({_seqIndices:Be,_sosType:Math.max(ye,ve)%2?b:y,_eosType:Math.max(xe,Fe)%2?b:y})}}for(var Ge=0;Ge<ue.length;Ge++){var Te=ue[Ge],Ie=Te._seqIndices,Ee=Te._sosType,De=Te._eosType;if(c.get(U))for(var Ue=0;Ue<Ie.length;Ue++){var Re=Ie[Ue];if(r[Re]&U){for(var ke=Ee,we=Ue-1;we>=0;we--)if(!(r[Ie[we]]&i)){ke=r[Ie[we]];break}h(Re,ke&(o|K)?E:ke)}}if(c.get(M))for(var _e=0;_e<Ie.length;_e++){var He=Ie[_e];if(r[He]&M)for(var Pe=_e-1;Pe>=-1;Pe--){var Le=-1===Pe?Ee:r[Ie[Pe]];if(Le&s){Le===R&&h(He,S);break}}}if(c.get(R))for(var Oe=0;Oe<Ie.length;Oe++){var Je=Ie[Oe];r[Je]&R&&h(Je,b)}if(c.get(F)||c.get(G))for(var Ke=1;Ke<Ie.length-1;Ke++){var Ne=Ie[Ke];if(r[Ne]&(F|G)){for(var Qe=0,je=0,Xe=Ke-1;Xe>=0&&(Qe=r[Ie[Xe]])&i;Xe--);for(var We=Ke+1;We<Ie.length&&(je=r[Ie[We]])&i;We++);Qe===je&&(r[Ne]===F?Qe===M:Qe&(M|S))&&h(Ne,Qe)}}if(c.get(M))for(var Ve=0;Ve<Ie.length;Ve++){var Ye=Ie[Ve];if(r[Ye]&M){for(var Ze=Ve-1;Ze>=0&&r[Ie[Ze]]&(x|i);Ze--)h(Ie[Ze],M);for(var qe=Ve+1;qe<Ie.length&&r[Ie[qe]]&(x|i);qe++)h(Ie[qe],M)}}if(c.get(x)||c.get(F)||c.get(G))for(var ze=0;ze<Ie.length;ze++){var $e=Ie[ze];if(r[$e]&(x|F|G)){h($e,E);for(var et=ze-1;et>=0&&r[Ie[et]]&i;et--)h(Ie[et],E);for(var tt=ze+1;tt<Ie.length&&r[Ie[tt]]&i;tt++)h(Ie[tt],E)}}if(c.get(M))for(var rt=0,nt=Ee;rt<Ie.length;rt++){var ot=Ie[rt],st=r[ot];st&M?nt===y&&h(ot,y):st&s&&(nt=st)}if(c.get(a)){for(var at=b|M|S,it=at|y,lt=[],ct=[],ut=0;ut<Ie.length;ut++)if(r[Ie[ut]]&a){var ht=e[Ie[ut]],dt=void 0;if(null!==m(ht)){if(!(ct.length<63))break;ct.push({char:ht,seqIndex:ut})}else if(null!==(dt=C(ht)))for(var ft=ct.length-1;ft>=0;ft--){var pt=ct[ft].char;if(pt===dt||pt===C(v(ht))||m(v(pt))===ht){lt.push([ct[ft].seqIndex,ut]),ct.length=ft;break}}}lt.sort((function(e,t){return e[0]-t[0]}));for(var At=0;At<lt.length;At++){for(var Bt=lt[At],gt=Bt[0],mt=Bt[1],Ct=!1,vt=0,yt=gt+1;yt<mt;yt++){var bt=Ie[yt];if(r[bt]&it){Ct=!0;var Mt=r[bt]&at?b:y;if(Mt===Nt(bt)){vt=Mt;break}}}if(Ct&&!vt){vt=Ee;for(var Ft=gt-1;Ft>=0;Ft--){var xt=Ie[Ft];if(r[xt]&it){var St=r[xt]&at?b:y;vt=St!==Nt(xt)?St:Nt(xt);break}}}if(vt){if(r[Ie[gt]]=r[Ie[mt]]=vt,vt!==Nt(Ie[gt]))for(var Gt=gt+1;Gt<Ie.length;Gt++)if(!(r[Ie[Gt]]&i)){u(e[Ie[Gt]])&U&&(r[Ie[Gt]]=vt);break}if(vt!==Nt(Ie[mt]))for(var Tt=mt+1;Tt<Ie.length;Tt++)if(!(r[Ie[Tt]]&i)){u(e[Ie[Tt]])&U&&(r[Ie[Tt]]=vt);break}}}for(var It=0;It<Ie.length;It++)if(r[Ie[It]]&a){for(var Et=It,Dt=It,Ut=Ee,Rt=It-1;Rt>=0;Rt--){if(!(r[Ie[Rt]]&i)){Ut=r[Ie[Rt]]&at?b:y;break}Et=Rt}for(var kt=De,wt=It+1;wt<Ie.length;wt++){if(!(r[Ie[wt]]&(a|i))){kt=r[Ie[wt]]&at?b:y;break}Dt=wt}for(var _t=Et;_t<=Dt;_t++)r[Ie[_t]]=Ut===kt?Ut:Nt(Ie[_t]);It=Dt}}}for(var Ht=A.start;Ht<=A.end;Ht++){var Pt=d[Ht],Lt=r[Ht];if(1&Pt?Lt&(y|M|S)&&d[Ht]++:Lt&b?d[Ht]++:Lt&(S|M)&&(d[Ht]+=2),Lt&i&&(d[Ht]=0===Ht?A.level:d[Ht-1]),Ht===A.end||u(e[Ht])&(I|T))for(var Ot=Ht;Ot>=0&&u(e[Ot])&l;Ot--)d[Ot]=A.level}}return{levels:d,paragraphs:p};function Jt(t,n){for(var s=t;s<e.length;s++){var a=r[s];if(a&(b|R))return 1;if(a&(T|y)||n&&a===K)return 0;if(a&o){var i=Kt(s);s=-1===i?e.length:i}}return 0}function Kt(t){for(var n=1,s=t+1;s<e.length;s++){var a=r[s];if(a&T)break;if(a&K){if(0===--n)return s}else a&o&&n++}return-1}function Nt(e){return 1&d[e]?b:y}},e.getMirroredCharacter=Q,e.getMirroredCharactersMap=function(e,t,r,n){var o=e.length;r=Math.max(0,null==r?0:+r),n=Math.min(o-1,null==n?o-1:+n);for(var s=new Map,a=r;a<=n;a++)if(1&t[a]){var i=Q(e[a]);null!==i&&s.set(a,i)}return s},e.getReorderSegments=j,e.getReorderedIndices=X,e.getReorderedString=function(e,t,r,n){var o=X(e,t,r,n),s=[].concat(e);return o.forEach((function(r,n){s[n]=(1&t.levels[r]?Q(e[r]):null)||e[r]})),s.join("")},e.openingToClosingBracket=m,Object.defineProperty(e,"__esModule",{value:!0}),e}({})};const b=/\bvoid\s+main\s*\(\s*\)\s*{/g;function M(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){let r=s.ShaderChunk[t];return r?M(r):e}))}const F=[];for(let $=0;$<256;$++)F[$]=($<16?"0":"")+$.toString(16);const x=Object.assign||function(){let e=arguments[0];for(let t=1,r=arguments.length;t<r;t++){let r=arguments[t];if(r)for(let t in r)r.hasOwnProperty(t)&&(e[t]=r[t])}return e},S=Date.now(),G=new WeakMap,T=new Map;let I=1e10;function E(e,t){const r=function(e){const t=JSON.stringify(e,U);let r=k.get(t);null==r&&k.set(t,r=++R);return r}(t);let n=G.get(e);if(n||G.set(e,n=Object.create(null)),n[r])return new n[r];const o=`_onBeforeCompile${r}`,a=function(n){e.onBeforeCompile.call(this,n);const s=this.customProgramCacheKey()+"|"+n.vertexShader+"|"+n.fragmentShader;let a=T[s];if(!a){const e=function({vertexShader:e,fragmentShader:t},r,n){let{vertexDefs:o,vertexMainIntro:s,vertexMainOutro:a,vertexTransform:i,fragmentDefs:l,fragmentMainIntro:c,fragmentMainOutro:u,fragmentColorTransform:h,customRewriter:d,timeUniform:f}=r;o=o||"",s=s||"",a=a||"",l=l||"",c=c||"",u=u||"",(i||d)&&(e=M(e));(h||d)&&(t=M(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n")));if(d){let r=d({vertexShader:e,fragmentShader:t});e=r.vertexShader,t=r.fragmentShader}if(h){let e=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(t=>(e.push(t),""))),u=`${h}\n${e.join("\n")}\n${u}`}if(f){const e=`\nuniform float ${f};\n`;o=e+o,l=e+l}i&&(o=`${o}\nvoid troikaVertexTransform${n}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${i}\n}\n`,s=`\ntroika_position_${n} = vec3(position);\ntroika_normal_${n} = vec3(normal);\ntroika_uv_${n} = vec2(uv);\ntroikaVertexTransform${n}(troika_position_${n}, troika_normal_${n}, troika_uv_${n});\n${s}\n`,e=(e=`vec3 troika_position_${n};\nvec3 troika_normal_${n};\nvec2 troika_uv_${n};\n${e}\n`).replace(/\b(position|normal|uv)\b/g,((e,t,r,o)=>/\battribute\s+vec[23]\s+$/.test(o.substr(0,r))?t:`troika_${t}_${n}`)));return e=D(e,n,o,s,a),t=D(t,n,l,c,u),{vertexShader:e,fragmentShader:t}}(n,t,r);a=T[s]=e}n.vertexShader=a.vertexShader,n.fragmentShader=a.fragmentShader,x(n.uniforms,this.uniforms),t.timeUniform&&(n.uniforms[t.timeUniform]={get value(){return Date.now()-S}}),this[o]&&this[o](n)},i=function(){return l(t.chained?e:e.clone())},l=function(n){const o=Object.create(n,c);return Object.defineProperty(o,"baseMaterial",{value:e}),Object.defineProperty(o,"id",{value:I++}),o.uuid=function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(F[255&e]+F[e>>8&255]+F[e>>16&255]+F[e>>24&255]+"-"+F[255&t]+F[t>>8&255]+"-"+F[t>>16&15|64]+F[t>>24&255]+"-"+F[63&r|128]+F[r>>8&255]+"-"+F[r>>16&255]+F[r>>24&255]+F[255&n]+F[n>>8&255]+F[n>>16&255]+F[n>>24&255]).toUpperCase()}(),o.uniforms=x({},n.uniforms,t.uniforms),o.defines=x({},n.defines,t.defines),o.defines[`TROIKA_DERIVED_MATERIAL_${r}`]="",o.extensions=x({},n.extensions,t.extensions),o._listeners=void 0,o},c={constructor:{value:i},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return r}},onBeforeCompile:{get:()=>a,set(e){this[o]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(x(this.extensions,t.extensions),x(this.defines,t.defines),x(this.uniforms,s.UniformsUtils.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const t=new e.constructor;return l(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let r=this._depthMaterial;return r||(r=this._depthMaterial=E(e.isDerivedMaterial?e.getDepthMaterial():new s.MeshDepthMaterial({depthPacking:s.RGBADepthPacking}),t),r.defines.IS_DEPTH_MATERIAL="",r.uniforms=this.uniforms),r}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let r=this._distanceMaterial;return r||(r=this._distanceMaterial=E(e.isDerivedMaterial?e.getDistanceMaterial():new s.MeshDistanceMaterial,t),r.defines.IS_DISTANCE_MATERIAL="",r.uniforms=this.uniforms),r}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:t,_distanceMaterial:r}=this;t&&t.dispose(),r&&r.dispose(),e.dispose.call(this)}}};return n[r]=i,new i}function D(e,t,r,n,o){return(n||o||r)&&(e=e.replace(b,`\n${r}\nvoid troikaOrigMain${t}() {`),e+=`\nvoid main() {\n  ${n}\n  troikaOrigMain${t}();\n  ${o}\n}`),e}function U(e,t){return"uniforms"===e?void 0:"function"===typeof t?t.toString():t}let R=0;const k=new Map;s.DoubleSide;function w(e){function t(e,t,r,n,o,s,a){const i=1-a;return{x:i*i*e+2*i*a*r+a*a*o,y:i*i*t+2*i*a*n+a*a*s}}function r(e,t,r,n,o,s,a,i,l){const c=1-l;return{x:c*c*c*e+3*c*c*l*r+3*c*l*l*o+l*l*l*a,y:c*c*c*t+3*c*c*l*n+3*c*l*l*s+l*l*l*i}}function n(){return(self.performance||Date).now()}return function(o,s,a,i,l,c=1){const u=n(),h=new Uint8Array(o*s),d=i[2]-i[0],f=i[3]-i[1],p=e(i),A=/([MLQCZ])([^MLQCZ]*)/g;let B,g,m,C,v;for(;B=A.exec(a);){const e=B[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((e=>parseFloat(e)));switch(B[1]){case"M":C=g=e[0],v=m=e[1];break;case"L":e[0]===C&&e[1]===v||p.addLineSegment(C,v,C=e[0],v=e[1]);break;case"Q":{let r={x:C,y:v};for(let n=1;n<16;n++){let o=t(C,v,e[0],e[1],e[2],e[3],n/15);p.addLineSegment(r.x,r.y,o.x,o.y),r=o}C=e[2],v=e[3];break}case"C":{let t={x:C,y:v};for(let n=1;n<16;n++){let o=r(C,v,e[0],e[1],e[2],e[3],e[4],e[5],n/15);p.addLineSegment(t.x,t.y,o.x,o.y),t=o}C=e[4],v=e[5];break}case"Z":C===g&&v===m||p.addLineSegment(C,v,g,m)}}for(let e=0;e<o;e++)for(let t=0;t<s;t++){const r=p.findNearestSignedDistance(i[0]+d*(e+.5)/o,i[1]+f*(t+.5)/s,l);let n=Math.pow(1-Math.abs(r)/l,c)/2;r<0&&(n=1-n),n=Math.max(0,Math.min(255,Math.round(255*n))),h[t*o+e]=n}return{textureData:h,timing:n()-u}}}function _(e){let t=!1;const r=[];function n(){t&&(r.sort((function(e,t){return e.maxX-t.maxX})),t=!1)}function o(e,t,r,n,o,s){const a=o-r,i=s-n,l=a*a+i*i,c=l?Math.max(0,Math.min(1,((e-r)*a+(t-n)*i)/l)):0,u=e-(r+c*a),h=t-(n+c*i);return u*u+h*h}return{addLineSegment:function(e,n,o,s){const a={x0:e,y0:n,x1:o,y1:s,minX:Math.min(e,o),minY:Math.min(n,s),maxX:Math.max(e,o),maxY:Math.max(n,s)};r.push(a),t=!0},findNearestSignedDistance:function(e,t){n();let s=1/0,a=1/0;for(let n=r.length;n--;){const i=r[n];if(i.maxX+a<=e)break;if(e+a>i.minX&&t-a<i.maxY&&t+a>i.minY){const r=o(e,t,i.x0,i.y0,i.x1,i.y1);r<s&&(s=r,a=Math.sqrt(s))}}return function(e,t){n();let o=!1;for(let n=r.length;n--;){const s=r[n];if(s.maxX<=e)break;if(s.minY<t&&s.maxY>t){s.y0>t!==s.y1>t&&e<(s.x1-s.x0)*(t-s.y0)/(s.y1-s.y0)+s.x0&&(o=!o)}}return o}(e,t)&&(a=-a),a}}}const H=g({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(e){var t={parse:function(e){var r=t._bin,n=new Uint8Array(e);if("ttcf"==r.readASCII(n,0,4)){var o=4;r.readUshort(n,o),o+=2,r.readUshort(n,o),o+=2;var s=r.readUint(n,o);o+=4;for(var a=[],i=0;i<s;i++){var l=r.readUint(n,o);o+=4,a.push(t._readFont(n,l))}return a}return[t._readFont(n,0)]},_readFont:function(e,r){var n=t._bin,o=r;n.readFixed(e,r),r+=4;var s=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2;for(var a=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],i={_data:e,_offset:o},l={},c=0;c<s;c++){var u=n.readASCII(e,r,4);r+=4,n.readUint(e,r),r+=4;var h=n.readUint(e,r);r+=4;var d=n.readUint(e,r);r+=4,l[u]={offset:h,length:d}}for(c=0;c<a.length;c++){var f=a[c];l[f]&&(i[f.trim()]=t[f.trim()].parse(e,l[f].offset,l[f].length,i))}return i},_tabOffset:function(e,r,n){for(var o=t._bin,s=o.readUshort(e,n+4),a=n+12,i=0;i<s;i++){var l=o.readASCII(e,a,4);a+=4,o.readUint(e,a),a+=4;var c=o.readUint(e,a);if(a+=4,o.readUint(e,a),a+=4,l==r)return c}return 0}};t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,r){return t._bin.readShort(e,r)/16384},readInt:function(e,r){var n=t._bin.t.uint8;return n[0]=e[r+3],n[1]=e[r+2],n[2]=e[r+1],n[3]=e[r],t._bin.t.int32[0]},readInt8:function(e,r){return t._bin.t.uint8[0]=e[r],t._bin.t.int8[0]},readShort:function(e,r){var n=t._bin.t.uint8;return n[1]=e[r],n[0]=e[r+1],t._bin.t.int16[0]},readUshort:function(e,t){return e[t]<<8|e[t+1]},readUshorts:function(e,r,n){for(var o=[],s=0;s<n;s++)o.push(t._bin.readUshort(e,r+2*s));return o},readUint:function(e,r){var n=t._bin.t.uint8;return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t._bin.t.uint32[0]},readUint64:function(e,r){return 4294967296*t._bin.readUint(e,r)+t._bin.readUint(e,r+4)},readASCII:function(e,t,r){for(var n="",o=0;o<r;o++)n+=String.fromCharCode(e[t+o]);return n},readUnicode:function(e,t,r){for(var n="",o=0;o<r;o++){var s=e[t++]<<8|e[t++];n+=String.fromCharCode(s)}return n},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,r,n){var o=t._bin._tdec;return o&&0==r&&n==e.length?o.decode(e):t._bin.readASCII(e,r,n)},readBytes:function(e,t,r){for(var n=[],o=0;o<r;o++)n.push(e[t+o]);return n},readASCIIArray:function(e,t,r){for(var n=[],o=0;o<r;o++)n.push(String.fromCharCode(e[t+o]));return n}},t._bin.t={buff:new ArrayBuffer(8)},t._bin.t.int8=new Int8Array(t._bin.t.buff),t._bin.t.uint8=new Uint8Array(t._bin.t.buff),t._bin.t.int16=new Int16Array(t._bin.t.buff),t._bin.t.uint16=new Uint16Array(t._bin.t.buff),t._bin.t.int32=new Int32Array(t._bin.t.buff),t._bin.t.uint32=new Uint32Array(t._bin.t.buff),t._lctf={},t._lctf.parse=function(e,r,n,o,s){var a=t._bin,i={},l=r;a.readFixed(e,r),r+=4;var c=a.readUshort(e,r);r+=2;var u=a.readUshort(e,r);r+=2;var h=a.readUshort(e,r);return r+=2,i.scriptList=t._lctf.readScriptList(e,l+c),i.featureList=t._lctf.readFeatureList(e,l+u),i.lookupList=t._lctf.readLookupList(e,l+h,s),i},t._lctf.readLookupList=function(e,r,n){var o=t._bin,s=r,a=[],i=o.readUshort(e,r);r+=2;for(var l=0;l<i;l++){var c=o.readUshort(e,r);r+=2;var u=t._lctf.readLookupTable(e,s+c,n);a.push(u)}return a},t._lctf.readLookupTable=function(e,r,n){var o=t._bin,s=r,a={tabs:[]};a.ltype=o.readUshort(e,r),r+=2,a.flag=o.readUshort(e,r),r+=2;var i=o.readUshort(e,r);r+=2;for(var l=a.ltype,c=0;c<i;c++){var u=o.readUshort(e,r);r+=2;var h=n(e,l,s+u,a);a.tabs.push(h)}return a},t._lctf.numOfOnes=function(e){for(var t=0,r=0;r<32;r++)0!=(e>>>r&1)&&t++;return t},t._lctf.readClassDef=function(e,r){var n=t._bin,o=[],s=n.readUshort(e,r);if(r+=2,1==s){var a=n.readUshort(e,r);r+=2;var i=n.readUshort(e,r);r+=2;for(var l=0;l<i;l++)o.push(a+l),o.push(a+l),o.push(n.readUshort(e,r)),r+=2}if(2==s){var c=n.readUshort(e,r);for(r+=2,l=0;l<c;l++)o.push(n.readUshort(e,r)),r+=2,o.push(n.readUshort(e,r)),r+=2,o.push(n.readUshort(e,r)),r+=2}return o},t._lctf.getInterval=function(e,t){for(var r=0;r<e.length;r+=3){var n=e[r],o=e[r+1];if(e[r+2],n<=t&&t<=o)return r}return-1},t._lctf.readCoverage=function(e,r){var n=t._bin,o={};o.fmt=n.readUshort(e,r),r+=2;var s=n.readUshort(e,r);return r+=2,1==o.fmt&&(o.tab=n.readUshorts(e,r,s)),2==o.fmt&&(o.tab=n.readUshorts(e,r,3*s)),o},t._lctf.coverageIndex=function(e,r){var n=e.tab;if(1==e.fmt)return n.indexOf(r);if(2==e.fmt){var o=t._lctf.getInterval(n,r);if(-1!=o)return n[o+2]+(r-n[o])}return-1},t._lctf.readFeatureList=function(e,r){var n=t._bin,o=r,s=[],a=n.readUshort(e,r);r+=2;for(var i=0;i<a;i++){var l=n.readASCII(e,r,4);r+=4;var c=n.readUshort(e,r);r+=2;var u=t._lctf.readFeatureTable(e,o+c);u.tag=l.trim(),s.push(u)}return s},t._lctf.readFeatureTable=function(e,r){var n=t._bin,o=r,s={},a=n.readUshort(e,r);r+=2,a>0&&(s.featureParams=o+a);var i=n.readUshort(e,r);r+=2,s.tab=[];for(var l=0;l<i;l++)s.tab.push(n.readUshort(e,r+2*l));return s},t._lctf.readScriptList=function(e,r){var n=t._bin,o=r,s={},a=n.readUshort(e,r);r+=2;for(var i=0;i<a;i++){var l=n.readASCII(e,r,4);r+=4;var c=n.readUshort(e,r);r+=2,s[l.trim()]=t._lctf.readScriptTable(e,o+c)}return s},t._lctf.readScriptTable=function(e,r){var n=t._bin,o=r,s={},a=n.readUshort(e,r);r+=2,s.default=t._lctf.readLangSysTable(e,o+a);var i=n.readUshort(e,r);r+=2;for(var l=0;l<i;l++){var c=n.readASCII(e,r,4);r+=4;var u=n.readUshort(e,r);r+=2,s[c.trim()]=t._lctf.readLangSysTable(e,o+u)}return s},t._lctf.readLangSysTable=function(e,r){var n=t._bin,o={};n.readUshort(e,r),r+=2,o.reqFeature=n.readUshort(e,r),r+=2;var s=n.readUshort(e,r);return r+=2,o.features=n.readUshorts(e,r,s),o},t.CFF={},t.CFF.parse=function(e,r,n){var o=t._bin;(e=new Uint8Array(e.buffer,r,n))[r=0],e[++r],e[++r],e[++r],r++;var s=[];r=t.CFF.readIndex(e,r,s);for(var a=[],i=0;i<s.length-1;i++)a.push(o.readASCII(e,r+s[i],s[i+1]-s[i]));r+=s[s.length-1];var l=[];r=t.CFF.readIndex(e,r,l);var c=[];for(i=0;i<l.length-1;i++)c.push(t.CFF.readDict(e,r+l[i],r+l[i+1]));r+=l[l.length-1];var u=c[0],h=[];r=t.CFF.readIndex(e,r,h);var d=[];for(i=0;i<h.length-1;i++)d.push(o.readASCII(e,r+h[i],h[i+1]-h[i]));if(r+=h[h.length-1],t.CFF.readSubrs(e,r,u),u.CharStrings){r=u.CharStrings,h=[],r=t.CFF.readIndex(e,r,h);var f=[];for(i=0;i<h.length-1;i++)f.push(o.readBytes(e,r+h[i],h[i+1]-h[i]));u.CharStrings=f}if(u.ROS){r=u.FDArray;var p=[];for(r=t.CFF.readIndex(e,r,p),u.FDArray=[],i=0;i<p.length-1;i++){var A=t.CFF.readDict(e,r+p[i],r+p[i+1]);t.CFF._readFDict(e,A,d),u.FDArray.push(A)}r+=p[p.length-1],r=u.FDSelect,u.FDSelect=[];var B=e[r];if(r++,3!=B)throw B;var g=o.readUshort(e,r);for(r+=2,i=0;i<g+1;i++)u.FDSelect.push(o.readUshort(e,r),e[r+2]),r+=3}return u.Encoding&&(u.Encoding=t.CFF.readEncoding(e,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=t.CFF.readCharset(e,u.charset,u.CharStrings.length)),t.CFF._readFDict(e,u,d),u},t.CFF._readFDict=function(e,r,n){var o;for(var s in r.Private&&(o=r.Private[1],r.Private=t.CFF.readDict(e,o,o+r.Private[0]),r.Private.Subrs&&t.CFF.readSubrs(e,o+r.Private.Subrs,r.Private)),r)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(s)&&(r[s]=n[r[s]-426+35])},t.CFF.readSubrs=function(e,r,n){var o=t._bin,s=[];r=t.CFF.readIndex(e,r,s);var a,i=s.length;a=i<1240?107:i<33900?1131:32768,n.Bias=a,n.Subrs=[];for(var l=0;l<s.length-1;l++)n.Subrs.push(o.readBytes(e,r+s[l],s[l+1]-s[l]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var r=0;r<e.charset.length;r++)if(e.charset[r]==t)return r;return-1},t.CFF.glyphBySE=function(e,r){return r<0||r>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[r])},t.CFF.readEncoding=function(e,r,n){t._bin;var o=[".notdef"],s=e[r];if(r++,0!=s)throw"error: unknown encoding format: "+s;var a=e[r];r++;for(var i=0;i<a;i++)o.push(e[r+i]);return o},t.CFF.readCharset=function(e,r,n){var o=t._bin,s=[".notdef"],a=e[r];if(r++,0==a)for(var i=0;i<n;i++){var l=o.readUshort(e,r);r+=2,s.push(l)}else{if(1!=a&&2!=a)throw"error: format: "+a;for(;s.length<n;){l=o.readUshort(e,r),r+=2;var c=0;for(1==a?(c=e[r],r++):(c=o.readUshort(e,r),r+=2),i=0;i<=c;i++)s.push(l),l++}}return s},t.CFF.readIndex=function(e,r,n){var o=t._bin,s=o.readUshort(e,r)+1,a=e[r+=2];if(r++,1==a)for(var i=0;i<s;i++)n.push(e[r+i]);else if(2==a)for(i=0;i<s;i++)n.push(o.readUshort(e,r+2*i));else if(3==a)for(i=0;i<s;i++)n.push(16777215&o.readUint(e,r+3*i-1));else if(1!=s)throw"unsupported offset size: "+a+", count: "+s;return(r+=s*a)-1},t.CFF.getCharString=function(e,r,n){var o=t._bin,s=e[r],a=e[r+1];e[r+2],e[r+3],e[r+4];var i=1,l=null,c=null;s<=20&&(l=s,i=1),12==s&&(l=100*s+a,i=2),21<=s&&s<=27&&(l=s,i=1),28==s&&(c=o.readShort(e,r+1),i=3),29<=s&&s<=31&&(l=s,i=1),32<=s&&s<=246&&(c=s-139,i=1),247<=s&&s<=250&&(c=256*(s-247)+a+108,i=2),251<=s&&s<=254&&(c=256*-(s-251)-a-108,i=2),255==s&&(c=o.readInt(e,r+1)/65535,i=5),n.val=null!=c?c:"o"+l,n.size=i},t.CFF.readCharString=function(e,r,n){for(var o=r+n,s=t._bin,a=[];r<o;){var i=e[r],l=e[r+1];e[r+2],e[r+3],e[r+4];var c=1,u=null,h=null;i<=20&&(u=i,c=1),12==i&&(u=100*i+l,c=2),19!=i&&20!=i||(u=i,c=2),21<=i&&i<=27&&(u=i,c=1),28==i&&(h=s.readShort(e,r+1),c=3),29<=i&&i<=31&&(u=i,c=1),32<=i&&i<=246&&(h=i-139,c=1),247<=i&&i<=250&&(h=256*(i-247)+l+108,c=2),251<=i&&i<=254&&(h=256*-(i-251)-l-108,c=2),255==i&&(h=s.readInt(e,r+1)/65535,c=5),a.push(null!=h?h:"o"+u),r+=c}return a},t.CFF.readDict=function(e,r,n){for(var o=t._bin,s={},a=[];r<n;){var i=e[r],l=e[r+1];e[r+2],e[r+3],e[r+4];var c=1,u=null,h=null;if(28==i&&(h=o.readShort(e,r+1),c=3),29==i&&(h=o.readInt(e,r+1),c=5),32<=i&&i<=246&&(h=i-139,c=1),247<=i&&i<=250&&(h=256*(i-247)+l+108,c=2),251<=i&&i<=254&&(h=256*-(i-251)-l-108,c=2),255==i)throw h=o.readInt(e,r+1)/65535,c=5,"unknown number";if(30==i){var d=[];for(c=1;;){var f=e[r+c];c++;var p=f>>4,A=15&f;if(15!=p&&d.push(p),15!=A&&d.push(A),15==A)break}for(var B="",g=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],m=0;m<d.length;m++)B+=g[d[m]];h=parseFloat(B)}i<=21&&(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][i],c=1,12==i&&(u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],c=2)),null!=u?(s[u]=1==a.length?a[0]:a,a=[]):a.push(h),r+=c}return s},t.cmap={},t.cmap.parse=function(e,r,n){e=new Uint8Array(e.buffer,r,n),r=0;var o=t._bin,s={};o.readUshort(e,r),r+=2;var a=o.readUshort(e,r);r+=2;var i=[];s.tables=[];for(var l=0;l<a;l++){var c=o.readUshort(e,r);r+=2;var u=o.readUshort(e,r);r+=2;var h=o.readUint(e,r);r+=4;var d="p"+c+"e"+u,f=i.indexOf(h);if(-1==f){var p;f=s.tables.length,i.push(h);var A=o.readUshort(e,h);0==A?p=t.cmap.parse0(e,h):4==A?p=t.cmap.parse4(e,h):6==A?p=t.cmap.parse6(e,h):12==A?p=t.cmap.parse12(e,h):console.debug("unknown format: "+A,c,u,h),s.tables.push(p)}if(null!=s[d])throw"multiple tables for one platform+encoding";s[d]=f}return s},t.cmap.parse0=function(e,r){var n=t._bin,o={};o.format=n.readUshort(e,r),r+=2;var s=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2,o.map=[];for(var a=0;a<s-6;a++)o.map.push(e[r+a]);return o},t.cmap.parse4=function(e,r){var n=t._bin,o=r,s={};s.format=n.readUshort(e,r),r+=2;var a=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2;var i=n.readUshort(e,r);r+=2;var l=i/2;s.searchRange=n.readUshort(e,r),r+=2,s.entrySelector=n.readUshort(e,r),r+=2,s.rangeShift=n.readUshort(e,r),r+=2,s.endCount=n.readUshorts(e,r,l),r+=2*l,r+=2,s.startCount=n.readUshorts(e,r,l),r+=2*l,s.idDelta=[];for(var c=0;c<l;c++)s.idDelta.push(n.readShort(e,r)),r+=2;for(s.idRangeOffset=n.readUshorts(e,r,l),r+=2*l,s.glyphIdArray=[];r<o+a;)s.glyphIdArray.push(n.readUshort(e,r)),r+=2;return s},t.cmap.parse6=function(e,r){var n=t._bin,o={};o.format=n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,o.firstCode=n.readUshort(e,r),r+=2;var s=n.readUshort(e,r);r+=2,o.glyphIdArray=[];for(var a=0;a<s;a++)o.glyphIdArray.push(n.readUshort(e,r)),r+=2;return o},t.cmap.parse12=function(e,r){var n=t._bin,o={};o.format=n.readUshort(e,r),r+=2,r+=2,n.readUint(e,r),r+=4,n.readUint(e,r),r+=4;var s=n.readUint(e,r);r+=4,o.groups=[];for(var a=0;a<s;a++){var i=r+12*a,l=n.readUint(e,i+0),c=n.readUint(e,i+4),u=n.readUint(e,i+8);o.groups.push([l,c,u])}return o},t.glyf={},t.glyf.parse=function(e,t,r,n){for(var o=[],s=0;s<n.maxp.numGlyphs;s++)o.push(null);return o},t.glyf._parseGlyf=function(e,r){var n=t._bin,o=e._data,s=t._tabOffset(o,"glyf",e._offset)+e.loca[r];if(e.loca[r]==e.loca[r+1])return null;var a={};if(a.noc=n.readShort(o,s),s+=2,a.xMin=n.readShort(o,s),s+=2,a.yMin=n.readShort(o,s),s+=2,a.xMax=n.readShort(o,s),s+=2,a.yMax=n.readShort(o,s),s+=2,a.xMin>=a.xMax||a.yMin>=a.yMax)return null;if(a.noc>0){a.endPts=[];for(var i=0;i<a.noc;i++)a.endPts.push(n.readUshort(o,s)),s+=2;var l=n.readUshort(o,s);if(s+=2,o.length-s<l)return null;a.instructions=n.readBytes(o,s,l),s+=l;var c=a.endPts[a.noc-1]+1;for(a.flags=[],i=0;i<c;i++){var u=o[s];if(s++,a.flags.push(u),0!=(8&u)){var h=o[s];s++;for(var d=0;d<h;d++)a.flags.push(u),i++}}for(a.xs=[],i=0;i<c;i++){var f=0!=(2&a.flags[i]),p=0!=(16&a.flags[i]);f?(a.xs.push(p?o[s]:-o[s]),s++):p?a.xs.push(0):(a.xs.push(n.readShort(o,s)),s+=2)}for(a.ys=[],i=0;i<c;i++)f=0!=(4&a.flags[i]),p=0!=(32&a.flags[i]),f?(a.ys.push(p?o[s]:-o[s]),s++):p?a.ys.push(0):(a.ys.push(n.readShort(o,s)),s+=2);var A=0,B=0;for(i=0;i<c;i++)A+=a.xs[i],B+=a.ys[i],a.xs[i]=A,a.ys[i]=B}else{var g;a.parts=[];do{g=n.readUshort(o,s),s+=2;var m={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(a.parts.push(m),m.glyphIndex=n.readUshort(o,s),s+=2,1&g){var C=n.readShort(o,s);s+=2;var v=n.readShort(o,s);s+=2}else C=n.readInt8(o,s),s++,v=n.readInt8(o,s),s++;2&g?(m.m.tx=C,m.m.ty=v):(m.p1=C,m.p2=v),8&g?(m.m.a=m.m.d=n.readF2dot14(o,s),s+=2):64&g?(m.m.a=n.readF2dot14(o,s),s+=2,m.m.d=n.readF2dot14(o,s),s+=2):128&g&&(m.m.a=n.readF2dot14(o,s),s+=2,m.m.b=n.readF2dot14(o,s),s+=2,m.m.c=n.readF2dot14(o,s),s+=2,m.m.d=n.readF2dot14(o,s),s+=2)}while(32&g);if(256&g){var y=n.readUshort(o,s);for(s+=2,a.instr=[],i=0;i<y;i++)a.instr.push(o[s]),s++}}return a},t.GPOS={},t.GPOS.parse=function(e,r,n,o){return t._lctf.parse(e,r,n,o,t.GPOS.subt)},t.GPOS.subt=function(e,r,n,o){var s=t._bin,a=n,i={};if(i.fmt=s.readUshort(e,n),n+=2,1==r||2==r||3==r||7==r||8==r&&i.fmt<=2){var l=s.readUshort(e,n);n+=2,i.coverage=t._lctf.readCoverage(e,l+a)}if(1==r&&1==i.fmt){var c=s.readUshort(e,n);n+=2;var u=t._lctf.numOfOnes(c);0!=c&&(i.pos=t.GPOS.readValueRecord(e,n,c))}else if(2==r&&i.fmt>=1&&i.fmt<=2){c=s.readUshort(e,n),n+=2;var h=s.readUshort(e,n);n+=2,u=t._lctf.numOfOnes(c);var d=t._lctf.numOfOnes(h);if(1==i.fmt){i.pairsets=[];var f=s.readUshort(e,n);n+=2;for(var p=0;p<f;p++){var A=a+s.readUshort(e,n);n+=2;var B=s.readUshort(e,A);A+=2;for(var g=[],m=0;m<B;m++){var C=s.readUshort(e,A);A+=2,0!=c&&(x=t.GPOS.readValueRecord(e,A,c),A+=2*u),0!=h&&(S=t.GPOS.readValueRecord(e,A,h),A+=2*d),g.push({gid2:C,val1:x,val2:S})}i.pairsets.push(g)}}if(2==i.fmt){var v=s.readUshort(e,n);n+=2;var y=s.readUshort(e,n);n+=2;var b=s.readUshort(e,n);n+=2;var M=s.readUshort(e,n);for(n+=2,i.classDef1=t._lctf.readClassDef(e,a+v),i.classDef2=t._lctf.readClassDef(e,a+y),i.matrix=[],p=0;p<b;p++){var F=[];for(m=0;m<M;m++){var x=null,S=null;0!=c&&(x=t.GPOS.readValueRecord(e,n,c),n+=2*u),0!=h&&(S=t.GPOS.readValueRecord(e,n,h),n+=2*d),F.push({val1:x,val2:S})}i.matrix.push(F)}}}else{if(9==r&&1==i.fmt){var G=s.readUshort(e,n);n+=2;var T=s.readUint(e,n);if(n+=4,9==o.ltype)o.ltype=G;else if(o.ltype!=G)throw"invalid extension substitution";return t.GPOS.subt(e,o.ltype,a+T)}console.debug("unsupported GPOS table LookupType",r,"format",i.fmt)}return i},t.GPOS.readValueRecord=function(e,r,n){var o=t._bin,s=[];return s.push(1&n?o.readShort(e,r):0),r+=1&n?2:0,s.push(2&n?o.readShort(e,r):0),r+=2&n?2:0,s.push(4&n?o.readShort(e,r):0),r+=4&n?2:0,s.push(8&n?o.readShort(e,r):0),r+=8&n?2:0,s},t.GSUB={},t.GSUB.parse=function(e,r,n,o){return t._lctf.parse(e,r,n,o,t.GSUB.subt)},t.GSUB.subt=function(e,r,n,o){var s=t._bin,a=n,i={};if(i.fmt=s.readUshort(e,n),n+=2,1!=r&&4!=r&&5!=r&&6!=r)return null;if(1==r||4==r||5==r&&i.fmt<=2||6==r&&i.fmt<=2){var l=s.readUshort(e,n);n+=2,i.coverage=t._lctf.readCoverage(e,a+l)}if(1==r&&i.fmt>=1&&i.fmt<=2){if(1==i.fmt)i.delta=s.readShort(e,n),n+=2;else if(2==i.fmt){var c=s.readUshort(e,n);n+=2,i.newg=s.readUshorts(e,n,c),n+=2*i.newg.length}}else if(4==r){i.vals=[],c=s.readUshort(e,n),n+=2;for(var u=0;u<c;u++){var h=s.readUshort(e,n);n+=2,i.vals.push(t.GSUB.readLigatureSet(e,a+h))}}else if(5==r&&2==i.fmt){if(2==i.fmt){var d=s.readUshort(e,n);n+=2,i.cDef=t._lctf.readClassDef(e,a+d),i.scset=[];var f=s.readUshort(e,n);for(n+=2,u=0;u<f;u++){var p=s.readUshort(e,n);n+=2,i.scset.push(0==p?null:t.GSUB.readSubClassSet(e,a+p))}}}else if(6==r&&3==i.fmt){if(3==i.fmt){for(u=0;u<3;u++){c=s.readUshort(e,n),n+=2;for(var A=[],B=0;B<c;B++)A.push(t._lctf.readCoverage(e,a+s.readUshort(e,n+2*B)));n+=2*c,0==u&&(i.backCvg=A),1==u&&(i.inptCvg=A),2==u&&(i.ahedCvg=A)}c=s.readUshort(e,n),n+=2,i.lookupRec=t.GSUB.readSubstLookupRecords(e,n,c)}}else{if(7==r&&1==i.fmt){var g=s.readUshort(e,n);n+=2;var m=s.readUint(e,n);if(n+=4,9==o.ltype)o.ltype=g;else if(o.ltype!=g)throw"invalid extension substitution";return t.GSUB.subt(e,o.ltype,a+m)}console.debug("unsupported GSUB table LookupType",r,"format",i.fmt)}return i},t.GSUB.readSubClassSet=function(e,r){var n=t._bin.readUshort,o=r,s=[],a=n(e,r);r+=2;for(var i=0;i<a;i++){var l=n(e,r);r+=2,s.push(t.GSUB.readSubClassRule(e,o+l))}return s},t.GSUB.readSubClassRule=function(e,r){var n=t._bin.readUshort,o={},s=n(e,r),a=n(e,r+=2);r+=2,o.input=[];for(var i=0;i<s-1;i++)o.input.push(n(e,r)),r+=2;return o.substLookupRecords=t.GSUB.readSubstLookupRecords(e,r,a),o},t.GSUB.readSubstLookupRecords=function(e,r,n){for(var o=t._bin.readUshort,s=[],a=0;a<n;a++)s.push(o(e,r),o(e,r+2)),r+=4;return s},t.GSUB.readChainSubClassSet=function(e,r){var n=t._bin,o=r,s=[],a=n.readUshort(e,r);r+=2;for(var i=0;i<a;i++){var l=n.readUshort(e,r);r+=2,s.push(t.GSUB.readChainSubClassRule(e,o+l))}return s},t.GSUB.readChainSubClassRule=function(e,r){for(var n=t._bin,o={},s=["backtrack","input","lookahead"],a=0;a<s.length;a++){var i=n.readUshort(e,r);r+=2,1==a&&i--,o[s[a]]=n.readUshorts(e,r,i),r+=2*o[s[a]].length}return i=n.readUshort(e,r),r+=2,o.subst=n.readUshorts(e,r,2*i),r+=2*o.subst.length,o},t.GSUB.readLigatureSet=function(e,r){var n=t._bin,o=r,s=[],a=n.readUshort(e,r);r+=2;for(var i=0;i<a;i++){var l=n.readUshort(e,r);r+=2,s.push(t.GSUB.readLigature(e,o+l))}return s},t.GSUB.readLigature=function(e,r){var n=t._bin,o={chain:[]};o.nglyph=n.readUshort(e,r),r+=2;var s=n.readUshort(e,r);r+=2;for(var a=0;a<s-1;a++)o.chain.push(n.readUshort(e,r)),r+=2;return o},t.head={},t.head.parse=function(e,r,n){var o=t._bin,s={};return o.readFixed(e,r),r+=4,s.fontRevision=o.readFixed(e,r),r+=4,o.readUint(e,r),r+=4,o.readUint(e,r),r+=4,s.flags=o.readUshort(e,r),r+=2,s.unitsPerEm=o.readUshort(e,r),r+=2,s.created=o.readUint64(e,r),r+=8,s.modified=o.readUint64(e,r),r+=8,s.xMin=o.readShort(e,r),r+=2,s.yMin=o.readShort(e,r),r+=2,s.xMax=o.readShort(e,r),r+=2,s.yMax=o.readShort(e,r),r+=2,s.macStyle=o.readUshort(e,r),r+=2,s.lowestRecPPEM=o.readUshort(e,r),r+=2,s.fontDirectionHint=o.readShort(e,r),r+=2,s.indexToLocFormat=o.readShort(e,r),r+=2,s.glyphDataFormat=o.readShort(e,r),r+=2,s},t.hhea={},t.hhea.parse=function(e,r,n){var o=t._bin,s={};return o.readFixed(e,r),r+=4,s.ascender=o.readShort(e,r),r+=2,s.descender=o.readShort(e,r),r+=2,s.lineGap=o.readShort(e,r),r+=2,s.advanceWidthMax=o.readUshort(e,r),r+=2,s.minLeftSideBearing=o.readShort(e,r),r+=2,s.minRightSideBearing=o.readShort(e,r),r+=2,s.xMaxExtent=o.readShort(e,r),r+=2,s.caretSlopeRise=o.readShort(e,r),r+=2,s.caretSlopeRun=o.readShort(e,r),r+=2,s.caretOffset=o.readShort(e,r),r+=2,r+=8,s.metricDataFormat=o.readShort(e,r),r+=2,s.numberOfHMetrics=o.readUshort(e,r),r+=2,s},t.hmtx={},t.hmtx.parse=function(e,r,n,o){for(var s=t._bin,a={aWidth:[],lsBearing:[]},i=0,l=0,c=0;c<o.maxp.numGlyphs;c++)c<o.hhea.numberOfHMetrics&&(i=s.readUshort(e,r),r+=2,l=s.readShort(e,r),r+=2),a.aWidth.push(i),a.lsBearing.push(l);return a},t.kern={},t.kern.parse=function(e,r,n,o){var s=t._bin,a=s.readUshort(e,r);if(r+=2,1==a)return t.kern.parseV1(e,r-2,n,o);var i=s.readUshort(e,r);r+=2;for(var l={glyph1:[],rval:[]},c=0;c<i;c++){r+=2,n=s.readUshort(e,r),r+=2;var u=s.readUshort(e,r);r+=2;var h=u>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;r=t.kern.readFormat0(e,r,l)}return l},t.kern.parseV1=function(e,r,n,o){var s=t._bin;s.readFixed(e,r),r+=4;var a=s.readUint(e,r);r+=4;for(var i={glyph1:[],rval:[]},l=0;l<a;l++){s.readUint(e,r),r+=4;var c=s.readUshort(e,r);r+=2,s.readUshort(e,r),r+=2;var u=c>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;r=t.kern.readFormat0(e,r,i)}return i},t.kern.readFormat0=function(e,r,n){var o=t._bin,s=-1,a=o.readUshort(e,r);r+=2,o.readUshort(e,r),r+=2,o.readUshort(e,r),r+=2,o.readUshort(e,r),r+=2;for(var i=0;i<a;i++){var l=o.readUshort(e,r);r+=2;var c=o.readUshort(e,r);r+=2;var u=o.readShort(e,r);r+=2,l!=s&&(n.glyph1.push(l),n.rval.push({glyph2:[],vals:[]}));var h=n.rval[n.rval.length-1];h.glyph2.push(c),h.vals.push(u),s=l}return r},t.loca={},t.loca.parse=function(e,r,n,o){var s=t._bin,a=[],i=o.head.indexToLocFormat,l=o.maxp.numGlyphs+1;if(0==i)for(var c=0;c<l;c++)a.push(s.readUshort(e,r+(c<<1))<<1);if(1==i)for(c=0;c<l;c++)a.push(s.readUint(e,r+(c<<2)));return a},t.maxp={},t.maxp.parse=function(e,r,n){var o=t._bin,s={},a=o.readUint(e,r);return r+=4,s.numGlyphs=o.readUshort(e,r),r+=2,65536==a&&(s.maxPoints=o.readUshort(e,r),r+=2,s.maxContours=o.readUshort(e,r),r+=2,s.maxCompositePoints=o.readUshort(e,r),r+=2,s.maxCompositeContours=o.readUshort(e,r),r+=2,s.maxZones=o.readUshort(e,r),r+=2,s.maxTwilightPoints=o.readUshort(e,r),r+=2,s.maxStorage=o.readUshort(e,r),r+=2,s.maxFunctionDefs=o.readUshort(e,r),r+=2,s.maxInstructionDefs=o.readUshort(e,r),r+=2,s.maxStackElements=o.readUshort(e,r),r+=2,s.maxSizeOfInstructions=o.readUshort(e,r),r+=2,s.maxComponentElements=o.readUshort(e,r),r+=2,s.maxComponentDepth=o.readUshort(e,r),r+=2),s},t.name={},t.name.parse=function(e,r,n){var o=t._bin,s={};o.readUshort(e,r),r+=2;var a=o.readUshort(e,r);r+=2,o.readUshort(e,r);for(var i,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],c=r+=2,u=0;u<a;u++){var h=o.readUshort(e,r);r+=2;var d=o.readUshort(e,r);r+=2;var f=o.readUshort(e,r);r+=2;var p=o.readUshort(e,r);r+=2;var A=o.readUshort(e,r);r+=2;var B=o.readUshort(e,r);r+=2;var g,m=l[p],C=c+12*a+B;if(0==h)g=o.readUnicode(e,C,A/2);else if(3==h&&0==d)g=o.readUnicode(e,C,A/2);else if(0==d)g=o.readASCII(e,C,A);else if(1==d)g=o.readUnicode(e,C,A/2);else if(3==d)g=o.readUnicode(e,C,A/2);else{if(1!=h)throw"unknown encoding "+d+", platformID: "+h;g=o.readASCII(e,C,A),console.debug("reading unknown MAC encoding "+d+" as ASCII")}var v="p"+h+","+f.toString(16);null==s[v]&&(s[v]={}),s[v][void 0!==m?m:p]=g,s[v]._lang=f}for(var y in s)if(null!=s[y].postScriptName&&1033==s[y]._lang)return s[y];for(var y in s)if(null!=s[y].postScriptName&&0==s[y]._lang)return s[y];for(var y in s)if(null!=s[y].postScriptName&&3084==s[y]._lang)return s[y];for(var y in s)if(null!=s[y].postScriptName)return s[y];for(var y in s){i=y;break}return console.debug("returning name table with languageID "+s[i]._lang),s[i]},t["OS/2"]={},t["OS/2"].parse=function(e,r,n){var o=t._bin.readUshort(e,r);r+=2;var s={};if(0==o)t["OS/2"].version0(e,r,s);else if(1==o)t["OS/2"].version1(e,r,s);else if(2==o||3==o||4==o)t["OS/2"].version2(e,r,s);else{if(5!=o)throw"unknown OS/2 table version: "+o;t["OS/2"].version5(e,r,s)}return s},t["OS/2"].version0=function(e,r,n){var o=t._bin;return n.xAvgCharWidth=o.readShort(e,r),r+=2,n.usWeightClass=o.readUshort(e,r),r+=2,n.usWidthClass=o.readUshort(e,r),r+=2,n.fsType=o.readUshort(e,r),r+=2,n.ySubscriptXSize=o.readShort(e,r),r+=2,n.ySubscriptYSize=o.readShort(e,r),r+=2,n.ySubscriptXOffset=o.readShort(e,r),r+=2,n.ySubscriptYOffset=o.readShort(e,r),r+=2,n.ySuperscriptXSize=o.readShort(e,r),r+=2,n.ySuperscriptYSize=o.readShort(e,r),r+=2,n.ySuperscriptXOffset=o.readShort(e,r),r+=2,n.ySuperscriptYOffset=o.readShort(e,r),r+=2,n.yStrikeoutSize=o.readShort(e,r),r+=2,n.yStrikeoutPosition=o.readShort(e,r),r+=2,n.sFamilyClass=o.readShort(e,r),r+=2,n.panose=o.readBytes(e,r,10),r+=10,n.ulUnicodeRange1=o.readUint(e,r),r+=4,n.ulUnicodeRange2=o.readUint(e,r),r+=4,n.ulUnicodeRange3=o.readUint(e,r),r+=4,n.ulUnicodeRange4=o.readUint(e,r),r+=4,n.achVendID=[o.readInt8(e,r),o.readInt8(e,r+1),o.readInt8(e,r+2),o.readInt8(e,r+3)],r+=4,n.fsSelection=o.readUshort(e,r),r+=2,n.usFirstCharIndex=o.readUshort(e,r),r+=2,n.usLastCharIndex=o.readUshort(e,r),r+=2,n.sTypoAscender=o.readShort(e,r),r+=2,n.sTypoDescender=o.readShort(e,r),r+=2,n.sTypoLineGap=o.readShort(e,r),r+=2,n.usWinAscent=o.readUshort(e,r),r+=2,n.usWinDescent=o.readUshort(e,r),r+2},t["OS/2"].version1=function(e,r,n){var o=t._bin;return r=t["OS/2"].version0(e,r,n),n.ulCodePageRange1=o.readUint(e,r),r+=4,n.ulCodePageRange2=o.readUint(e,r),r+4},t["OS/2"].version2=function(e,r,n){var o=t._bin;return r=t["OS/2"].version1(e,r,n),n.sxHeight=o.readShort(e,r),r+=2,n.sCapHeight=o.readShort(e,r),r+=2,n.usDefault=o.readUshort(e,r),r+=2,n.usBreak=o.readUshort(e,r),r+=2,n.usMaxContext=o.readUshort(e,r),r+2},t["OS/2"].version5=function(e,r,n){var o=t._bin;return r=t["OS/2"].version2(e,r,n),n.usLowerOpticalPointSize=o.readUshort(e,r),r+=2,n.usUpperOpticalPointSize=o.readUshort(e,r),r+2},t.post={},t.post.parse=function(e,r,n){var o=t._bin,s={};return s.version=o.readFixed(e,r),r+=4,s.italicAngle=o.readFixed(e,r),r+=4,s.underlinePosition=o.readShort(e,r),r+=2,s.underlineThickness=o.readShort(e,r),r+=2,s},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var r=e.cmap,n=-1;if(null!=r.p0e4?n=r.p0e4:null!=r.p3e1?n=r.p3e1:null!=r.p1e0?n=r.p1e0:null!=r.p0e3&&(n=r.p0e3),-1==n)throw"no familiar platform and encoding!";var o=r.tables[n];if(0==o.format)return t>=o.map.length?0:o.map[t];if(4==o.format){for(var s=-1,a=0;a<o.endCount.length;a++)if(t<=o.endCount[a]){s=a;break}return-1==s||o.startCount[s]>t?0:65535&(0!=o.idRangeOffset[s]?o.glyphIdArray[t-o.startCount[s]+(o.idRangeOffset[s]>>1)-(o.idRangeOffset.length-s)]:t+o.idDelta[s])}if(12==o.format){if(t>o.groups[o.groups.length-1][1])return 0;for(a=0;a<o.groups.length;a++){var i=o.groups[a];if(i[0]<=t&&t<=i[1])return i[2]+(t-i[0])}return 0}throw"unknown cmap table format "+o.format},t.U.glyphToPath=function(e,r){var n={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[r]){var o=e.SVG.entries[r];return null==o?n:("string"==typeof o&&(o=t.SVG.toPath(o),e.SVG.entries[r]=o),o)}if(e.CFF){var s={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},a=e.CFF,i=e.CFF.Private;if(a.ROS){for(var l=0;a.FDSelect[l+2]<=r;)l+=2;i=a.FDArray[a.FDSelect[l+1]].Private}t.U._drawCFF(e.CFF.CharStrings[r],s,a,i,n)}else e.glyf&&t.U._drawGlyf(r,e,n);return n},t.U._drawGlyf=function(e,r,n){var o=r.glyf[e];null==o&&(o=r.glyf[e]=t.glyf._parseGlyf(r,e)),null!=o&&(o.noc>-1?t.U._simpleGlyph(o,n):t.U._compoGlyph(o,r,n))},t.U._simpleGlyph=function(e,r){for(var n=0;n<e.noc;n++){for(var o=0==n?0:e.endPts[n-1]+1,s=e.endPts[n],a=o;a<=s;a++){var i=a==o?s:a-1,l=a==s?o:a+1,c=1&e.flags[a],u=1&e.flags[i],h=1&e.flags[l],d=e.xs[a],f=e.ys[a];if(a==o)if(c){if(!u){t.U.P.moveTo(r,d,f);continue}t.U.P.moveTo(r,e.xs[i],e.ys[i])}else u?t.U.P.moveTo(r,e.xs[i],e.ys[i]):t.U.P.moveTo(r,(e.xs[i]+d)/2,(e.ys[i]+f)/2);c?u&&t.U.P.lineTo(r,d,f):h?t.U.P.qcurveTo(r,d,f,e.xs[l],e.ys[l]):t.U.P.qcurveTo(r,d,f,(d+e.xs[l])/2,(f+e.ys[l])/2)}t.U.P.closePath(r)}},t.U._compoGlyph=function(e,r,n){for(var o=0;o<e.parts.length;o++){var s={cmds:[],crds:[]},a=e.parts[o];t.U._drawGlyf(a.glyphIndex,r,s);for(var i=a.m,l=0;l<s.crds.length;l+=2){var c=s.crds[l],u=s.crds[l+1];n.crds.push(c*i.a+u*i.b+i.tx),n.crds.push(c*i.c+u*i.d+i.ty)}for(l=0;l<s.cmds.length;l++)n.cmds.push(s.cmds[l])}},t.U._getGlyphClass=function(e,r){var n=t._lctf.getInterval(r,e);return-1==n?0:r[n+2]},t.U.getPairAdjustment=function(e,r,n){var o=0;if(e.GPOS)for(var s=e.GPOS,a=s.lookupList,i=s.featureList,l=[],c=0;c<i.length;c++){var u=i[c];if("kern"==u.tag)for(var h=0;h<u.tab.length;h++)if(!l[u.tab[h]]){l[u.tab[h]]=!0;for(var d=a[u.tab[h]],f=0;f<d.tabs.length;f++)if(null!=d.tabs[f]){var p,A=d.tabs[f];if(!A.coverage||-1!=(p=t._lctf.coverageIndex(A.coverage,r)))if(1==d.ltype);else if(2==d.ltype){var B;if(1==A.fmt){var g=A.pairsets[p];for(c=0;c<g.length;c++)g[c].gid2==n&&(B=g[c])}else if(2==A.fmt){var m=t.U._getGlyphClass(r,A.classDef1),C=t.U._getGlyphClass(n,A.classDef2);B=A.matrix[m][C]}B&&B.val1&&B.val1[2]&&(o+=B.val1[2]),B&&B.val2&&B.val2[0]&&(o+=B.val2[0])}}}}if(e.kern){var v=e.kern.glyph1.indexOf(r);if(-1!=v){var y=e.kern.rval[v].glyph2.indexOf(n);-1!=y&&(o+=e.kern.rval[v].vals[y])}}return o},t.U._applySubs=function(e,r,n,o){for(var s=e.length-r-1,a=0;a<n.tabs.length;a++)if(null!=n.tabs[a]){var i,l=n.tabs[a];if(!l.coverage||-1!=(i=t._lctf.coverageIndex(l.coverage,e[r])))if(1==n.ltype)e[r],1==l.fmt?e[r]=e[r]+l.delta:e[r]=l.newg[i];else if(4==n.ltype)for(var c=l.vals[i],u=0;u<c.length;u++){var h=c[u],d=h.chain.length;if(!(d>s)){for(var f=!0,p=0,A=0;A<d;A++){for(;-1==e[r+p+(1+A)];)p++;h.chain[A]!=e[r+p+(1+A)]&&(f=!1)}if(f){for(e[r]=h.nglyph,A=0;A<d+p;A++)e[r+A+1]=-1;break}}}else if(5==n.ltype&&2==l.fmt)for(var B=t._lctf.getInterval(l.cDef,e[r]),g=l.cDef[B+2],m=l.scset[g],C=0;C<m.length;C++){var v=m[C],y=v.input;if(!(y.length>s)){for(f=!0,A=0;A<y.length;A++){var b=t._lctf.getInterval(l.cDef,e[r+1+A]);if(-1==B&&l.cDef[b+2]!=y[A]){f=!1;break}}if(f){var M=v.substLookupRecords;for(u=0;u<M.length;u+=2)M[u],M[u+1]}}}else if(6==n.ltype&&3==l.fmt){if(!t.U._glsCovered(e,l.backCvg,r-l.backCvg.length))continue;if(!t.U._glsCovered(e,l.inptCvg,r))continue;if(!t.U._glsCovered(e,l.ahedCvg,r+l.inptCvg.length))continue;var F=l.lookupRec;for(C=0;C<F.length;C+=2){B=F[C];var x=o[F[C+1]];t.U._applySubs(e,r+B,x,o)}}}},t.U._glsCovered=function(e,r,n){for(var o=0;o<r.length;o++)if(-1==t._lctf.coverageIndex(r[o],e[n+o]))return!1;return!0},t.U.glyphsToPath=function(e,r,n){for(var o={cmds:[],crds:[]},s=0,a=0;a<r.length;a++){var i=r[a];if(-1!=i){for(var l=a<r.length-1&&-1!=r[a+1]?r[a+1]:0,c=t.U.glyphToPath(e,i),u=0;u<c.crds.length;u+=2)o.crds.push(c.crds[u]+s),o.crds.push(c.crds[u+1]);for(n&&o.cmds.push(n),u=0;u<c.cmds.length;u++)o.cmds.push(c.cmds[u]);n&&o.cmds.push("X"),s+=e.hmtx.aWidth[i],a<r.length-1&&(s+=t.U.getPairAdjustment(e,i,l))}}return o},t.U.P={},t.U.P.moveTo=function(e,t,r){e.cmds.push("M"),e.crds.push(t,r)},t.U.P.lineTo=function(e,t,r){e.cmds.push("L"),e.crds.push(t,r)},t.U.P.curveTo=function(e,t,r,n,o,s,a){e.cmds.push("C"),e.crds.push(t,r,n,o,s,a)},t.U.P.qcurveTo=function(e,t,r,n,o){e.cmds.push("Q"),e.crds.push(t,r,n,o)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,r,n,o,s){for(var a=r.stack,i=r.nStems,l=r.haveWidth,c=r.width,u=r.open,h=0,d=r.x,f=r.y,p=0,A=0,B=0,g=0,m=0,C=0,v=0,y=0,b=0,M=0,F={val:0,size:0};h<e.length;){t.CFF.getCharString(e,h,F);var x=F.val;if(h+=F.size,"o1"==x||"o18"==x)a.length%2!=0&&!l&&(c=a.shift()+o.nominalWidthX),i+=a.length>>1,a.length=0,l=!0;else if("o3"==x||"o23"==x)a.length%2!=0&&!l&&(c=a.shift()+o.nominalWidthX),i+=a.length>>1,a.length=0,l=!0;else if("o4"==x)a.length>1&&!l&&(c=a.shift()+o.nominalWidthX,l=!0),u&&t.U.P.closePath(s),f+=a.pop(),t.U.P.moveTo(s,d,f),u=!0;else if("o5"==x)for(;a.length>0;)d+=a.shift(),f+=a.shift(),t.U.P.lineTo(s,d,f);else if("o6"==x||"o7"==x)for(var S=a.length,G="o6"==x,T=0;T<S;T++){var I=a.shift();G?d+=I:f+=I,G=!G,t.U.P.lineTo(s,d,f)}else if("o8"==x||"o24"==x){S=a.length;for(var E=0;E+6<=S;)p=d+a.shift(),A=f+a.shift(),B=p+a.shift(),g=A+a.shift(),d=B+a.shift(),f=g+a.shift(),t.U.P.curveTo(s,p,A,B,g,d,f),E+=6;"o24"==x&&(d+=a.shift(),f+=a.shift(),t.U.P.lineTo(s,d,f))}else{if("o11"==x)break;if("o1234"==x||"o1235"==x||"o1236"==x||"o1237"==x)"o1234"==x&&(A=f,B=(p=d+a.shift())+a.shift(),M=g=A+a.shift(),C=g,y=f,d=(v=(m=(b=B+a.shift())+a.shift())+a.shift())+a.shift(),t.U.P.curveTo(s,p,A,B,g,b,M),t.U.P.curveTo(s,m,C,v,y,d,f)),"o1235"==x&&(p=d+a.shift(),A=f+a.shift(),B=p+a.shift(),g=A+a.shift(),b=B+a.shift(),M=g+a.shift(),m=b+a.shift(),C=M+a.shift(),v=m+a.shift(),y=C+a.shift(),d=v+a.shift(),f=y+a.shift(),a.shift(),t.U.P.curveTo(s,p,A,B,g,b,M),t.U.P.curveTo(s,m,C,v,y,d,f)),"o1236"==x&&(p=d+a.shift(),A=f+a.shift(),B=p+a.shift(),M=g=A+a.shift(),C=g,v=(m=(b=B+a.shift())+a.shift())+a.shift(),y=C+a.shift(),d=v+a.shift(),t.U.P.curveTo(s,p,A,B,g,b,M),t.U.P.curveTo(s,m,C,v,y,d,f)),"o1237"==x&&(p=d+a.shift(),A=f+a.shift(),B=p+a.shift(),g=A+a.shift(),b=B+a.shift(),M=g+a.shift(),m=b+a.shift(),C=M+a.shift(),v=m+a.shift(),y=C+a.shift(),Math.abs(v-d)>Math.abs(y-f)?d=v+a.shift():f=y+a.shift(),t.U.P.curveTo(s,p,A,B,g,b,M),t.U.P.curveTo(s,m,C,v,y,d,f));else if("o14"==x){if(a.length>0&&!l&&(c=a.shift()+n.nominalWidthX,l=!0),4==a.length){var D=a.shift(),U=a.shift(),R=a.shift(),k=a.shift(),w=t.CFF.glyphBySE(n,R),_=t.CFF.glyphBySE(n,k);t.U._drawCFF(n.CharStrings[w],r,n,o,s),r.x=D,r.y=U,t.U._drawCFF(n.CharStrings[_],r,n,o,s)}u&&(t.U.P.closePath(s),u=!1)}else if("o19"==x||"o20"==x)a.length%2!=0&&!l&&(c=a.shift()+o.nominalWidthX),i+=a.length>>1,a.length=0,l=!0,h+=i+7>>3;else if("o21"==x)a.length>2&&!l&&(c=a.shift()+o.nominalWidthX,l=!0),f+=a.pop(),d+=a.pop(),u&&t.U.P.closePath(s),t.U.P.moveTo(s,d,f),u=!0;else if("o22"==x)a.length>1&&!l&&(c=a.shift()+o.nominalWidthX,l=!0),d+=a.pop(),u&&t.U.P.closePath(s),t.U.P.moveTo(s,d,f),u=!0;else if("o25"==x){for(;a.length>6;)d+=a.shift(),f+=a.shift(),t.U.P.lineTo(s,d,f);p=d+a.shift(),A=f+a.shift(),B=p+a.shift(),g=A+a.shift(),d=B+a.shift(),f=g+a.shift(),t.U.P.curveTo(s,p,A,B,g,d,f)}else if("o26"==x)for(a.length%2&&(d+=a.shift());a.length>0;)p=d,A=f+a.shift(),d=B=p+a.shift(),f=(g=A+a.shift())+a.shift(),t.U.P.curveTo(s,p,A,B,g,d,f);else if("o27"==x)for(a.length%2&&(f+=a.shift());a.length>0;)A=f,B=(p=d+a.shift())+a.shift(),g=A+a.shift(),d=B+a.shift(),f=g,t.U.P.curveTo(s,p,A,B,g,d,f);else if("o10"==x||"o29"==x){var H="o10"==x?o:n;if(0==a.length)console.debug("error: empty stack");else{var P=a.pop(),L=H.Subrs[P+H.Bias];r.x=d,r.y=f,r.nStems=i,r.haveWidth=l,r.width=c,r.open=u,t.U._drawCFF(L,r,n,o,s),d=r.x,f=r.y,i=r.nStems,l=r.haveWidth,c=r.width,u=r.open}}else if("o30"==x||"o31"==x){var O=a.length,J=(E=0,"o31"==x);for(E+=O-(S=-3&O);E<S;)J?(A=f,B=(p=d+a.shift())+a.shift(),f=(g=A+a.shift())+a.shift(),S-E==5?(d=B+a.shift(),E++):d=B,J=!1):(p=d,A=f+a.shift(),B=p+a.shift(),g=A+a.shift(),d=B+a.shift(),S-E==5?(f=g+a.shift(),E++):f=g,J=!0),t.U.P.curveTo(s,p,A,B,g,d,f),E+=4}else{if("o"==(x+"").charAt(0))throw console.debug("Unknown operation: "+x,e),x;a.push(x)}}}r.x=d,r.y=f,r.nStems=i,r.haveWidth=l,r.width=c,r.open=u};var r=t,n={Typr:r};return e.Typr=r,e.default=n,Object.defineProperty(e,"__esModule",{value:!0}),e}({}).Typr},function(){return function(e){var t=Uint8Array,r=Uint16Array,n=Uint32Array,o=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),i=function(e,t){for(var o=new r(31),s=0;s<31;++s)o[s]=t+=1<<e[s-1];var a=new n(o[30]);for(s=1;s<30;++s)for(var i=o[s];i<o[s+1];++i)a[i]=i-o[s]<<5|s;return[o,a]},l=i(o,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var h=i(s,0)[0],d=new r(32768),f=0;f<32768;++f){var p=(43690&f)>>>1|(21845&f)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,d[f]=((65280&p)>>>8|(255&p)<<8)>>>1}var A=function(e,t,n){for(var o=e.length,s=0,a=new r(t);s<o;++s)++a[e[s]-1];var i,l=new r(t);for(s=0;s<t;++s)l[s]=l[s-1]+a[s-1]<<1;if(n){i=new r(1<<t);var c=15-t;for(s=0;s<o;++s)if(e[s])for(var u=s<<4|e[s],h=t-e[s],f=l[e[s]-1]++<<h,p=f|(1<<h)-1;f<=p;++f)i[d[f]>>>c]=u}else for(i=new r(o),s=0;s<o;++s)e[s]&&(i[s]=d[l[e[s]-1]++]>>>15-e[s]);return i},B=new t(288);for(f=0;f<144;++f)B[f]=8;for(f=144;f<256;++f)B[f]=9;for(f=256;f<280;++f)B[f]=7;for(f=280;f<288;++f)B[f]=8;var g=new t(32);for(f=0;f<32;++f)g[f]=5;var m=A(B,9,1),C=A(g,5,1),v=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},y=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&r},b=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],F=function(e,t,r){var n=new Error(t||M[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,F),!r)throw n;return n},x=function(e,i,l){var u=e.length;if(!u||l&&!l.l&&u<5)return i||new t(0);var d=!i||l,f=!l||l.i;l||(l={}),i||(i=new t(3*u));var p,B=function(e){var r=i.length;if(e>r){var n=new t(Math.max(2*r,e));n.set(i),i=n}},g=l.f||0,M=l.p||0,x=l.b||0,S=l.l,G=l.d,T=l.m,I=l.n,E=8*u;do{if(!S){l.f=g=y(e,M,1);var D=y(e,M+1,3);if(M+=3,!D){var U=e[(N=((p=M)/8|0)+(7&p&&1)+4)-4]|e[N-3]<<8,R=N+U;if(R>u){f&&F(0);break}d&&B(x+U),i.set(e.subarray(N,R),x),l.b=x+=U,l.p=M=8*R;continue}if(1==D)S=m,G=C,T=9,I=5;else if(2==D){var k=y(e,M,31)+257,w=y(e,M+10,15)+4,_=k+y(e,M+5,31)+1;M+=14;for(var H=new t(_),P=new t(19),L=0;L<w;++L)P[a[L]]=y(e,M+3*L,7);M+=3*w;var O=v(P),J=(1<<O)-1,K=A(P,O,1);for(L=0;L<_;){var N,Q=K[y(e,M,J)];if(M+=15&Q,(N=Q>>>4)<16)H[L++]=N;else{var j=0,X=0;for(16==N?(X=3+y(e,M,3),M+=2,j=H[L-1]):17==N?(X=3+y(e,M,7),M+=3):18==N&&(X=11+y(e,M,127),M+=7);X--;)H[L++]=j}}var W=H.subarray(0,k),V=H.subarray(k);T=v(W),I=v(V),S=A(W,T,1),G=A(V,I,1)}else F(1);if(M>E){f&&F(0);break}}d&&B(x+131072);for(var Y=(1<<T)-1,Z=(1<<I)-1,q=M;;q=M){var z=(j=S[b(e,M)&Y])>>>4;if((M+=15&j)>E){f&&F(0);break}if(j||F(2),z<256)i[x++]=z;else{if(256==z){q=M,S=null;break}var $=z-254;if(z>264){var ee=o[L=z-257];$=y(e,M,(1<<ee)-1)+c[L],M+=ee}var te=G[b(e,M)&Z],re=te>>>4;if(te||F(3),M+=15&te,V=h[re],re>3&&(ee=s[re],V+=b(e,M)&(1<<ee)-1,M+=ee),M>E){f&&F(0);break}d&&B(x+131072);for(var ne=x+$;x<ne;x+=4)i[x]=i[x-V],i[x+1]=i[x+1-V],i[x+2]=i[x+2-V],i[x+3]=i[x+3-V];x=ne}}l.l=S,l.p=q,l.b=x,S&&(g=1,l.m=T,l.d=G,l.n=I)}while(!g);return x==i.length?i:function(e,o,s){(null==o||o<0)&&(o=0),(null==s||s>e.length)&&(s=e.length);var a=new(e instanceof r?r:e instanceof n?n:t)(s-o);return a.set(e.subarray(o,s)),a}(i,0,x)},S=new t(0),G="undefined"!=typeof TextDecoder&&new TextDecoder;try{G.decode(S,{stream:!0})}catch(e){}return e.convert_streams=function(e){var t=new DataView(e),r=0;function n(){var e=t.getUint16(r);return r+=2,e}function o(){var e=t.getUint32(r);return r+=4,e}function s(e){g.setUint16(m,e),m+=2}function a(e){g.setUint32(m,e),m+=4}for(var i={signature:o(),flavor:o(),length:o(),numTables:n(),reserved:n(),totalSfntSize:o(),majorVersion:n(),minorVersion:n(),metaOffset:o(),metaLength:o(),metaOrigLength:o(),privOffset:o(),privLength:o()},l=0;Math.pow(2,l)<=i.numTables;)l++;l--;for(var c=16*Math.pow(2,l),u=16*i.numTables-c,h=12,d=[],f=0;f<i.numTables;f++)d.push({tag:o(),offset:o(),compLength:o(),origLength:o(),origChecksum:o()}),h+=16;var p,A=new Uint8Array(12+16*d.length+d.reduce((function(e,t){return e+t.origLength+4}),0)),B=A.buffer,g=new DataView(B),m=0;return a(i.flavor),s(i.numTables),s(c),s(l),s(u),d.forEach((function(e){a(e.tag),a(e.origChecksum),a(h),a(e.origLength),e.outOffset=h,(h+=e.origLength)%4!=0&&(h+=4-h%4)})),d.forEach((function(t){var r,n=e.slice(t.offset,t.offset+t.compLength);if(t.compLength!=t.origLength){var o=new Uint8Array(t.origLength);r=new Uint8Array(n,2),x(r,o)}else o=new Uint8Array(n);A.set(o,t.outOffset);var s=0;(h=t.outOffset+t.origLength)%4!=0&&(s=4-h%4),A.set(new Uint8Array(s).buffer,t.outOffset+t.origLength),p=h+s})),B.slice(0,p)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams},function(e,t){const r={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"};let o;function s(e){if(!o){const e={R:2,L:1,D:4,C:16,U:32,T:8};o=new Map;for(let t in n){let r=0;n[t].split(",").forEach((n=>{let[s,a]=n.split("+");s=parseInt(s,36),a=a?parseInt(a,36):0,o.set(r+=s,e[t]);for(let i=a;i--;)o.set(++r,e[t])}))}}return o.get(e)||32}const a=[null,"isol","init","fina","medi"];function i(e){const t=new Uint8Array(e.length);let r=32,n=1,o=-1;for(let a=0;a<e.length;a++){const i=e.codePointAt(a);let l=0|s(i),c=1;8&l||(21&r?22&l?(c=3,1!==n&&3!==n||t[o]++):33&l&&(2!==n&&4!==n||t[o]--):34&r&&(2!==n&&4!==n||t[o]--),n=t[a]=c,r=l,o=a,i>65535&&a++)}return t}function l(t){const n=Object.create(null),o={unitsPerEm:t.head.unitsPerEm,ascender:t.hhea.ascender,descender:t.hhea.descender,forEachGlyph(s,l,c,u){let h=0;const d=1/o.unitsPerEm*l,f=function(t,r){const n=[];for(let s=0;s<r.length;s++){const o=r.codePointAt(s);o>65535&&s++,n.push(e.U.codeToGlyph(t,o))}const o=t.GSUB;if(o){const{lookupList:t,featureList:s}=o;let l;const c=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,u=[];s.forEach((o=>{if(c.test(o.tag))for(let s=0;s<o.tab.length;s++){if(u[o.tab[s]])continue;u[o.tab[s]]=!0;const c=t[o.tab[s]],h=/^(isol|init|fina|medi)$/.test(o.tag);h&&!l&&(l=i(r));for(let r=0;r<n.length;r++)l&&h&&a[l[r]]!==o.tag||e.U._applySubs(n,r,c,t)}}))}return n}(t,s);let p=0,A=-1;return f.forEach(((o,a)=>{if(-1!==o){let s=n[o];if(!s){const{cmds:a,crds:i}=e.U.glyphToPath(t,o);let l,c,u,h,d="",f=0;for(let e=0,t=a.length;e<t;e++){const t=r[a[e]];d+=a[e];for(let e=1;e<=t;e++)d+=(e>1?",":"")+i[f++]}if(i.length){l=c=1/0,u=h=-1/0;for(let e=0,t=i.length;e<t;e+=2){let t=i[e],r=i[e+1];t<l&&(l=t),r<c&&(c=r),t>u&&(u=t),r>h&&(h=r)}}else l=u=c=h=0;s=n[o]={index:o,advanceWidth:t.hmtx.aWidth[o],xMin:l,yMin:c,xMax:u,yMax:h,path:d,pathCommandCount:a.length}}-1!==A&&(h+=e.U.getPairAdjustment(t,A,o)*d),u.call(null,s,h,p),s.advanceWidth&&(h+=s.advanceWidth*d),c&&(h+=c*l),A=o}p+=s.codePointAt(p)>65535?2:1})),h}};return o}return function(r){const n=new Uint8Array(r,0,4),o=e._bin.readASCII(n,0,4);if("wOFF"===o)r=t(r);else if("wOF2"===o)throw new Error("woff2 fonts not supported");return l(e.parse(r)[0])}}],init:(e,t,r)=>r(e(),t())}),P={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},L=new s.Color;let O=!1;function J(){return(self.performance||Date).now()}const K=Object.create(null);function N(e,t){O=!0,e=Q({},e);const r=J();if(e.font=function(e){j||(j="undefined"===typeof document?{}:document.createElement("a"));return j.href=e,j.href}(e.font||P.defaultFontURL),e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||P.sdfGlyphSize,null!=e.colorRanges){let t={};for(let r in e.colorRanges)if(e.colorRanges.hasOwnProperty(r)){let n=e.colorRanges[r];"number"!==typeof n&&(n=L.set(n).getHex()),t[r]=n}e.colorRanges=t}Object.freeze(e);const{textureWidth:n,sdfExponent:o}=P,{sdfGlyphSize:a}=e;let i=`${e.font}@${a}`,c=K[i];c||(c=K[i]={count:0,glyphs:new Map,sdfTexture:new s.DataTexture(new Uint8Array(a*n*4),n,a,s.RGBAFormat,void 0,void 0,void 0,void 0,s.LinearFilter,s.LinearFilter)},c.sdfTexture.font=e.font),V(e).then((n=>{const{glyphIds:s,glyphPositions:i,fontSize:u,unitsPerEm:h,timings:d}=n,f=[],p=new Float32Array(4*s.length),A=u/h;let B=0,g=0;const m=J();s.forEach(((e,t)=>{let r=c.glyphs.get(e);if(!r){const{path:t,pathBounds:o}=n.glyphData[e],s=Math.max(o[2]-o[0],o[3]-o[1])/a*(P.sdfMargin*a+.5),i=c.count++,l=[o[0]-s,o[1]-s,o[2]+s,o[3]+s];c.glyphs.set(e,r={path:t,atlasIndex:i,sdfViewBox:l}),f.push(r)}const{sdfViewBox:o}=r,l=i[g++],u=i[g++];p[B++]=l+o[0]*A,p[B++]=u+o[1]*A,p[B++]=l+o[2]*A,p[B++]=u+o[3]*A,s[t]=r.atlasIndex})),d.quads=(d.quads||0)+(J()-m);const C=J();d.sdf={},l.all(f.map((({path:e,atlasIndex:t,sdfViewBox:r})=>{const n=Math.max(r[2]-r[0],r[3]-r[1]);return W(a,a,e,r,n,P.sdfExponent).then((({textureData:e,timing:r})=>(d.sdf[t]=r,{atlasIndex:t,textureData:e,timing:r})))}))).then((i=>{i.length&&(i.forEach((({atlasIndex:e,textureData:t,timing:r})=>{const n=c.sdfTexture.image;for(;n.data.length<(e+1)*a*a;){const e=new Uint8Array(2*n.data.length);e.set(n.data),n.data=e,n.height*=2}const o=Math.floor(e/4),s=n.width/a,i=Math.floor(o/s)*n.width*a*4+o%s*a*4+e%4;for(let l=0;l<a;l++){const e=l*a,r=i+l*n.width*4;for(let o=0;o<a;o++)n.data[r+4*o]=t[e+o]}})),c.sdfTexture.needsUpdate=!0),d.sdfTotal=J()-C,d.total=J()-r,t(Object.freeze({parameters:e,sdfTexture:c.sdfTexture,sdfGlyphSize:a,sdfExponent:o,glyphBounds:p,glyphAtlasIndices:s,glyphColors:n.glyphColors,caretPositions:n.caretPositions,caretHeight:n.caretHeight,chunkedBounds:n.chunkedBounds,ascender:n.ascender,descender:n.descender,lineHeight:n.lineHeight,topBaseline:n.topBaseline,blockBounds:n.blockBounds,visibleBounds:n.visibleBounds,timings:n.timings,get totalBounds(){return console.log("totalBounds deprecated, use blockBounds instead"),n.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");const[e,t,r,o]=n.blockBounds;return[r-e,o-t]}}))}))}))}function Q(e,t){for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}let j;const X=g({name:"Typesetter",dependencies:[P,H,function(e,t,r){const{defaultFontURL:n}=r,o=Object.create(null),s=1/0,a=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,i=/[\s\-\u007C\u00AD\u2010\u2012-\u2014\u2027\u2056\u2E17\u2E40]/;function l(t,r){t||(t=n);let s=o[t];s?s.pending?s.pending.push(r):r(s):(o[t]={pending:[r]},function(t,r){!function o(){const s=e=>{console.error(`Failure loading font ${t}${t===n?"":"; trying fallback"}`,e),t!==n&&(t=n,o())};try{const n=new XMLHttpRequest;n.open("get",t,!0),n.responseType="arraybuffer",n.onload=function(){if(n.status>=400)s(new Error(n.statusText));else if(n.status>0)try{const t=e(n.response);r(t)}catch(t){s(t)}},n.onerror=s,n.send()}catch(a){s(a)}}()}(t,(e=>{let r=o[t].pending;o[t]=e,r.forEach((t=>t(e)))})))}function c({text:e="",font:r=n,sdfGlyphSize:o=64,fontSize:c=1,letterSpacing:f=0,lineHeight:p="normal",maxWidth:A=s,direction:B,textAlign:g="left",textIndent:m=0,whiteSpace:C="normal",overflowWrap:v="normal",anchorX:y=0,anchorY:b=0,includeCaretPositions:M=!1,chunkedBoundsSize:F=8192,colorRanges:x=null},S,G=!1){const T=h(),I={fontLoad:0,typesetting:0};e.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),c=+c,f=+f,A=+A,p=p||"normal",m=+m,l(r,(r=>{const n=isFinite(A);let o=null,l=null,E=null,D=null,U=null,R=null,k=null,w=0,_=0,H="nowrap"!==C;const{ascender:P,descender:L,unitsPerEm:O}=r;I.fontLoad=h()-T;const J=h(),K=c/O;"normal"===p&&(p=(P-L)/O);const N=((p*=c)-(P-L)*K)/2,Q=-(P*K+N),j=Math.min(p,(P-L)*K),X=(P+L)/2*K-j/2;let W=m,V=new d;const Y=[V];r.forEachGlyph(e,c,f,((t,r,o)=>{const s=e.charAt(o),l=t.advanceWidth*K,u=V.count;let h;if("isEmpty"in t||(t.isWhitespace=!!s&&/\s/.test(s),t.canBreakAfter=!!s&&i.test(s),t.isEmpty=t.xMin===t.xMax||t.yMin===t.yMax||a.test(s)),t.isWhitespace||t.isEmpty||_++,H&&n&&!t.isWhitespace&&r+l+W>A&&u){if(V.glyphAt(u-1).glyphObj.canBreakAfter)h=new d,W=-r;else for(let e=u;e--;){if(0===e&&"break-word"===v){h=new d,W=-r;break}if(V.glyphAt(e).glyphObj.canBreakAfter){h=V.splitAt(e+1);const t=h.glyphAt(0).x;W-=t;for(let e=h.count;e--;)h.glyphAt(e).x-=t;break}}h&&(V.isSoftWrapped=!0,V=h,Y.push(V),w=A)}let p=V.glyphAt(V.count);p.glyphObj=t,p.x=r+W,p.width=l,p.charIndex=o,"\n"===s&&(V=new d,Y.push(V),W=-(r+l+f*c)+m)})),Y.forEach((e=>{for(let t=e.count;t--;){let{glyphObj:r,x:n,width:o}=e.glyphAt(t);if(!r.isWhitespace)return e.width=n+o,void(e.width>w&&(w=e.width))}}));let Z=0,q=0;if(y&&("number"===typeof y?Z=-y:"string"===typeof y&&(Z=-w*("left"===y?0:"center"===y?.5:"right"===y?1:u(y)))),b)if("number"===typeof b)q=-b;else if("string"===typeof b){let e=Y.length*p;q="top"===b?0:"top-baseline"===b?-Q:"middle"===b?e/2:"bottom"===b?e:"bottom-baseline"===b?e-N+L*K:u(b)*e}if(!G){const n=t.getEmbeddingLevels(e,B);o=new Uint16Array(_),l=new Float32Array(2*_),E={},R=[s,s,-1/0,-1/0],k=[];let a=Q;M&&(U=new Float32Array(3*e.length)),x&&(D=new Uint8Array(3*_));let i,c,u=0,h=-1,d=-1;Y.forEach(((f,A)=>{let{count:B,width:m}=f;if(B>0){let p=0;for(let e=B;e--&&f.glyphAt(e).glyphObj.isWhitespace;)p++;let A=0,C=0;if("center"===g)A=(w-m)/2;else if("right"===g)A=w-m;else if("justify"===g&&f.isSoftWrapped){let e=0;for(let t=B-p;t--;)f.glyphAt(t).glyphObj.isWhitespace&&e++;C=(w-m)/e}if(C||A){let e=0;for(let t=0;t<B;t++){let r=f.glyphAt(t);const n=r.glyphObj;r.x+=A+e,0!==C&&n.isWhitespace&&t<B-p&&(e+=C,r.width+=C)}}const v=t.getReorderSegments(e,n,f.glyphAt(0).charIndex,f.glyphAt(f.count-1).charIndex);for(let e=0;e<v.length;e++){const[t,r]=v[e];let n=1/0,o=-1/0;for(let e=0;e<B;e++)if(f.glyphAt(e).charIndex>=t){let t=e,s=e;for(;s<B;s++){let e=f.glyphAt(s);if(e.charIndex>r)break;s<B-p&&(n=Math.min(n,e.x),o=Math.max(o,e.x+e.width))}for(let e=t;e<s;e++){const t=f.glyphAt(e);t.x=o-(t.x+t.width-n)}break}}let y;const b=e=>y=e;for(let g=0;g<B;g++){let p=f.glyphAt(g);y=p.glyphObj;const A=y.index,B=1&n.levels[p.charIndex];if(B){const n=t.getMirroredCharacter(e[p.charIndex]);n&&r.forEachGlyph(n,0,0,b)}if(M){const{charIndex:e}=p,t=p.x+Z,r=p.x+p.width+Z;for(U[3*e]=B?r:t,U[3*e+1]=B?t:r,U[3*e+2]=a+X+q;e-h>1;)U[3*(h+1)]=U[3*h],U[3*(h+1)+1]=U[3*h+1],U[3*(h+1)+2]=U[3*h+2],h++;h=e}if(x){const{charIndex:e}=p;for(;e>d;)d++,x.hasOwnProperty(d)&&(c=x[d])}if(!y.isWhitespace&&!y.isEmpty){const e=u++;E[A]||(E[A]={path:y.path,pathBounds:[y.xMin,y.yMin,y.xMax,y.yMax]});const t=p.x+Z,r=a+q;l[2*e]=t,l[2*e+1]=r;const n=t+y.xMin*K,h=r+y.yMin*K,d=t+y.xMax*K,f=r+y.yMax*K;n<R[0]&&(R[0]=n),h<R[1]&&(R[1]=h),d>R[2]&&(R[2]=d),f>R[3]&&(R[3]=f),e%F===0&&(i={start:e,end:e,rect:[s,s,-1/0,-1/0]},k.push(i)),i.end++;const B=i.rect;if(n<B[0]&&(B[0]=n),h<B[1]&&(B[1]=h),d>B[2]&&(B[2]=d),f>B[3]&&(B[3]=f),o[e]=A,x){const t=3*e;D[t]=c>>16&255,D[t+1]=c>>8&255,D[t+2]=255&c}}}}a-=p}))}I.typesetting=h()-J,S({glyphIds:o,glyphPositions:l,glyphData:E,caretPositions:U,caretHeight:j,glyphColors:D,chunkedBounds:k,fontSize:c,unitsPerEm:O,ascender:P*K,descender:L*K,lineHeight:p,topBaseline:Q,blockBounds:[Z,q-Y.length*p,Z+w,q],visibleBounds:R,timings:I})}))}function u(e){let t=e.match(/^([\d.]+)%$/),r=t?parseFloat(t[1]):NaN;return isNaN(r)?0:r/100}function h(){return(self.performance||Date).now()}function d(){this.data=[]}const f=["glyphObj","x","width","charIndex"];return d.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/f.length)},glyphAt(e){let t=d.flyweight;return t.data=this.data,t.index=e,t},splitAt(e){let t=new d;return t.data=this.data.splice(e*f.length),t}},d.flyweight=f.reduce(((e,t,r,n)=>(Object.defineProperty(e,t,{get(){return this.data[this.index*f.length+r]},set(e){this.data[this.index*f.length+r]=e}}),e)),{data:null,index:0}),{typeset:c,measure:function(e,t){c(e,(e=>{const[r,n,o,s]=e.blockBounds;t({width:o-r,height:s-n})}),{metricsOnly:!0})},loadFont:l}},y],init(e,t,r,n){const{defaultFontURL:o}=e;return r(t,n(),{defaultFontURL:o})}}),W=function(){const e={};let t=0;return function(...r){const n="TroikaTextSDFGenerator_"+t++%4;let o=e[n];return o||(o=e[n]={workerModule:g({name:n,workerId:n,dependencies:[P,_,w],init(e,t,r){const{sdfExponent:n,sdfMargin:o}=e;return r(t,{sdfExponent:n,sdfMargin:o})},getTransferables:e=>[e.textureData.buffer]}),requests:0,idleTimer:null}),o.requests++,clearTimeout(o.idleTimer),o.workerModule(...r).then((e=>(0===--o.requests&&(o.idleTimer=setTimeout((()=>{!function(e){A[e]&&A[e].forEach((function(e){e()})),p[e]&&(p[e].terminate(),delete p[e])}(n)}),2e3)),e)))}}(),V=g({name:"Typesetter",dependencies:[X,v],init:(e,t)=>function(r){const n=new t;return e.typeset(r,n.resolve),n},getTransferables(e){const t=[e.glyphPositions.buffer,e.glyphIds.buffer];return e.caretPositions&&t.push(e.caretPositions.buffer),t}});const Y=(()=>{const e={};new s.Vector3;const t="aTroikaGlyphIndex";class r extends s.InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new s.Sphere,this.boundingBox=new s.Box3}computeBoundingSphere(){}computeBoundingBox(){}set detail(t){if(t!==this._detail){this._detail=t,("number"!==typeof t||t<1)&&(t=1);let r=function(t){let r=e[t];return r||(r=e[t]=new s.PlaneBufferGeometry(1,1,t,t).translate(.5,.5,0)),r}(t);["position","normal","uv"].forEach((e=>{this.attributes[e]=r.attributes[e].clone()})),this.setIndex(r.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,r,s,a,i){n(this,"aTroikaGlyphBounds",e,4),n(this,t,r,1),n(this,"aTroikaGlyphColor",i,3),this._blockBounds=s,this._chunkedBounds=a,o(this,r.length),this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:r}=this;if(t){const{PI:n,floor:o,min:s,max:a,sin:i,cos:l}=Math,c=n/2,u=2*n,h=Math.abs(t),d=e[0]/h,f=e[2]/h,p=o((d+c)/u)!==o((f+c)/u)?-h:s(i(d)*h,i(f)*h),A=o((d-c)/u)!==o((f-c)/u)?h:a(i(d)*h,i(f)*h),B=o((d+n)/u)!==o((f+n)/u)?2*h:a(h-l(d)*h,h-l(f)*h);r.min.set(p,e[1],t<0?-B:0),r.max.set(A,e[3],t<0?0:B)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let r=this.getAttribute(t).count,n=this._chunkedBounds;if(n)for(let t=n.length;t--;){r=n[t].end;let o=n[t].rect;if(o[1]<e.w&&o[3]>e.y&&o[0]<e.z&&o[2]>e.x)break}o(this,r)}}function n(e,t,r,n){const o=e.getAttribute(t);r?o&&o.array.length===r.length?(o.array.set(r),o.needsUpdate=!0):(e.setAttribute(t,new s.InstancedBufferAttribute(r,n)),delete e._maxInstanceCount,e.dispose()):o&&e.deleteAttribute(t)}function o(e,t){e[e.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=t}return r.prototype.setAttribute||(r.prototype.setAttribute=function(e,t){return this.attributes[e]=t,this}),r})();const Z=(()=>{const e=new s.MeshBasicMaterial({color:16777215,side:s.DoubleSide,transparent:!0}),t=8421504,r=new s.Matrix4,n=new s.Vector3,o=new s.Vector3,a=[],i=new s.Vector3,l="+x+y";function c(e){return Array.isArray(e)?e[0]:e}let u=()=>{const t=new s.Mesh(new s.PlaneBufferGeometry(1,1),e);return u=()=>t,t},h=()=>{const t=new s.Mesh(new s.PlaneBufferGeometry(1,1,32,1),e);return h=()=>t,t};const d={type:"syncstart"},f={type:"synccomplete"},p=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],A=p.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class B extends s.Mesh{constructor(){super(new Y,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=t,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=l,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(d),N({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize},(t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync((()=>{r.forEach((e=>e&&e()))}))),this.dispatchEvent(f),e&&e()}))))}onBeforeRender(e,t,r,n,o,s){this.sync(),o.isTroikaTextMaterial&&this._prepareForRender(o)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let t=this._derivedMaterial;const r=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=e.clone());if(t&&t.baseMaterial===r||(t=this._derivedMaterial=function(e){const t=E(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new s.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new s.Vector4(0,0,0,0)},uTroikaClipRect:{value:new s.Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new s.Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new s.Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new s.Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of encoding in SDFGenerator.js\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat distance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(distance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  distance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter({vertexShader:e,fragmentShader:t}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(t)&&(t=t.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(e)||(e=e.replace(b,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:e,fragmentShader:t}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}(r),r.addEventListener("dispose",(function e(){r.removeEventListener("dispose",e),t.dispose()}))),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let e=t._outlineMtl;return e||(e=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),e.isTextOutlineMaterial=!0,e.depthWrite=!1,e.map=null,t.addEventListener("dispose",(function r(){t.removeEventListener("dispose",r),e.dispose()}))),[e,t]}return t}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return c(this.material).getDepthMaterial()}get customDistanceMaterial(){return c(this.material).getDistanceMaterial()}_prepareForRender(e){const a=e.isTextOutlineMaterial,c=e.uniforms,u=this.textRenderInfo;if(u){const{sdfTexture:e,blockBounds:r}=u;c.uTroikaSDFTexture.value=e,c.uTroikaSDFTextureSize.value.set(e.image.width,e.image.height),c.uTroikaSDFGlyphSize.value=u.sdfGlyphSize,c.uTroikaSDFExponent.value=u.sdfExponent,c.uTroikaTotalBounds.value.fromArray(r),c.uTroikaUseGlyphColors.value=!a&&!!u.glyphColors;let n,o,s,i=0,l=0,h=0,d=0,f=0;if(a){let{outlineWidth:e,outlineOffsetX:t,outlineOffsetY:r,outlineBlur:o,outlineOpacity:s}=this;i=this._parsePercent(e)||0,l=Math.max(0,this._parsePercent(o)||0),n=s,d=this._parsePercent(t)||0,f=this._parsePercent(r)||0}else h=Math.max(0,this._parsePercent(this.strokeWidth)||0),h&&(s=this.strokeColor,c.uTroikaStrokeColor.value.set(null==s?t:s),o=this.strokeOpacity,null==o&&(o=1)),n=this.fillOpacity;c.uTroikaDistanceOffset.value=i,c.uTroikaPositionOffset.value.set(d,f),c.uTroikaBlurRadius.value=l,c.uTroikaStrokeWidth.value=h,c.uTroikaStrokeOpacity.value=o,c.uTroikaFillOpacity.value=null==n?1:n,c.uTroikaCurveRadius.value=this.curveRadius||0;let p=this.clipRect;if(p&&Array.isArray(p)&&4===p.length)c.uTroikaClipRect.value.fromArray(p);else{const e=100*(this.fontSize||.1);c.uTroikaClipRect.value.set(r[0]-e,r[1]-e,r[2]+e,r[3]+e)}this.geometry.applyClipRect(c.uTroikaClipRect.value)}c.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const h=a?this.outlineColor||0:this.color;if(null==h)delete e.color;else{const t=e.hasOwnProperty("color")?e.color:e.color=new s.Color;h===t._input&&"object"!==typeof h||t.set(t._input=h)}let d=this.orientation||l;if(d!==e._orientation){let t=c.uTroikaOrient.value;d=d.replace(/[^-+xyz]/g,"");let s=d!==l&&d.match(/^([-+])([xyz])([-+])([xyz])$/);if(s){let[,e,a,l,c]=s;n.set(0,0,0)[a]="-"===e?1:-1,o.set(0,0,0)[c]="-"===l?-1:1,r.lookAt(i,n.cross(o),o),t.setFromMatrix4(r)}else t.identity();e._orientation=d}}_parsePercent(e){if("string"===typeof e){let t=e.match(/^(-?[\d.]+)%$/),r=t?parseFloat(t[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new s.Vector2){t.copy(e);const r=this.curveRadius;return r&&(t.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),t}worldPositionToTextCoords(e,t=new s.Vector2){return n.copy(e),this.localPositionToTextCoords(this.worldToLocal(n),t)}raycast(e,t){const{textRenderInfo:r,curveRadius:n}=this;if(r){const o=r.blockBounds,s=n?h():u(),i=s.geometry,{position:l,uv:c}=i.attributes;for(let e=0;e<c.count;e++){let t=o[0]+c.getX(e)*(o[2]-o[0]);const r=o[1]+c.getY(e)*(o[3]-o[1]);let s=0;n&&(s=n-Math.cos(t/n)*n,t=Math.sin(t/n)*n),l.setXYZ(e,t,r,s)}i.boundingSphere=this.geometry.boundingSphere,i.boundingBox=this.geometry.boundingBox,s.matrixWorld=this.matrixWorld,s.material.side=this.material.side,a.length=0,s.raycast(e,a);for(let e=0;e<a.length;e++)a[e].object=this,t.push(a[e])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,A.forEach((t=>{this[t]=e[t]})),this}clone(){return(new this.constructor).copy(this)}}p.forEach((e=>{const t="_private_"+e;Object.defineProperty(B.prototype,e,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})}));let g=!1;return Object.defineProperty(B.prototype,"anchor",{get(){return this._deprecated_anchor},set(e){this._deprecated_anchor=e,g||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),g=!0),Array.isArray(e)?(this.anchorX=100*(+e[0]||0)+"%",this.anchorY=100*(+e[1]||0)+"%"):this.anchorX=this.anchorY=0}}),B})();new WeakMap;new WeakMap;var q=r(1823);const z=o.forwardRef((({anchorX:e="center",anchorY:t="middle",children:r,onSync:s,...a},i)=>{const l=(0,q.Ky)((({invalidate:e})=>e)),[c]=o.useState((()=>new Z)),[u,h]=o.useMemo((()=>{const e=[];let t="";return o.Children.forEach(r,(r=>{"string"===typeof r||"number"===typeof r?t+=r:e.push(r)})),[e,t]}),[r]);return o.useLayoutEffect((()=>{c.sync((()=>{l(),s&&s(c)}))})),o.useEffect((()=>()=>c.dispose()),[c]),o.createElement("primitive",(0,n.Z)({object:c,ref:i,text:h,anchorX:e,anchorY:t},a),u)}))},8626:function(e,t,r){r.d(t,{L:function(){return ce}});var n=r(2212);const o=new WeakMap;class s extends n.Loader{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,o){const s=new n.FileLoader(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(e=>{const r={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,r).then(t).catch(o)}),r,o)}decodeDracoFile(e,t,r,n){const o={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,o).then(t)}decodeGeometry(e,t){for(const o in t.attributeTypes){const e=t.attributeTypes[o];void 0!==e.BYTES_PER_ELEMENT&&(t.attributeTypes[o]=e.name)}const r=JSON.stringify(t);if(o.has(e)){const t=o.get(e);if(t.key===r)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let n;const s=this.workerNextTaskID++,a=e.byteLength,i=this._getWorker(s,a).then((r=>(n=r,new Promise(((r,o)=>{n._callbacks[s]={resolve:r,reject:o},n.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return i.catch((()=>!0)).then((()=>{n&&s&&this._releaseTask(n,s)})),o.set(e,{key:r,promise:i}),i}_createGeometry(e){const t=new n.BufferGeometry;e.index&&t.setIndex(new n.BufferAttribute(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const o=e.attributes[r],s=o.name,a=o.array,i=o.itemSize;t.setAttribute(s,new n.BufferAttribute(a,i))}return t}_loadLibrary(e,t){const r=new n.FileLoader(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise(((t,n)=>{r.load(e,t,void 0,n)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const r=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const n=a.toString(),o=["/* draco decoder */",r,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([o]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const r=t.data;switch(r.type){case"decode":e._callbacks[r.id].resolve(r);break;case"error":e._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function a(){let e,t;function r(e,t,r,n,o,s){const a=s.num_components(),i=r.num_points()*a,l=i*o.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,o),u=e._malloc(l);t.GetAttributeDataArrayForAllPoints(r,s,c,l,u);const h=new o(e.HEAPF32.buffer,u,i).slice();return e._free(u),{name:n,array:h,itemSize:a}}onmessage=function(n){const o=n.data;switch(o.type){case"init":e=o.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const n=o.buffer,s=o.taskConfig;t.then((e=>{const t=e.draco,a=new t.Decoder,i=new t.DecoderBuffer;i.Init(new Int8Array(n),n.byteLength);try{const e=function(e,t,n,o){const s=o.attributeIDs,a=o.attributeTypes;let i,l;const c=t.GetEncodedGeometryType(n);if(c===e.TRIANGULAR_MESH)i=new e.Mesh,l=t.DecodeBufferToMesh(n,i);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");i=new e.PointCloud,l=t.DecodeBufferToPointCloud(n,i)}if(!l.ok()||0===i.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const u={index:null,attributes:[]};for(const h in s){const n=self[a[h]];let l,c;if(o.useUniqueIDs)c=s[h],l=t.GetAttributeByUniqueId(i,c);else{if(c=t.GetAttributeId(i,e[s[h]]),-1===c)continue;l=t.GetAttribute(i,c)}u.attributes.push(r(e,t,i,h,n,l))}c===e.TRIANGULAR_MESH&&(u.index=function(e,t,r){const n=3*r.num_faces(),o=4*n,s=e._malloc(o);t.GetTrianglesUInt32Array(r,o,s);const a=new Uint32Array(e.HEAPF32.buffer,s,n).slice();return e._free(s),{array:a,itemSize:1}}(e,t,i));return e.destroy(i),u}(t,a,i,s),n=e.attributes.map((e=>e.array.buffer));e.index&&n.push(e.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:e},n)}catch(l){console.error(l),self.postMessage({type:"error",id:o.id,error:l.message})}finally{t.destroy(i),t.destroy(a)}}))}}}let i;const l=()=>{if(i)return i;const e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!==typeof WebAssembly)return{supported:!1};let r,n="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";WebAssembly.validate(e)&&(n="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");const o=WebAssembly.instantiate(function(e){const r=new Uint8Array(e.length);for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);r[t]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}let n=0;for(let o=0;o<e.length;++o)r[n++]=r[o]<60?t[r[o]]:64*(r[o]-60)+r[++o];return r.buffer.slice(0,n)}(n),{}).then((e=>{r=e.instance,r.exports.__wasm_call_ctors()}));function s(e,t,n,o,s,a){const i=r.exports.sbrk,l=n+3&-4,c=i(l*o),u=i(s.length),h=new Uint8Array(r.exports.memory.buffer);h.set(s,u);const d=e(c,n,o,u,s.length);if(0===d&&a&&a(c,l,o),t.set(h.subarray(c,c+n*o)),i(c-i(0)),0!==d)throw new Error(`Malformed buffer data: ${d}`)}const a={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},l={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return i={ready:o,supported:!0,decodeVertexBuffer(e,t,n,o,i){s(r.exports.meshopt_decodeVertexBuffer,e,t,n,o,r.exports[a[i]])},decodeIndexBuffer(e,t,n,o){s(r.exports.meshopt_decodeIndexBuffer,e,t,n,o)},decodeIndexSequence(e,t,n,o){s(r.exports.meshopt_decodeIndexSequence,e,t,n,o)},decodeGltfBuffer(e,t,n,o,i,c){s(r.exports[l[i]],e,t,n,o,r.exports[a[c]])}},i};class c extends n.Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new p(e)})),this.register((function(e){return new C(e)})),this.register((function(e){return new v(e)})),this.register((function(e){return new A(e)})),this.register((function(e){return new B(e)})),this.register((function(e){return new g(e)})),this.register((function(e){return new m(e)})),this.register((function(e){return new d(e)})),this.register((function(e){return new y(e)}))}load(e,t,r,o){const s=this;let a;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:n.LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);const i=function(t){o?o(t):console.error(t),s.manager.itemError(e),s.manager.itemEnd(e)},l=new n.FileLoader(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(r){try{s.parse(r,a,(function(r){t(r),s.manager.itemEnd(e)}),i)}catch(n){i(n)}}),r,i)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,o){let s;const a={},i={};if("string"===typeof e)s=e;else{if(n.LoaderUtils.decodeText(new Uint8Array(e,0,4))===b){try{a[h.KHR_BINARY_GLTF]=new x(e)}catch(u){return void(o&&o(u))}s=a[h.KHR_BINARY_GLTF].content}else s=n.LoaderUtils.decodeText(new Uint8Array(e))}const l=JSON.parse(s);if(void 0===l.asset||l.asset.version[0]<2)return void(o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new re(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let n=0;n<this.pluginCallbacks.length;n++){const e=this.pluginCallbacks[n](c);i[e.name]=e,a[e.name]=!0}if(l.extensionsUsed)for(let n=0;n<l.extensionsUsed.length;++n){const e=l.extensionsUsed[n],t=l.extensionsRequired||[];switch(e){case h.KHR_MATERIALS_UNLIT:a[e]=new f;break;case h.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[e]=new I;break;case h.KHR_DRACO_MESH_COMPRESSION:a[e]=new S(l,this.dracoLoader);break;case h.KHR_TEXTURE_TRANSFORM:a[e]=new G;break;case h.KHR_MESH_QUANTIZATION:a[e]=new E;break;default:t.indexOf(e)>=0&&void 0===i[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}c.setExtensions(a),c.setPlugins(i),c.parse(r,o)}}function u(){let e={};return{get:function(t){return e[t]},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const h={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class d{constructor(e){this.parser=e,this.name=h.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,n=t.length;r<n;r++){const n=t[r];n.extensions&&n.extensions[this.name]&&void 0!==n.extensions[this.name].light&&e._addNodeRef(this.cache,n.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let o=t.cache.get(r);if(o)return o;const s=t.json,a=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let i;const l=new n.Color(16777215);void 0!==a.color&&l.fromArray(a.color);const c=void 0!==a.range?a.range:0;switch(a.type){case"directional":i=new n.DirectionalLight(l),i.target.position.set(0,0,-1),i.add(i.target);break;case"point":i=new n.PointLight(l),i.distance=c;break;case"spot":i=new n.SpotLight(l),i.distance=c,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,i.angle=a.spot.outerConeAngle,i.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return i.position.set(0,0,0),i.decay=2,void 0!==a.intensity&&(i.intensity=a.intensity),i.name=t.createUniqueName(a.name||"light_"+e),o=Promise.resolve(i),t.cache.add(r,o),o}createNodeAttachment(e){const t=this,r=this.parser,n=r.json.nodes[e],o=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===o?null:this._loadLight(o).then((function(e){return r._getNodeRef(t.cache,o,e)}))}}class f{constructor(){this.name=h.KHR_MATERIALS_UNLIT}getMaterialType(){return n.MeshBasicMaterial}extendParams(e,t,r){const o=[];e.color=new n.Color(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const t=s.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==s.baseColorTexture&&o.push(r.assignTexture(e,"map",s.baseColorTexture))}return Promise.all(o)}}class p{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const s=[],a=o.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&s.push(r.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(s.push(r.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){const e=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new n.Vector2(e,-e)}return Promise.all(s)}}class A{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const o=[],s=n.extensions[this.name];return void 0!==s.transmissionFactor&&(t.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&o.push(r.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(o)}}class B{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const s=[],a=o.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&s.push(r.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||0;const i=a.attenuationColor||[1,1,1];return t.attenuationTint=new n.Color(i[0],i[1],i[2]),Promise.all(s)}}class g{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const n=r.extensions[this.name];return t.ior=void 0!==n.ior?n.ior:1.5,Promise.resolve()}}class m{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const s=[],a=o.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&s.push(r.assignTexture(t,"specularIntensityMap",a.specularTexture));const i=a.specularColorFactor||[1,1,1];return t.specularTint=new n.Color(i[0],i[1],i[2]),void 0!==a.specularColorTexture&&s.push(r.assignTexture(t,"specularTintMap",a.specularColorTexture).then((function(e){e.encoding=n.sRGBEncoding}))),Promise.all(s)}}class C{constructor(e){this.parser=e,this.name=h.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,n=r.textures[e];if(!n.extensions||!n.extensions[this.name])return null;const o=n.extensions[this.name],s=r.images[o.source],a=t.options.ktx2Loader;if(!a){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s,a)}}class v{constructor(e){this.parser=e,this.name=h.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,n=r.json,o=n.textures[e];if(!o.extensions||!o.extensions[t])return null;const s=o.extensions[t],a=n.images[s.source];let i=r.textureLoader;if(a.uri){const e=r.options.manager.getHandler(a.uri);null!==e&&(i=e)}return this.detectSupport().then((function(o){if(o)return r.loadTextureImage(e,a,i);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class y{constructor(e){this.name=h.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const e=r.extensions[this.name],n=this.parser.getDependency("buffer",e.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([n,o.ready]).then((function(t){const r=e.byteOffset||0,n=e.byteLength||0,s=e.count,a=e.byteStride,i=new ArrayBuffer(s*a),l=new Uint8Array(t[0],r,n);return o.decodeGltfBuffer(new Uint8Array(i),s,a,l,e.mode,e.filter),i}))}return null}}const b="glTF",M=1313821514,F=5130562;class x{constructor(e){this.name=h.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:n.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==b)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,o=new DataView(e,12);let s=0;for(;s<r;){const t=o.getUint32(s,!0);s+=4;const r=o.getUint32(s,!0);if(s+=4,r===M){const r=new Uint8Array(e,12+s,t);this.content=n.LoaderUtils.decodeText(r)}else if(r===F){const r=12+s;this.body=e.slice(r,r+t)}s+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class S{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=h.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,n=this.dracoLoader,o=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},i={},l={};for(const c in s){const e=N[c]||c.toLowerCase();a[e]=s[c]}for(const c in e.attributes){const t=N[c]||c.toLowerCase();if(void 0!==s[c]){const n=r.accessors[e.attributes[c]],o=L[n.componentType];l[t]=o,i[t]=!0===n.normalized}}return t.getDependency("bufferView",o).then((function(e){return new Promise((function(t){n.decodeDracoFile(e,(function(e){for(const t in e.attributes){const r=e.attributes[t],n=i[t];void 0!==n&&(r.normalized=n)}t(e)}),a,l)}))}))}}class G{constructor(){this.name=h.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class T extends n.MeshStandardMaterial{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),r=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),o=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),i={specular:{value:(new n.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=i,this.onBeforeCompile=function(e){for(const t in i)e.uniforms[t]=i[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",o).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return i.specular.value},set:function(e){i.specular.value=e}},specularMap:{get:function(){return i.specularMap.value},set:function(e){i.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return i.glossiness.value},set:function(e){i.glossiness.value=e}},glossinessMap:{get:function(){return i.glossinessMap.value},set:function(e){i.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class I{constructor(){this.name=h.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return T}extendParams(e,t,r){const o=t.extensions[this.name];e.color=new n.Color(1,1,1),e.opacity=1;const s=[];if(Array.isArray(o.diffuseFactor)){const t=o.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==o.diffuseTexture&&s.push(r.assignTexture(e,"map",o.diffuseTexture)),e.emissive=new n.Color(0,0,0),e.glossiness=void 0!==o.glossinessFactor?o.glossinessFactor:1,e.specular=new n.Color(1,1,1),Array.isArray(o.specularFactor)&&e.specular.fromArray(o.specularFactor),void 0!==o.specularGlossinessTexture){const t=o.specularGlossinessTexture;s.push(r.assignTexture(e,"glossinessMap",t)),s.push(r.assignTexture(e,"specularMap",t))}return Promise.all(s)}createMaterial(e){const t=new T(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=n.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class E{constructor(){this.name=h.KHR_MESH_QUANTIZATION}}class D extends n.Interpolant{constructor(e,t,r,n){super(e,t,r,n)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,o=e*n*3+n;for(let s=0;s!==n;s++)t[s]=r[o+s];return t}}D.prototype.beforeStart_=D.prototype.copySampleValue_,D.prototype.afterEnd_=D.prototype.copySampleValue_,D.prototype.interpolate_=function(e,t,r,n){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,i=2*a,l=3*a,c=n-t,u=(r-t)/c,h=u*u,d=h*u,f=e*l,p=f-l,A=-2*d+3*h,B=d-h,g=1-A,m=B-h+u;for(let C=0;C!==a;C++){const e=s[p+C+a],t=s[p+C+i]*c,r=s[f+C+a],n=s[f+C]*c;o[C]=g*e+m*t+A*r+B*n}return o};const U=0,R=1,k=2,w=3,_=4,H=5,P=6,L={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},O={9728:n.NearestFilter,9729:n.LinearFilter,9984:n.NearestMipmapNearestFilter,9985:n.LinearMipmapNearestFilter,9986:n.NearestMipmapLinearFilter,9987:n.LinearMipmapLinearFilter},J={33071:n.ClampToEdgeWrapping,33648:n.MirroredRepeatWrapping,10497:n.RepeatWrapping},K={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},N={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Q={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},j={CUBICSPLINE:void 0,LINEAR:n.InterpolateLinear,STEP:n.InterpolateDiscrete},X="OPAQUE",W="MASK",V="BLEND";function Y(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function Z(e,t,r){for(const n in r.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=r.extensions[n])}function q(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function z(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let r=0,n=t.weights.length;r<n;r++)e.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){const r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(let t=0,n=r.length;t<n;t++)e.morphTargetDictionary[r[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function $(e){const t=e.extensions&&e.extensions[h.KHR_DRACO_MESH_COMPRESSION];let r;return r=t?"draco:"+t.bufferView+":"+t.indices+":"+ee(t.attributes):e.indices+":"+ee(e.attributes)+":"+e.mode,r}function ee(e){let t="";const r=Object.keys(e).sort();for(let n=0,o=r.length;n<o;n++)t+=r[n]+":"+e[r[n]]+";";return t}function te(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class re{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new u,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new n.ImageBitmapLoader(this.options.manager):this.textureLoader=new n.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new n.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,n=this.json,o=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])})).then((function(t){const s={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:r,userData:{}};Z(o,s,n),q(s,n),Promise.all(r._invokeAll((function(e){return e.afterRoot&&e.afterRoot(s)}))).then((function(){e(s)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let n=0,o=t.length;n<o;n++){const r=t[n].joints;for(let t=0,n=r.length;t<n;t++)e[r[t]].isBone=!0}for(let n=0,o=e.length;n<o;n++){const t=e[n];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(r[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const n=r.clone();return n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const n=e(t[r]);if(n)return n}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let n=0;n<t.length;n++){const o=e(t[n]);o&&r.push(o)}return r}getDependency(e,t){const r=e+":"+t;let n=this.cache.get(r);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this.loadNode(t);break;case"mesh":n=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":n=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":n=this.loadSkin(t);break;case"animation":n=this.loadAnimation(t);break;case"camera":n=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map((function(t,n){return r.getDependency(e,n)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[h.KHR_BINARY_GLTF].body);const n=this.options;return new Promise((function(e,o){r.load(Y(t.uri,n.path),e,void 0,(function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const r=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+r)}))}loadAccessor(e){const t=this,r=this.json,o=this.json.accessors[e];if(void 0===o.bufferView&&void 0===o.sparse)return Promise.resolve(null);const s=[];return void 0!==o.bufferView?s.push(this.getDependency("bufferView",o.bufferView)):s.push(null),void 0!==o.sparse&&(s.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",o.sparse.values.bufferView))),Promise.all(s).then((function(e){const s=e[0],a=K[o.type],i=L[o.componentType],l=i.BYTES_PER_ELEMENT,c=l*a,u=o.byteOffset||0,h=void 0!==o.bufferView?r.bufferViews[o.bufferView].byteStride:void 0,d=!0===o.normalized;let f,p;if(h&&h!==c){const e=Math.floor(u/h),r="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+e+":"+o.count;let c=t.cache.get(r);c||(f=new i(s,e*h,o.count*h/l),c=new n.InterleavedBuffer(f,h/l),t.cache.add(r,c)),p=new n.InterleavedBufferAttribute(c,a,u%h/l,d)}else f=null===s?new i(o.count*a):new i(s,u,o.count*a),p=new n.BufferAttribute(f,a,d);if(void 0!==o.sparse){const t=K.SCALAR,r=L[o.sparse.indices.componentType],l=o.sparse.indices.byteOffset||0,c=o.sparse.values.byteOffset||0,u=new r(e[1],l,o.sparse.count*t),h=new i(e[2],c,o.sparse.count*a);null!==s&&(p=new n.BufferAttribute(p.array.slice(),p.itemSize,p.normalized));for(let e=0,n=u.length;e<n;e++){const t=u[e];if(p.setX(t,h[e*a]),a>=2&&p.setY(t,h[e*a+1]),a>=3&&p.setZ(t,h[e*a+2]),a>=4&&p.setW(t,h[e*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p}))}loadTexture(e){const t=this.json,r=this.options,n=t.textures[e],o=t.images[n.source];let s=this.textureLoader;if(o.uri){const e=r.manager.getHandler(o.uri);null!==e&&(s=e)}return this.loadTextureImage(e,o,s)}loadTextureImage(e,t,r){const o=this,s=this.json,a=this.options,i=s.textures[e],l=(t.uri||t.bufferView)+":"+i.sampler;if(this.textureCache[l])return this.textureCache[l];const c=self.URL||self.webkitURL;let u=t.uri||"",h=!1,d=!0;const f=u.search(/\.jpe?g($|\?)/i)>0||0===u.search(/^data\:image\/jpeg/);if(("image/jpeg"===t.mimeType||f)&&(d=!1),void 0!==t.bufferView)u=o.getDependency("bufferView",t.bufferView).then((function(e){if("image/png"===t.mimeType){const t=new DataView(e,25,1).getUint8(0,!1);d=6===t||4===t||3===t}h=!0;const r=new Blob([e],{type:t.mimeType});return u=c.createObjectURL(r),u}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const p=Promise.resolve(u).then((function(e){return new Promise((function(t,o){let s=t;!0===r.isImageBitmapLoader&&(s=function(e){const r=new n.Texture(e);r.needsUpdate=!0,t(r)}),r.load(Y(e,a.path),s,void 0,o)}))})).then((function(t){!0===h&&c.revokeObjectURL(u),t.flipY=!1,i.name&&(t.name=i.name),d||(t.format=n.RGBFormat);const r=(s.samplers||{})[i.sampler]||{};return t.magFilter=O[r.magFilter]||n.LinearFilter,t.minFilter=O[r.minFilter]||n.LinearMipmapLinearFilter,t.wrapS=J[r.wrapS]||n.RepeatWrapping,t.wrapT=J[r.wrapT]||n.RepeatWrapping,o.associations.set(t,{type:"textures",index:e}),t})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",u),null}));return this.textureCache[l]=p,p}assignTexture(e,t,r){const n=this;return this.getDependency("texture",r.index).then((function(o){if(void 0===r.texCoord||0==r.texCoord||"aoMap"===t&&1==r.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),n.extensions[h.KHR_TEXTURE_TRANSFORM]){const e=void 0!==r.extensions?r.extensions[h.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=n.associations.get(o);o=n.extensions[h.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),n.associations.set(o,t)}}return e[t]=o,o}))}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const o=void 0!==t.attributes.tangent,s=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+r.uuid;let t=this.cache.get(e);t||(t=new n.PointsMaterial,n.Material.prototype.copy.call(t,r),t.color.copy(r.color),t.map=r.map,t.sizeAttenuation=!1,this.cache.add(e,t)),r=t}else if(e.isLine){const e="LineBasicMaterial:"+r.uuid;let t=this.cache.get(e);t||(t=new n.LineBasicMaterial,n.Material.prototype.copy.call(t,r),t.color.copy(r.color),this.cache.add(e,t)),r=t}if(o||s||a){let e="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),o&&(e+="vertex-tangents:"),s&&(e+="vertex-colors:"),a&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=r.clone(),s&&(t.vertexColors=!0),a&&(t.flatShading=!0),o&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(r))),r=t}r.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return n.MeshStandardMaterial}loadMaterial(e){const t=this,r=this.json,o=this.extensions,s=r.materials[e];let a;const i={},l=s.extensions||{},c=[];if(l[h.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=o[h.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];a=e.getMaterialType(),c.push(e.extendParams(i,s,t))}else if(l[h.KHR_MATERIALS_UNLIT]){const e=o[h.KHR_MATERIALS_UNLIT];a=e.getMaterialType(),c.push(e.extendParams(i,s,t))}else{const r=s.pbrMetallicRoughness||{};if(i.color=new n.Color(1,1,1),i.opacity=1,Array.isArray(r.baseColorFactor)){const e=r.baseColorFactor;i.color.fromArray(e),i.opacity=e[3]}void 0!==r.baseColorTexture&&c.push(t.assignTexture(i,"map",r.baseColorTexture)),i.metalness=void 0!==r.metallicFactor?r.metallicFactor:1,i.roughness=void 0!==r.roughnessFactor?r.roughnessFactor:1,void 0!==r.metallicRoughnessTexture&&(c.push(t.assignTexture(i,"metalnessMap",r.metallicRoughnessTexture)),c.push(t.assignTexture(i,"roughnessMap",r.metallicRoughnessTexture))),a=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),c.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,i)}))))}!0===s.doubleSided&&(i.side=n.DoubleSide);const u=s.alphaMode||X;return u===V?(i.transparent=!0,i.depthWrite=!1):(i.transparent=!1,u===W&&(i.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&a!==n.MeshBasicMaterial&&(c.push(t.assignTexture(i,"normalMap",s.normalTexture)),i.normalScale=new n.Vector2(1,-1),void 0!==s.normalTexture.scale&&i.normalScale.set(s.normalTexture.scale,-s.normalTexture.scale)),void 0!==s.occlusionTexture&&a!==n.MeshBasicMaterial&&(c.push(t.assignTexture(i,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(i.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&a!==n.MeshBasicMaterial&&(i.emissive=(new n.Color).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&a!==n.MeshBasicMaterial&&c.push(t.assignTexture(i,"emissiveMap",s.emissiveTexture)),Promise.all(c).then((function(){let r;return r=a===T?o[h.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(i):new a(i),s.name&&(r.name=s.name),r.map&&(r.map.encoding=n.sRGBEncoding),r.emissiveMap&&(r.emissiveMap.encoding=n.sRGBEncoding),q(r,s),t.associations.set(r,{type:"materials",index:e}),s.extensions&&Z(o,r,s),r}))}createUniqueName(e){const t=n.PropertyBinding.sanitizeNodeName(e||"");let r=t;for(let n=1;this.nodeNamesUsed[r];++n)r=t+"_"+n;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,o=this.primitiveCache;function s(e){return r[h.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(r){return oe(r,e,t)}))}const a=[];for(let i=0,l=e.length;i<l;i++){const r=e[i],l=$(r),c=o[l];if(c)a.push(c.promise);else{let e;e=r.extensions&&r.extensions[h.KHR_DRACO_MESH_COMPRESSION]?s(r):oe(new n.BufferGeometry,r,t),o[l]={primitive:r,promise:e},a.push(e)}}return Promise.all(a)}loadMesh(e){const t=this,r=this.json,o=this.extensions,s=r.meshes[e],a=s.primitives,i=[];for(let c=0,u=a.length;c<u;c++){const e=void 0===a[c].material?(void 0===(l=this.cache).DefaultMaterial&&(l.DefaultMaterial=new n.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:n.FrontSide})),l.DefaultMaterial):this.getDependency("material",a[c].material);i.push(e)}var l;return i.push(t.loadGeometries(a)),Promise.all(i).then((function(r){const i=r.slice(0,r.length-1),l=r[r.length-1],c=[];for(let h=0,d=l.length;h<d;h++){const r=l[h],u=a[h];let d;const f=i[h];if(u.mode===_||u.mode===H||u.mode===P||void 0===u.mode)d=!0===s.isSkinnedMesh?new n.SkinnedMesh(r,f):new n.Mesh(r,f),!0!==d.isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),u.mode===H?d.geometry=se(d.geometry,n.TriangleStripDrawMode):u.mode===P&&(d.geometry=se(d.geometry,n.TriangleFanDrawMode));else if(u.mode===R)d=new n.LineSegments(r,f);else if(u.mode===w)d=new n.Line(r,f);else if(u.mode===k)d=new n.LineLoop(r,f);else{if(u.mode!==U)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);d=new n.Points(r,f)}Object.keys(d.geometry.morphAttributes).length>0&&z(d,s),d.name=t.createUniqueName(s.name||"mesh_"+e),q(d,s),u.extensions&&Z(o,d,u),t.assignFinalMaterial(d),c.push(d)}if(1===c.length)return c[0];const u=new n.Group;for(let e=0,t=c.length;e<t;e++)u.add(c[e]);return u}))}loadCamera(e){let t;const r=this.json.cameras[e],o=r[r.type];if(o)return"perspective"===r.type?t=new n.PerspectiveCamera(n.MathUtils.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):"orthographic"===r.type&&(t=new n.OrthographicCamera(-o.xmag,o.xmag,o.ymag,-o.ymag,o.znear,o.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),q(t,r),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],r={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return r.inverseBindMatrices=e,r}))}loadAnimation(e){const t=this.json.animations[e],r=[],o=[],s=[],a=[],i=[];for(let n=0,l=t.channels.length;n<l;n++){const e=t.channels[n],l=t.samplers[e.sampler],c=e.target,u=void 0!==c.node?c.node:c.id,h=void 0!==t.parameters?t.parameters[l.input]:l.input,d=void 0!==t.parameters?t.parameters[l.output]:l.output;r.push(this.getDependency("node",u)),o.push(this.getDependency("accessor",h)),s.push(this.getDependency("accessor",d)),a.push(l),i.push(c)}return Promise.all([Promise.all(r),Promise.all(o),Promise.all(s),Promise.all(a),Promise.all(i)]).then((function(r){const o=r[0],s=r[1],a=r[2],i=r[3],l=r[4],c=[];for(let e=0,t=o.length;e<t;e++){const t=o[e],r=s[e],u=a[e],h=i[e],d=l[e];if(void 0===t)continue;let f;switch(t.updateMatrix(),t.matrixAutoUpdate=!0,Q[d.path]){case Q.weights:f=n.NumberKeyframeTrack;break;case Q.rotation:f=n.QuaternionKeyframeTrack;break;case Q.position:case Q.scale:default:f=n.VectorKeyframeTrack}const p=t.name?t.name:t.uuid,A=void 0!==h.interpolation?j[h.interpolation]:n.InterpolateLinear,B=[];Q[d.path]===Q.weights?t.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&B.push(e.name?e.name:e.uuid)})):B.push(p);let g=u.array;if(u.normalized){const e=te(g.constructor),t=new Float32Array(g.length);for(let r=0,n=g.length;r<n;r++)t[r]=g[r]*e;g=t}for(let e=0,n=B.length;e<n;e++){const t=new f(B[e]+"."+Q[d.path],r.array,g,A);"CUBICSPLINE"===h.interpolation&&(t.createInterpolant=function(e){return new D(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(t)}}const u=t.name?t.name:"animation_"+e;return new n.AnimationClip(u,void 0,c)}))}createNodeMesh(e){const t=this.json,r=this,n=t.nodes[e];return void 0===n.mesh?null:r.getDependency("mesh",n.mesh).then((function(e){const t=r._getNodeRef(r.meshCache,n.mesh,e);return void 0!==n.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,r=n.weights.length;t<r;t++)e.morphTargetInfluences[t]=n.weights[t]})),t}))}loadNode(e){const t=this.json,r=this.extensions,o=this,s=t.nodes[e],a=s.name?o.createUniqueName(s.name):"";return function(){const t=[],r=o._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return r&&t.push(r),void 0!==s.camera&&t.push(o.getDependency("camera",s.camera).then((function(e){return o._getNodeRef(o.cameraCache,s.camera,e)}))),o._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){let i;if(i=!0===s.isBone?new n.Bone:t.length>1?new n.Group:1===t.length?t[0]:new n.Object3D,i!==t[0])for(let e=0,r=t.length;e<r;e++)i.add(t[e]);if(s.name&&(i.userData.name=s.name,i.name=a),q(i,s),s.extensions&&Z(r,i,s),void 0!==s.matrix){const e=new n.Matrix4;e.fromArray(s.matrix),i.applyMatrix4(e)}else void 0!==s.translation&&i.position.fromArray(s.translation),void 0!==s.rotation&&i.quaternion.fromArray(s.rotation),void 0!==s.scale&&i.scale.fromArray(s.scale);return o.associations.set(i,{type:"nodes",index:e}),i}))}loadScene(e){const t=this.json,r=this.extensions,o=this.json.scenes[e],s=this,a=new n.Group;o.name&&(a.name=s.createUniqueName(o.name)),q(a,o),o.extensions&&Z(r,a,o);const i=o.nodes||[],l=[];for(let n=0,c=i.length;n<c;n++)l.push(ne(i[n],a,t,s));return Promise.all(l).then((function(){return a}))}}function ne(e,t,r,o){const s=r.nodes[e];return o.getDependency("node",e).then((function(e){if(void 0===s.skin)return e;let t;return o.getDependency("skin",s.skin).then((function(e){t=e;const r=[];for(let n=0,s=t.joints.length;n<s;n++)r.push(o.getDependency("node",t.joints[n]));return Promise.all(r)})).then((function(r){return e.traverse((function(e){if(!e.isMesh)return;const o=[],s=[];for(let a=0,i=r.length;a<i;a++){const e=r[a];if(e){o.push(e);const r=new n.Matrix4;void 0!==t.inverseBindMatrices&&r.fromArray(t.inverseBindMatrices.array,16*a),s.push(r)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}e.bind(new n.Skeleton(o,s),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const n=[];if(s.children){const t=s.children;for(let s=0,a=t.length;s<a;s++){const a=t[s];n.push(ne(a,e,r,o))}}return Promise.all(n)}))}function oe(e,t,r){const o=t.attributes,s=[];function a(t,n){return r.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}for(const n in o){const t=N[n]||n.toLowerCase();t in e.attributes||s.push(a(o[n],t))}if(void 0!==t.indices&&!e.index){const n=r.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));s.push(n)}return q(e,t),function(e,t,r){const o=t.attributes,s=new n.Box3;if(void 0===o.POSITION)return;{const e=r.json.accessors[o.POSITION],t=e.min,a=e.max;if(void 0===t||void 0===a)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(s.set(new n.Vector3(t[0],t[1],t[2]),new n.Vector3(a[0],a[1],a[2])),e.normalized){const t=te(L[e.componentType]);s.min.multiplyScalar(t),s.max.multiplyScalar(t)}}const a=t.targets;if(void 0!==a){const e=new n.Vector3,t=new n.Vector3;for(let n=0,o=a.length;n<o;n++){const o=a[n];if(void 0!==o.POSITION){const n=r.json.accessors[o.POSITION],s=n.min,a=n.max;if(void 0!==s&&void 0!==a){if(t.setX(Math.max(Math.abs(s[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(s[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(s[2]),Math.abs(a[2]))),n.normalized){const e=te(L[n.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(e)}e.boundingBox=s;const i=new n.Sphere;s.getCenter(i.center),i.radius=s.min.distanceTo(s.max)/2,e.boundingSphere=i}(e,t,r),Promise.all(s).then((function(){return void 0!==t.targets?function(e,t,r){let n=!1,o=!1;for(let i=0,l=t.length;i<l;i++){const e=t[i];if(void 0!==e.POSITION&&(n=!0),void 0!==e.NORMAL&&(o=!0),n&&o)break}if(!n&&!o)return Promise.resolve(e);const s=[],a=[];for(let i=0,l=t.length;i<l;i++){const l=t[i];if(n){const t=void 0!==l.POSITION?r.getDependency("accessor",l.POSITION):e.attributes.position;s.push(t)}if(o){const t=void 0!==l.NORMAL?r.getDependency("accessor",l.NORMAL):e.attributes.normal;a.push(t)}}return Promise.all([Promise.all(s),Promise.all(a)]).then((function(t){const r=t[0],s=t[1];return n&&(e.morphAttributes.position=r),o&&(e.morphAttributes.normal=s),e.morphTargetsRelative=!0,e}))}(e,t.targets,r):e}))}function se(e,t){let r=e.getIndex();if(null===r){const t=[],n=e.getAttribute("position");if(void 0===n)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<n.count;e++)t.push(e);e.setIndex(t),r=e.getIndex()}const o=r.count-2,s=[];if(t===n.TriangleFanDrawMode)for(let n=1;n<=o;n++)s.push(r.getX(0)),s.push(r.getX(n)),s.push(r.getX(n+1));else for(let n=0;n<o;n++)n%2===0?(s.push(r.getX(n)),s.push(r.getX(n+1)),s.push(r.getX(n+2))):(s.push(r.getX(n+2)),s.push(r.getX(n+1)),s.push(r.getX(n)));s.length/3!==o&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=e.clone();return a.setIndex(s),a}var ae=r(1823);let ie=null;function le(e,t,r){return n=>{r&&r(n),e&&(ie||(ie=new s),ie.setDecoderPath("string"===typeof e?e:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),n.setDRACOLoader(ie)),t&&n.setMeshoptDecoder(l())}}function ce(e,t=!0,r=!0,n){return(0,ae.U2)(c,e,le(t,r,n))}ce.preload=(e,t=!0,r=!0,n)=>ae.U2.preload(c,e,le(t,r,n)),ce.clear=e=>ae.U2.clear(c,e)},2869:function(e,t,r){r.d(t,{c0:function(){return Q}});const n={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function o(e,t,r){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*r):e*t*r/(t+r*e)}function s(e,t,r,n=.15){return 0===n?function(e,t,r){return Math.max(t,Math.min(e,r))}(e,t,r):e<t?-o(t-e,r-t,n)+t:e>r?+o(e-r,r-t,n)+r:e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const c={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function u(e){return e?e[0].toUpperCase()+e.slice(1):""}function h(e){return"touches"in e}function d(e){return h(e)?function(e){return"touchend"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function f(e){return function(e){return Array.from(e.touches).filter((t=>{var r,n;return t.target===e.currentTarget||(null===(r=e.currentTarget)||void 0===r||null===(n=r.contains)||void 0===n?void 0:n.call(r,t.target))}))}(e).map((e=>e.identifier))}function p(e){const t=d(e);return h(e)?t.identifier:t.pointerId}function A(e){const t=d(e);return[t.clientX,t.clientY]}function B(e,...t){return"function"===typeof e?e(...t):e}function g(){}function m(...e){return 0===e.length?g:1===e.length?e[0]:function(){let t;for(const r of e)t=r.apply(this,arguments)||t;return t}}function C(e,t){return Object.assign({},t,e||{})}class v{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:n}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=n,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?B(r.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:o}=this;t.args=this.args;let a=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,o.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,o.locked=!!document.pointerLockElement,Object.assign(o,function(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:r,altKey:n,metaKey:o,ctrlKey:s}=e;Object.assign(t,{shiftKey:r,altKey:n,metaKey:o,ctrlKey:s})}return t}(e)),o.down=o.pressed=o.buttons%2===1||o.touches>0,a=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const e=t._delta.map(Math.abs);n.addTo(t._distance,e)}const[i,l]=t._movement,[c,u]=r.threshold,{_step:h,values:d}=t;if(r.hasCustomTransform?(!1===h[0]&&(h[0]=Math.abs(i)>=c&&d[0]),!1===h[1]&&(h[1]=Math.abs(l)>=u&&d[1])):(!1===h[0]&&(h[0]=Math.abs(i)>=c&&Math.sign(i)*c),!1===h[1]&&(h[1]=Math.abs(l)>=u&&Math.sign(l)*u)),t.intentional=!1!==h[0]||!1!==h[1],!t.intentional)return;const f=[0,0];if(r.hasCustomTransform){const[e,t]=d;f[0]=!1!==h[0]?e-h[0]:0,f[1]=!1!==h[1]?t-h[1]:0}else f[0]=!1!==h[0]?i-h[0]:0,f[1]=!1!==h[1]?l-h[1]:0;if(this.intent&&this.intent(f),(t._active&&!t._blocked||t.active)&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=o[this.ingKey]=t._active,e)){t.first&&("bounds"in r&&(t._bounds=B(r.bounds,t)),this.setup&&this.setup()),t.movement=f;const e=t.offset;if(this.computeOffset(),!t.last||a>32){t.delta=n.sub(t.offset,e);const r=t.delta.map(Math.abs);n.addTo(t.distance,r),t.direction=t.delta.map(Math.sign),!t.first&&a>0&&(t.velocity=[r[0]/a,r[1]/a])}}const p=t._active&&r.rubberband||[0,0];t.offset=function(e,[t,r],[n,o]){const[[a,i],[l,c]]=e;return[s(t,a,i,n),s(r,l,c,o)]}(t._bounds,t.offset,p),this.computeMovement()}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const n=this.handler(l(l(l({},t),e),{},{[this.aliasKey]:e.values}));void 0!==n&&(e.memo=n)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class y extends v{constructor(...e){super(...e),a(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=n.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=n.sub(this.state.offset,this.state.lastOffset)}intent(e){this.state.axis=this.state.axis||function([e,t]){const r=Math.abs(e)-Math.abs(t);return r>0?"x":r<0?"y":void 0}(e),this.state._blocked=(this.config.lockDirection||!!this.config.axis)&&!this.state.axis||!!this.config.axis&&this.config.axis!==this.state.axis,this.state._blocked||(this.config.axis||this.config.lockDirection)&&function(e,t){switch(t){case"x":e[1]=0;break;case"y":e[0]=0}}(e,this.state.axis)}}const b=e=>e,M={enabled:(e=!0)=>e,preventDefault:(e=!1)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return n.toVector(e)}},from:e=>"function"===typeof e?e:null!=e?n.toVector(e):void 0,transform(e,t,r){const n=e||r.shared.transform;return this.hasCustomTransform=!!n,n||b},threshold:e=>n.toVector(e,0)};const F=l(l({},M),{},{axis(e,t,{axis:r}){if(this.lockDirection="lock"===r,!this.lockDirection)return r},bounds(e={}){if("function"===typeof e)return t=>F.bounds(e(t));if("current"in e)return()=>e.current;if("function"===typeof HTMLElement&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:r=1/0,top:n=-1/0,bottom:o=1/0}=e;return[[t,r],[n,o]]}}),x={ArrowRight:(e=1)=>[10*e,0],ArrowLeft:(e=1)=>[-10*e,0],ArrowUp:(e=1)=>[0,-10*e],ArrowDown:(e=1)=>[0,10*e]};const S="undefined"!==typeof window&&window.document&&window.document.createElement;function G(){return S&&"ontouchstart"in window}const T={isBrowser:S,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:G(),touchscreen:G()||S&&window.navigator.maxTouchPoints>1,pointer:S&&"onpointerdown"in window,pointerLock:S&&"exitPointerLock"in window.document},I=l(l({},F),{},{pointerLock(e,t,{pointer:{lock:r=!1,touch:n=!1}={}}){return this.useTouch=T.touch&&n,T.pointerLock&&r},device(e,t){return this.useTouch?"touch":this.pointerLock?"mouse":T.pointer?"pointer":T.touch?"touch":"mouse"},preventScroll(e=!1,t,{preventScrollAxis:r="y"}){return r&&(this.preventScrollAxis=r),!!T.touchscreen&&("number"===typeof e?e:!!e&&250)},pointerCapture(e,t,{pointer:{capture:r=!0,buttons:n=1}={}}){return this.pointerButtons=n,!this.pointerLock&&"pointer"===this.device&&r},threshold(e,t,{filterTaps:r=!1,axis:o}){const s=n.toVector(e,r?3:o?1:0);return this.filterTaps=r,s},swipe({velocity:e=.5,distance:t=50,duration:r=250}={}){return{velocity:this.transform(n.toVector(e)),distance:this.transform(n.toVector(t)),duration:r}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}}});l(l({},M),{},{useTouch:(e,t,{pointer:{touch:r=!1}={}})=>T.touch&&r,device(e,t,r){if(r.shared.target&&!T.touch&&T.gesture)return"gesture";if(this.useTouch)return"touch";if(T.touchscreen){if(T.pointer)return"pointer";if(T.touch)return"touch"}},bounds(e,t,{scaleBounds:r={},angleBounds:n={}}){const o=e=>{const t=C(B(r,e),{min:-1/0,max:1/0});return[t.min,t.max]},s=e=>{const t=C(B(n,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!==typeof r&&"function"!==typeof n?[o(),s()]:e=>[o(e),s(e)]},threshold(e,t,r){this.lockDirection="lock"===r.axis;return n.toVector(e,this.lockDirection?[.1,3]:0)}});l(l({},F),{},{mouseOnly:(e=!0)=>e});l(l({},F),{},{mouseOnly:(e=!0)=>e});const E=new Map,D=new Map;const U={key:"drag",engine:class extends y{constructor(...e){super(...e),a(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),n={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=F.bounds(n)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout((()=>{this.compute(),this.emit()}),0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;(null==e.buttons||(Array.isArray(t.pointerButtons)?t.pointerButtons.includes(e.buttons):-1===t.pointerButtons||t.pointerButtons===e.buttons))&&(this.ctrl.setEventIds(e),t.pointerCapture&&e.target.setPointerCapture(e.pointerId),r._pointerActive||(this.start(e),this.setupPointer(e),r._pointerId=p(e),r._pointerActive=!0,this.computeValues(A(e)),this.computeInitial(),t.preventScroll?this.setupScrollPrevention(e):t.delay>0?this.setupDelayTrigger(e):this.startPointerDrag(e)))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;if(t.type===e.type&&e.timeStamp===t.timeStamp)return;const o=p(e);if(t._pointerId&&o!==t._pointerId)return;const s=A(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=n.sub(s,t._values),this.computeValues(s)),n.addTo(t._movement,t._delta),this.compute(e),t._delayed?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):r.preventScroll&&!t._preventScroll?t.axis?t.axis===r.preventScrollAxis||"xy"===r.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(a){0}const t=this.state,r=this.config;if(!t._pointerActive)return;const n=p(e);if(t._pointerId&&n!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[o,s]=t._distance;if(t.tap=o<=3&&s<=3,t.tap&&r.filterTaps)t._force=!0;else{const[e,n]=t.direction,[o,s]=t.velocity,[a,i]=t.movement,[l,c]=r.swipe.velocity,[u,h]=r.swipe.distance,d=r.swipe.duration;t.elapsedTime<d&&(Math.abs(o)>l&&Math.abs(a)>u&&(t.swipe[0]=e),Math.abs(s)>c&&Math.abs(i)>h&&(t.swipe[1]=n))}this.emit()}pointerClick(e){this.state.tap||(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config;let r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){!function(e){"persist"in e&&"function"===typeof e.persist&&e.persist()}(e),this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1}),this.eventStore.add(this.sharedConfig.window,"touch","end",this.clean.bind(this),{passive:!1}),this.eventStore.add(this.sharedConfig.window,"touch","cancel",this.clean.bind(this),{passive:!1}),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScroll,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",this.startPointerDrag.bind(this),this.config.delay,e)}keyDown(e){const t=x[e.key];if(t){const r=this.state,o=e.shiftKey?10:e.altKey?.1:1;r._delta=t(o),this.start(e),r._keyboardActive=!0,n.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in x&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this))),e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this)),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0})}},resolver:I};var R=r(7378);function k(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const w={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=(T.isBrowser?window:void 0))=>e,eventOptions:({passive:e=!0,capture:t=!1}={})=>({passive:e,capture:t}),transform:e=>e},_=["target","eventOptions","window","enabled","transform"];function H(e={},t){const r={};for(const[n,o]of Object.entries(t))switch(typeof o){case"function":r[n]=o.call(r,e[n],n,e);break;case"object":r[n]=H(e[n],o);break;case"boolean":o&&(r[n]=e[n])}return r}class P{constructor(e){a(this,"_listeners",[]),this._ctrl=e}add(e,t,r,n,o){const s=function(e,t=""){const r=c[e];return e+(r&&r[t]||t)}(t,r),a=l(l({},this._ctrl.config.shared.eventOptions),o);e.addEventListener(s,n,a),this._listeners.push((()=>e.removeEventListener(s,n,a)))}clean(){this._listeners.forEach((e=>e())),this._listeners=[]}}class L{constructor(){a(this,"_timeouts",new Map)}add(e,t,r=140,...n){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...n))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach((e=>{window.clearTimeout(e)})),this._timeouts.clear()}}class O{constructor(e){a(this,"gestures",new Set),a(this,"_targetEventStore",new P(this)),a(this,"gestureEventStores",{}),a(this,"gestureTimeoutStores",{}),a(this,"handlers",{}),a(this,"config",{}),a(this,"pointerIds",new Set),a(this,"touchIds",new Set),a(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&J(e,"drag");t.wheel&&J(e,"wheel");t.scroll&&J(e,"scroll");t.move&&J(e,"move");t.pinch&&J(e,"pinch");t.hover&&J(e,"hover")}(this,e)}setEventIds(e){h(e)?this.touchIds=new Set(f(e)):"pointerId"in e&&("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId))}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t){const r=e,{target:n,eventOptions:o,window:s,enabled:a,transform:i}=r,c=k(r,_),u={shared:H({target:n,eventOptions:o,window:s,enabled:a,transform:i},w)};if(t){const e=D.get(t);u[t]=H(l({shared:u.shared},c),e)}else for(const h in c){const e=D.get(h);e&&(u[h]=H(l({shared:u.shared},c[h]),e))}return u}(e,t)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r=t.eventOptions,n={};let o;if(t.target&&(o=t.target(),!o))return;const s=K(n,r,!!o);if(t.enabled){for(const t of this.gestures)if(this.config[t].enabled){new(E.get(t))(this,e,t).bind(s)}for(const t in this.nativeHandlers)s(t,"",(r=>this.nativeHandlers[t](l(l({},this.state.shared),{},{event:r,args:e}))),void 0,!0)}for(const a in n)n[a]=m(...n[a]);if(!o)return n;for(const a in n){let e=a.substr(2).toLowerCase();const t=!!~e.indexOf("capture"),r=!!~e.indexOf("passive");(t||r)&&(e=e.replace(/capture|passive/g,"")),this._targetEventStore.add(o,e,"",n[a],{capture:t,passive:r})}}}function J(e,t){e.gestures.add(t),e.gestureEventStores[t]=new P(e),e.gestureTimeoutStores[t]=new L}const K=(e,t,r)=>(n,o,s,a={},i=!1)=>{var l,h;const d=null!==(l=a.capture)&&void 0!==l?l:t.capture,f=null!==(h=a.passive)&&void 0!==h?h:t.passive;let p=i?n:function(e,t="",r=!1){const n=c[e],o=n&&n[t]||t;return"on"+u(e)+u(o)+(r?"Capture":"")}(n,o,d);r&&f&&(p+="Passive"),e[p]=e[p]||[],e[p].push(s)};function N(e,t={},r,n){const o=R.useMemo((()=>new O(e)),[]);if(o.applyHandlers(e,n),o.applyConfig(t,r),R.useEffect(o.effect.bind(o)),R.useEffect((()=>o.clean.bind(o)),[]),void 0===t.target)return o.bind.bind(o)}function Q(e,t={}){var r;return r=U,E.set(r.key,r.engine),D.set(r.key,r.resolver),N({drag:e},t,"drag")}},8620:function(e,t,r){r.d(t,{u:function(){return o}});var n=r(2212);class o extends n.Loader{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,t,r,o){const s=this,a=new n.FileLoader(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,(function(r){try{t(s.parse(r))}catch(n){o?o(n):console.error(n),s.manager.itemError(e)}}),r,o)}parse(e){const t=this;function r(e,t,r,n,s,a,i,l){if(0==t||0==r)return void e.lineTo(l.x,l.y);n=n*Math.PI/180,t=Math.abs(t),r=Math.abs(r);const c=(i.x-l.x)/2,u=(i.y-l.y)/2,h=Math.cos(n)*c+Math.sin(n)*u,d=-Math.sin(n)*c+Math.cos(n)*u;let f=t*t,p=r*r;const A=h*h,B=d*d,g=A/f+B/p;if(g>1){const e=Math.sqrt(g);f=(t*=e)*t,p=(r*=e)*r}const m=f*B+p*A,C=(f*p-m)/m;let v=Math.sqrt(Math.max(0,C));s===a&&(v=-v);const y=v*t*d/r,b=-v*r*h/t,M=Math.cos(n)*y-Math.sin(n)*b+(i.x+l.x)/2,F=Math.sin(n)*y+Math.cos(n)*b+(i.y+l.y)/2,x=o(1,0,(h-y)/t,(d-b)/r),S=o((h-y)/t,(d-b)/r,(-h-y)/t,(-d-b)/r)%(2*Math.PI);e.currentPath.absellipse(M,F,t,r,x,x+S,0===a,n)}function o(e,t,r,n){const o=e*r+t*n,s=Math.sqrt(e*e+t*t)*Math.sqrt(r*r+n*n);let a=Math.acos(Math.max(-1,Math.min(1,o/s)));return e*n-t*r<0&&(a=-a),a}function s(e,t){t=Object.assign({},t);let r={};if(e.hasAttribute("class")){const t=e.getAttribute("class").split(/\s/).filter(Boolean).map((e=>e.trim()));for(let e=0;e<t.length;e++)r=Object.assign(r,p["."+t[e]])}function n(n,o,s){void 0===s&&(s=function(e){return e.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),e}),e.hasAttribute(n)&&(t[o]=s(e.getAttribute(n))),r[n]&&(t[o]=s(r[n])),e.style&&""!==e.style[n]&&(t[o]=s(e.style[n]))}function o(e){return Math.max(0,Math.min(1,u(e)))}function s(e){return Math.max(0,u(e))}return e.hasAttribute("id")&&(r=Object.assign(r,p["#"+e.getAttribute("id")])),n("fill","fill"),n("fill-opacity","fillOpacity",o),n("opacity","opacity",o),n("stroke","stroke"),n("stroke-opacity","strokeOpacity",o),n("stroke-width","strokeWidth",s),n("stroke-linejoin","strokeLineJoin"),n("stroke-linecap","strokeLineCap"),n("stroke-miterlimit","strokeMiterLimit",s),n("visibility","visibility"),t}function a(e,t){return e-(t-e)}function i(e,t,r){if("string"!==typeof e)throw new TypeError("Invalid input: "+typeof e);const n={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/};let o=0,s=!0,a="",i="";const l=[];function c(e,t,r){const n=new SyntaxError('Unexpected character "'+e+'" at index '+t+".");throw n.partial=r,n}function u(){""!==a&&(""===i?l.push(Number(a)):l.push(Number(a)*Math.pow(10,Number(i)))),a="",i=""}let h;const d=e.length;for(let f=0;f<d;f++)if(h=e[f],Array.isArray(t)&&t.includes(l.length%r)&&n.FLAGS.test(h))o=1,a=h,u();else{if(0===o){if(n.WHITESPACE.test(h))continue;if(n.DIGIT.test(h)||n.SIGN.test(h)){o=1,a=h;continue}if(n.POINT.test(h)){o=2,a=h;continue}n.COMMA.test(h)&&(s&&c(h,f,l),s=!0)}if(1===o){if(n.DIGIT.test(h)){a+=h;continue}if(n.POINT.test(h)){a+=h,o=2;continue}if(n.EXP.test(h)){o=3;continue}n.SIGN.test(h)&&1===a.length&&n.SIGN.test(a[0])&&c(h,f,l)}if(2===o){if(n.DIGIT.test(h)){a+=h;continue}if(n.EXP.test(h)){o=3;continue}n.POINT.test(h)&&"."===a[a.length-1]&&c(h,f,l)}if(3===o){if(n.DIGIT.test(h)){i+=h;continue}if(n.SIGN.test(h)){if(""===i){i+=h;continue}1===i.length&&n.SIGN.test(i)&&c(h,f,l)}}n.WHITESPACE.test(h)?(u(),o=0,s=!1):n.COMMA.test(h)?(u(),o=0,s=!0):n.SIGN.test(h)?(u(),o=1,a=h):n.POINT.test(h)?(u(),o=2,a=h):c(h,f,l)}return u(),l}const l=["mm","cm","in","pt","pc","px"],c={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function u(e){let r,n="px";if("string"===typeof e||e instanceof String)for(let t=0,o=l.length;t<o;t++){const r=l[t];if(e.endsWith(r)){n=r,e=e.substring(0,e.length-r.length);break}}return"px"===n&&"px"!==t.defaultUnit?r=c.in[t.defaultUnit]/t.defaultDPI:(r=c[n][t.defaultUnit],r<0&&(r=c[n].in*t.defaultDPI)),r*parseFloat(e)}function h(e){const t=e.elements;return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function d(e){const t=e.elements;return Math.sqrt(t[3]*t[3]+t[4]*t[4])}const f=[],p={},A=[],B=new n.Matrix3,g=new n.Matrix3,m=new n.Matrix3,C=new n.Matrix3,v=new n.Vector2,y=new n.Vector3,b=new n.Matrix3,M=(new DOMParser).parseFromString(e,"image/svg+xml");!function e(t,o){if(1!==t.nodeType)return;const l=function(e){if(!(e.hasAttribute("transform")||"use"===e.nodeName&&(e.hasAttribute("x")||e.hasAttribute("y"))))return null;const t=function(e){const t=new n.Matrix3,r=B;if("use"===e.nodeName&&(e.hasAttribute("x")||e.hasAttribute("y"))){const r=u(e.getAttribute("x")),n=u(e.getAttribute("y"));t.translate(r,n)}if(e.hasAttribute("transform")){const n=e.getAttribute("transform").split(")");for(let e=n.length-1;e>=0;e--){const o=n[e].trim();if(""===o)continue;const s=o.indexOf("("),a=o.length;if(s>0&&s<a){const e=o.substr(0,s),t=i(o.substr(s+1,a-s-1));switch(r.identity(),e){case"translate":if(t.length>=1){const e=t[0];let n=e;t.length>=2&&(n=t[1]),r.translate(e,n)}break;case"rotate":if(t.length>=1){let e=0,n=0,o=0;e=-t[0]*Math.PI/180,t.length>=3&&(n=t[1],o=t[2]),g.identity().translate(-n,-o),m.identity().rotate(e),C.multiplyMatrices(m,g),g.identity().translate(n,o),r.multiplyMatrices(g,C)}break;case"scale":if(t.length>=1){const e=t[0];let n=e;t.length>=2&&(n=t[1]),r.scale(e,n)}break;case"skewX":1===t.length&&r.set(1,Math.tan(t[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===t.length&&r.set(1,0,0,Math.tan(t[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===t.length&&r.set(t[0],t[2],t[4],t[1],t[3],t[5],0,0,1)}}t.premultiply(r)}}return t}(e);A.length>0&&t.premultiply(A[A.length-1]);return b.copy(t),A.push(t),t}(t);let c=!0,M=null;switch(t.nodeName){case"svg":break;case"style":!function(e){if(!e.sheet||!e.sheet.cssRules||!e.sheet.cssRules.length)return;for(let t=0;t<e.sheet.cssRules.length;t++){const r=e.sheet.cssRules[t];if(1!==r.type)continue;const n=r.selectorText.split(/,/gm).filter(Boolean).map((e=>e.trim()));for(let e=0;e<n.length;e++)p[n[e]]=Object.assign(p[n[e]]||{},r.style)}}(t);break;case"g":o=s(t,o);break;case"path":o=s(t,o),t.hasAttribute("d")&&(M=function(e){const t=new n.ShapePath,o=new n.Vector2,s=new n.Vector2,l=new n.Vector2;let c=!0,u=!1;const h=e.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi);for(let n=0,d=h.length;n<d;n++){const e=h[n],d=e.charAt(0),f=e.substr(1).trim();let p;switch(!0===c&&(u=!0,c=!1),d){case"M":p=i(f);for(let e=0,r=p.length;e<r;e+=2)o.x=p[e+0],o.y=p[e+1],s.x=o.x,s.y=o.y,0===e?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y),0===e&&!0===u&&l.copy(o);break;case"H":p=i(f);for(let e=0,r=p.length;e<r;e++)o.x=p[e],s.x=o.x,s.y=o.y,t.lineTo(o.x,o.y),0===e&&!0===u&&l.copy(o);break;case"V":p=i(f);for(let e=0,r=p.length;e<r;e++)o.y=p[e],s.x=o.x,s.y=o.y,t.lineTo(o.x,o.y),0===e&&!0===u&&l.copy(o);break;case"L":p=i(f);for(let e=0,r=p.length;e<r;e+=2)o.x=p[e+0],o.y=p[e+1],s.x=o.x,s.y=o.y,t.lineTo(o.x,o.y),0===e&&!0===u&&l.copy(o);break;case"C":p=i(f);for(let e=0,r=p.length;e<r;e+=6)t.bezierCurveTo(p[e+0],p[e+1],p[e+2],p[e+3],p[e+4],p[e+5]),s.x=p[e+2],s.y=p[e+3],o.x=p[e+4],o.y=p[e+5],0===e&&!0===u&&l.copy(o);break;case"S":p=i(f);for(let e=0,r=p.length;e<r;e+=4)t.bezierCurveTo(a(o.x,s.x),a(o.y,s.y),p[e+0],p[e+1],p[e+2],p[e+3]),s.x=p[e+0],s.y=p[e+1],o.x=p[e+2],o.y=p[e+3],0===e&&!0===u&&l.copy(o);break;case"Q":p=i(f);for(let e=0,r=p.length;e<r;e+=4)t.quadraticCurveTo(p[e+0],p[e+1],p[e+2],p[e+3]),s.x=p[e+0],s.y=p[e+1],o.x=p[e+2],o.y=p[e+3],0===e&&!0===u&&l.copy(o);break;case"T":p=i(f);for(let e=0,r=p.length;e<r;e+=2){const r=a(o.x,s.x),n=a(o.y,s.y);t.quadraticCurveTo(r,n,p[e+0],p[e+1]),s.x=r,s.y=n,o.x=p[e+0],o.y=p[e+1],0===e&&!0===u&&l.copy(o)}break;case"A":p=i(f,[3,4],7);for(let e=0,n=p.length;e<n;e+=7){if(p[e+5]==o.x&&p[e+6]==o.y)continue;const n=o.clone();o.x=p[e+5],o.y=p[e+6],s.x=o.x,s.y=o.y,r(t,p[e],p[e+1],p[e+2],p[e+3],p[e+4],n,o),0===e&&!0===u&&l.copy(o)}break;case"m":p=i(f);for(let e=0,r=p.length;e<r;e+=2)o.x+=p[e+0],o.y+=p[e+1],s.x=o.x,s.y=o.y,0===e?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y),0===e&&!0===u&&l.copy(o);break;case"h":p=i(f);for(let e=0,r=p.length;e<r;e++)o.x+=p[e],s.x=o.x,s.y=o.y,t.lineTo(o.x,o.y),0===e&&!0===u&&l.copy(o);break;case"v":p=i(f);for(let e=0,r=p.length;e<r;e++)o.y+=p[e],s.x=o.x,s.y=o.y,t.lineTo(o.x,o.y),0===e&&!0===u&&l.copy(o);break;case"l":p=i(f);for(let e=0,r=p.length;e<r;e+=2)o.x+=p[e+0],o.y+=p[e+1],s.x=o.x,s.y=o.y,t.lineTo(o.x,o.y),0===e&&!0===u&&l.copy(o);break;case"c":p=i(f);for(let e=0,r=p.length;e<r;e+=6)t.bezierCurveTo(o.x+p[e+0],o.y+p[e+1],o.x+p[e+2],o.y+p[e+3],o.x+p[e+4],o.y+p[e+5]),s.x=o.x+p[e+2],s.y=o.y+p[e+3],o.x+=p[e+4],o.y+=p[e+5],0===e&&!0===u&&l.copy(o);break;case"s":p=i(f);for(let e=0,r=p.length;e<r;e+=4)t.bezierCurveTo(a(o.x,s.x),a(o.y,s.y),o.x+p[e+0],o.y+p[e+1],o.x+p[e+2],o.y+p[e+3]),s.x=o.x+p[e+0],s.y=o.y+p[e+1],o.x+=p[e+2],o.y+=p[e+3],0===e&&!0===u&&l.copy(o);break;case"q":p=i(f);for(let e=0,r=p.length;e<r;e+=4)t.quadraticCurveTo(o.x+p[e+0],o.y+p[e+1],o.x+p[e+2],o.y+p[e+3]),s.x=o.x+p[e+0],s.y=o.y+p[e+1],o.x+=p[e+2],o.y+=p[e+3],0===e&&!0===u&&l.copy(o);break;case"t":p=i(f);for(let e=0,r=p.length;e<r;e+=2){const r=a(o.x,s.x),n=a(o.y,s.y);t.quadraticCurveTo(r,n,o.x+p[e+0],o.y+p[e+1]),s.x=r,s.y=n,o.x=o.x+p[e+0],o.y=o.y+p[e+1],0===e&&!0===u&&l.copy(o)}break;case"a":p=i(f,[3,4],7);for(let e=0,n=p.length;e<n;e+=7){if(0==p[e+5]&&0==p[e+6])continue;const n=o.clone();o.x+=p[e+5],o.y+=p[e+6],s.x=o.x,s.y=o.y,r(t,p[e],p[e+1],p[e+2],p[e+3],p[e+4],n,o),0===e&&!0===u&&l.copy(o)}break;case"Z":case"z":t.currentPath.autoClose=!0,t.currentPath.curves.length>0&&(o.copy(l),t.currentPath.currentPoint.copy(o),c=!0);break;default:console.warn(e)}u=!1}return t}(t));break;case"rect":o=s(t,o),M=function(e){const t=u(e.getAttribute("x")||0),r=u(e.getAttribute("y")||0),o=u(e.getAttribute("rx")||0),s=u(e.getAttribute("ry")||0),a=u(e.getAttribute("width")),i=u(e.getAttribute("height")),l=new n.ShapePath;l.moveTo(t+2*o,r),l.lineTo(t+a-2*o,r),(0!==o||0!==s)&&l.bezierCurveTo(t+a,r,t+a,r,t+a,r+2*s);l.lineTo(t+a,r+i-2*s),(0!==o||0!==s)&&l.bezierCurveTo(t+a,r+i,t+a,r+i,t+a-2*o,r+i);l.lineTo(t+2*o,r+i),(0!==o||0!==s)&&l.bezierCurveTo(t,r+i,t,r+i,t,r+i-2*s);l.lineTo(t,r+2*s),(0!==o||0!==s)&&l.bezierCurveTo(t,r,t,r,t+2*o,r);return l}(t);break;case"polygon":o=s(t,o),M=function(e){function t(e,t,r){const n=u(t),a=u(r);0===s?o.moveTo(n,a):o.lineTo(n,a),s++}const r=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,o=new n.ShapePath;let s=0;return e.getAttribute("points").replace(r,t),o.currentPath.autoClose=!0,o}(t);break;case"polyline":o=s(t,o),M=function(e){function t(e,t,r){const n=u(t),a=u(r);0===s?o.moveTo(n,a):o.lineTo(n,a),s++}const r=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,o=new n.ShapePath;let s=0;return e.getAttribute("points").replace(r,t),o.currentPath.autoClose=!1,o}(t);break;case"circle":o=s(t,o),M=function(e){const t=u(e.getAttribute("cx")||0),r=u(e.getAttribute("cy")||0),o=u(e.getAttribute("r")||0),s=new n.Path;s.absarc(t,r,o,0,2*Math.PI);const a=new n.ShapePath;return a.subPaths.push(s),a}(t);break;case"ellipse":o=s(t,o),M=function(e){const t=u(e.getAttribute("cx")||0),r=u(e.getAttribute("cy")||0),o=u(e.getAttribute("rx")||0),s=u(e.getAttribute("ry")||0),a=new n.Path;a.absellipse(t,r,o,s,0,2*Math.PI);const i=new n.ShapePath;return i.subPaths.push(a),i}(t);break;case"line":o=s(t,o),M=function(e){const t=u(e.getAttribute("x1")||0),r=u(e.getAttribute("y1")||0),o=u(e.getAttribute("x2")||0),s=u(e.getAttribute("y2")||0),a=new n.ShapePath;return a.moveTo(t,r),a.lineTo(o,s),a.currentPath.autoClose=!1,a}(t);break;case"defs":c=!1;break;case"use":o=s(t,o);const l=t.href.baseVal.substring(1),h=t.viewportElement.getElementById(l);h?e(h,o):console.warn("SVGLoader: 'use node' references non-existent node id: "+l)}if(M&&(void 0!==o.fill&&"none"!==o.fill&&M.color.setStyle(o.fill),function(e,t){function r(e){y.set(e.x,e.y,1).applyMatrix3(t),e.set(y.x,y.y)}const n=function(e){return 0!==e.elements[1]||0!==e.elements[3]}(t),o=e.subPaths;for(let s=0,a=o.length;s<a;s++){const e=o[s].curves;for(let o=0;o<e.length;o++){const s=e[o];s.isLineCurve?(r(s.v1),r(s.v2)):s.isCubicBezierCurve?(r(s.v0),r(s.v1),r(s.v2),r(s.v3)):s.isQuadraticBezierCurve?(r(s.v0),r(s.v1),r(s.v2)):s.isEllipseCurve&&(n&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),v.set(s.aX,s.aY),r(v),s.aX=v.x,s.aY=v.y,s.xRadius*=h(t),s.yRadius*=d(t))}}}(M,b),f.push(M),M.userData={node:t,style:o}),c){const r=t.childNodes;for(let t=0;t<r.length;t++)e(r[t],o)}l&&(A.pop(),A.length>0?b.copy(A[A.length-1]):b.identity())}(M.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4});return{paths:f,xml:M.documentElement}}static createShapes(e){const t=999999999,r=0,o=1,s=2,a=3,i=4,l=5,c=6,u={loc:r,t:0};function h(e,t,n,o){const a=e.x,i=t.x,l=n.x,c=o.x,h=e.y,f=t.y,p=n.y,A=o.y,B=(c-l)*(h-p)-(A-p)*(a-l),g=(A-p)*(i-a)-(c-l)*(f-h),m=B/g,C=((i-a)*(h-p)-(f-h)*(a-l))/g;if(0===g&&0!==B||m<=0||m>=1||C<0||C>1)return null;if(0===B&&0===g){for(let l=0;l<2;l++){if(d(0===l?n:o,e,t),u.loc==r){const e=0===l?n:o;return{x:e.x,y:e.y,t:u.t}}if(u.loc==s){return{x:+(a+u.t*(i-a)).toPrecision(10),y:+(h+u.t*(f-h)).toPrecision(10),t:u.t}}}return null}for(let s=0;s<2;s++)if(d(0===s?n:o,e,t),u.loc==r){const e=0===s?n:o;return{x:e.x,y:e.y,t:u.t}}return{x:+(a+m*(i-a)).toPrecision(10),y:+(h+m*(f-h)).toPrecision(10),t:m}}function d(e,t,n){const h=n.x-t.x,d=n.y-t.y,f=e.x-t.x,p=e.y-t.y,A=h*p-f*d;if(e.x===t.x&&e.y===t.y)return u.loc=r,void(u.t=0);if(e.x===n.x&&e.y===n.y)return u.loc=o,void(u.t=1);if(A<-Number.EPSILON)return void(u.loc=a);if(A>Number.EPSILON)return void(u.loc=i);if(h*f<0||d*p<0)return void(u.loc=l);if(Math.sqrt(h*h+d*d)<Math.sqrt(f*f+p*p))return void(u.loc=c);let B;B=0!==h?f/h:p/d,u.loc=s,u.t=B}function f(e,t,r){const o=new n.Vector2;t.getCenter(o);const s=[];return r.forEach((t=>{if(t.boundingBox.containsPoint(o)){(function(e,t){const r=[],o=[];for(let s=1;s<e.length;s++){const a=e[s-1],i=e[s];for(let e=1;e<t.length;e++){const s=h(a,i,t[e-1],t[e]);null!==s&&void 0===r.find((e=>e.t<=s.t+Number.EPSILON&&e.t>=s.t-Number.EPSILON))&&(r.push(s),o.push(new n.Vector2(s.x,s.y)))}}return o})(e,t.points).forEach((e=>{s.push({identifier:t.identifier,isCW:t.isCW,point:e})}))}})),s.sort(((e,t)=>e.point.x-t.point.x)),s}let p=0,A=t,B=-999999999,g=e.subPaths.map((e=>{const r=e.getPoints();let o=-999999999,s=t,a=-999999999,i=t;for(let t=0;t<r.length;t++){const e=r[t];e.y>o&&(o=e.y),e.y<s&&(s=e.y),e.x>a&&(a=e.x),e.x<i&&(i=e.x)}return B<=a&&(B=a+1),A>=i&&(A=i-1),{points:r,isCW:n.ShapeUtils.isClockWise(r),identifier:p++,boundingBox:new n.Box2(new n.Vector2(i,s),new n.Vector2(a,o))}}));g=g.filter((e=>e.points.length>0));const m=g.map((t=>function(e,t,r,o,s){null!==s&&void 0!==s&&""!==s||(s="nonzero");const a=new n.Vector2;e.boundingBox.getCenter(a);const i=f([new n.Vector2(r,a.y),new n.Vector2(o,a.y)],e.boundingBox,t);i.sort(((e,t)=>e.point.x-t.point.x));const l=[],c=[];i.forEach((t=>{t.identifier===e.identifier?l.push(t):c.push(t)}));const u=l[0].point.x,h=[];let d=0;for(;d<c.length&&c[d].point.x<u;)h.length>0&&h[h.length-1]===c[d].identifier?h.pop():h.push(c[d].identifier),d++;if(h.push(e.identifier),"evenodd"===s){const t=h.length%2===0,r=h[h.length-2];return{identifier:e.identifier,isHole:t,for:r}}if("nonzero"===s){let r=!0,n=null,o=null;for(let e=0;e<h.length;e++){const s=h[e];r?(o=t[s].isCW,r=!1,n=s):o!==t[s].isCW&&(o=t[s].isCW,r=!0)}return{identifier:e.identifier,isHole:r,for:n}}console.warn('fill-rule: "'+s+'" is currently not implemented.')}(t,g,A,B,e.userData.style.fillRule))),C=[];return g.forEach((e=>{if(!m[e.identifier].isHole){const t=new n.Shape(e.points);m.filter((t=>t.isHole&&t.for===e.identifier)).forEach((e=>{const r=g[e.identifier];t.holes.push(new n.Path(r.points))})),C.push(t)}})),C}static getStrokeStyle(e,t,r,n,o){return{strokeColor:t=void 0!==t?t:"#000",strokeWidth:e=void 0!==e?e:1,strokeLineJoin:r=void 0!==r?r:"miter",strokeLineCap:n=void 0!==n?n:"butt",strokeMiterLimit:o=void 0!==o?o:4}}static pointsToStroke(e,t,r,s){const a=[],i=[],l=[];if(0===o.pointsToStrokeWithBuffers(e,t,r,s,a,i,l))return null;const c=new n.BufferGeometry;return c.setAttribute("position",new n.Float32BufferAttribute(a,3)),c.setAttribute("normal",new n.Float32BufferAttribute(i,3)),c.setAttribute("uv",new n.Float32BufferAttribute(l,2)),c}static pointsToStrokeWithBuffers(e,t,r,o,s,a,i,l){const c=new n.Vector2,u=new n.Vector2,h=new n.Vector2,d=new n.Vector2,f=new n.Vector2,p=new n.Vector2,A=new n.Vector2,B=new n.Vector2,g=new n.Vector2,m=new n.Vector2,C=new n.Vector2,v=new n.Vector2,y=new n.Vector2,b=new n.Vector2,M=new n.Vector2,F=new n.Vector2,x=new n.Vector2;r=void 0!==r?r:12,o=void 0!==o?o:.001,l=void 0!==l?l:0;const S=(e=function(e){let t=!1;for(let n=1,s=e.length-1;n<s;n++)if(e[n].distanceTo(e[n+1])<o){t=!0;break}if(!t)return e;const r=[];r.push(e[0]);for(let n=1,s=e.length-1;n<s;n++)e[n].distanceTo(e[n+1])>=o&&r.push(e[n]);return r.push(e[e.length-1]),r}(e)).length;if(S<2)return 0;const G=e[0].equals(e[S-1]);let T,I,E=e[0];const D=t.strokeWidth/2,U=1/(S-1);let R,k,w,_,H=0,P=!1,L=0,O=3*l,J=2*l;K(e[0],e[1],c).multiplyScalar(D),B.copy(e[0]).sub(c),g.copy(e[0]).add(c),m.copy(B),C.copy(g);for(let n=1;n<S;n++){T=e[n],I=n===S-1?G?e[1]:void 0:e[n+1];const r=c;if(K(E,T,r),h.copy(r).multiplyScalar(D),v.copy(T).sub(h),y.copy(T).add(h),R=H+U,k=!1,void 0!==I){K(T,I,u),h.copy(u).multiplyScalar(D),b.copy(T).sub(h),M.copy(T).add(h),w=!0,h.subVectors(I,E),r.dot(h)<0&&(w=!1),1===n&&(P=w),h.subVectors(I,T),h.normalize();const e=Math.abs(r.dot(h));if(0!==e){const r=D/e;h.multiplyScalar(-r),d.subVectors(T,E),f.copy(d).setLength(r).add(h),F.copy(f).negate();const n=f.length(),o=d.length();d.divideScalar(o),p.subVectors(I,T);const s=p.length();switch(p.divideScalar(s),d.dot(F)<o&&p.dot(F)<s&&(k=!0),x.copy(f).add(T),F.add(T),_=!1,k?w?(M.copy(F),y.copy(F)):(b.copy(F),v.copy(F)):j(),t.strokeLineJoin){case"bevel":X(w,k,R);break;case"round":W(w,k),w?Q(T,v,b,R,0):Q(T,M,y,R,1);break;case"miter":case"miter-clip":default:const e=D*t.strokeMiterLimit/n;if(e<1){if("miter-clip"!==t.strokeLineJoin){X(w,k,R);break}W(w,k),w?(p.subVectors(x,v).multiplyScalar(e).add(v),A.subVectors(x,b).multiplyScalar(e).add(b),N(v,R,0),N(p,R,0),N(T,R,.5),N(T,R,.5),N(p,R,0),N(A,R,0),N(T,R,.5),N(A,R,0),N(b,R,0)):(p.subVectors(x,y).multiplyScalar(e).add(y),A.subVectors(x,M).multiplyScalar(e).add(M),N(y,R,1),N(p,R,1),N(T,R,.5),N(T,R,.5),N(p,R,1),N(A,R,1),N(T,R,.5),N(A,R,1),N(M,R,1))}else k?(w?(N(g,H,1),N(B,H,0),N(x,R,0),N(g,H,1),N(x,R,0),N(F,R,1)):(N(g,H,1),N(B,H,0),N(x,R,1),N(B,H,0),N(F,R,0),N(x,R,1)),w?b.copy(x):M.copy(x)):w?(N(v,R,0),N(x,R,0),N(T,R,.5),N(T,R,.5),N(x,R,0),N(b,R,0)):(N(y,R,1),N(x,R,1),N(T,R,.5),N(T,R,.5),N(x,R,1),N(M,R,1)),_=!0}}else j()}else j();G||n!==S-1||V(e[0],m,C,w,!0,H),H=R,E=T,B.copy(b),g.copy(M)}if(G){if(k&&s){let e=x,t=F;P!==w&&(e=F,t=x),w?(_||P)&&(t.toArray(s,0),t.toArray(s,9),_&&e.toArray(s,3)):!_&&P||(t.toArray(s,3),t.toArray(s,9),_&&e.toArray(s,0))}}else V(T,v,y,w,!1,R);return L;function K(e,t,r){return r.subVectors(t,e),r.set(-r.y,r.x).normalize()}function N(e,t,r){s&&(s[O]=e.x,s[O+1]=e.y,s[O+2]=0,a&&(a[O]=0,a[O+1]=0,a[O+2]=1),O+=3,i&&(i[J]=t,i[J+1]=r,J+=2)),L+=3}function Q(e,t,n,o,s){c.copy(t).sub(e).normalize(),u.copy(n).sub(e).normalize();let a=Math.PI;const i=c.dot(u);Math.abs(i)<1&&(a=Math.abs(Math.acos(i))),a/=r,h.copy(t);for(let l=0,c=r-1;l<c;l++)d.copy(h).rotateAround(e,a),N(h,o,s),N(d,o,s),N(e,o,.5),h.copy(d);N(d,o,s),N(n,o,s),N(e,o,.5)}function j(){N(g,H,1),N(B,H,0),N(v,R,0),N(g,H,1),N(v,R,1),N(y,R,0)}function X(e,t,r){t?e?(N(g,H,1),N(B,H,0),N(v,R,0),N(g,H,1),N(v,R,0),N(F,R,1),N(v,r,0),N(b,r,0),N(F,r,.5)):(N(g,H,1),N(B,H,0),N(y,R,1),N(B,H,0),N(F,R,0),N(y,R,1),N(y,r,1),N(M,r,0),N(F,r,.5)):e?(N(v,r,0),N(b,r,0),N(T,r,.5)):(N(y,r,1),N(M,r,0),N(T,r,.5))}function W(e,t){t&&(e?(N(g,H,1),N(B,H,0),N(v,R,0),N(g,H,1),N(v,R,0),N(F,R,1),N(v,H,0),N(T,R,.5),N(F,R,1),N(T,R,.5),N(b,H,0),N(F,R,1)):(N(g,H,1),N(B,H,0),N(y,R,1),N(B,H,0),N(F,R,0),N(y,R,1),N(y,H,1),N(F,R,0),N(T,R,.5),N(T,R,.5),N(F,R,0),N(M,H,1)))}function V(e,r,n,o,a,i){switch(t.strokeLineCap){case"round":a?Q(e,n,r,i,.5):Q(e,r,n,i,.5);break;case"square":if(a)c.subVectors(r,e),u.set(c.y,-c.x),h.addVectors(c,u).add(e),d.subVectors(u,c).add(e),o?(h.toArray(s,3),d.toArray(s,0),d.toArray(s,9)):(h.toArray(s,3),h.toArray(s,9),d.toArray(s,0));else{c.subVectors(n,e),u.set(c.y,-c.x),h.addVectors(c,u).add(e),d.subVectors(u,c).add(e);const t=s.length;o?(h.toArray(s,t-3),d.toArray(s,t-6),d.toArray(s,t-12)):(h.toArray(s,t-6),d.toArray(s,t-3),d.toArray(s,t-12))}}}}}}}]);