(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[90],{7494:function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeFlexNode=void 0;var i=function(e){function t(t,n){var o=e.call(this,t)||this;return o.onChange=n,o}return r(t,e),t.prototype.calculateLayout=function(){e.prototype.calculateLayout.call(this),this.afterCalculation(void 0)},t.prototype.afterCalculation=function(e){var n=this.onChange(this,e);this.commitedChildren.forEach(function(e){e instanceof t&&e.afterCalculation(n)})},t}(n(2219).FlexNode);t.ChangeFlexNode=i},388:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useFlexNodeContext=t.FlexNodeContextProvider=void 0;var l=i(n(7378)),u=(0,l.createContext)(null);t.FlexNodeContextProvider=function(e){var t=e.children,n=e.context;return l.default.createElement(u.Provider,{value:n},t)},t.useFlexNodeContext=function(){var e=(0,l.useContext)(u);if(null==e)throw"unable to find flex context. Missing a FlexNodeContextProvider.";return e}},3349:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(7494),t),r(n(388),t),r(n(8955),t),r(n(7636),t),r(n(6377),t)},8955:function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)l.push(o.value)}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return l},l=this&&this.__spreadArray||function(e,t,n){if(n||2==arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.useBindFlexNodeProperties=void 0;var u=n(7378);t.useBindFlexNodeProperties=function(e,t,n){var a=(0,u.useRef)({});(0,u.useEffect)(function(){Object.freeze(n);var l,u,s,c,d=a.current;try{for(var f=r(Object.entries(n)),p=f.next();!p.done;p=f.next()){var h=i(p.value,2),x=h[0],y=h[1];y!=d[x]&&e.setProperty(x,y),delete d[x]}}catch(v){l={error:v}}finally{try{p&&!p.done&&(u=f.return)&&u.call(f)}finally{if(l)throw l.error}}try{for(var g=r(Object.entries(d)),m=g.next();!m.done;m=g.next()){var x=i(m.value,1)[0];e.setProperty(x,void 0)}}catch(j){s={error:j}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}a.current=o({},n),t()},l([e,t],i(Object.entries(n).reduce(function(e,t){return e.concat(t)},[])),!1))}},7636:function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useYogaNode=void 0;var r=n(7378),i=n(3349);t.useYogaNode=function(e,t,n){var l=(0,i.useFlexNodeContext)(),u=(0,r.useMemo)(function(){return new i.ChangeFlexNode(l.precision,n)},[l.precision,n]);return(0,i.useBindFlexNodeProperties)(u,l.requestLayoutCalculation,e),(0,r.useEffect)(function(){return l.node.insertChild(u),l.requestLayoutCalculation(),function(){l.node.removeChild(u),l.requestLayoutCalculation()}},[u,l]),(0,r.useEffect)(function(){u.index=t,l.requestLayoutCalculation()},[t,u,l]),(0,r.useEffect)(function(){return u.destroy.bind(u)},[u]),(0,r.useMemo)(function(){return o(o({},l),{node:u})},[u,l])}},6377:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useYogaRootNode=void 0;var o=n(7378),r=n(3349);t.useYogaRootNode=function(e,t,n,i){void 0===n&&(n=10),void 0===i&&(i=.01);var l=(0,o.useMemo)(function(){return new r.ChangeFlexNode(i,t)},[i,t]),u=(0,o.useRef)(!1),a=(0,o.useCallback)(function(){return u.current=!0},[]);return(0,r.useBindFlexNodeProperties)(l,a,e),(0,o.useEffect)(function(){var e=function(){l.calculateLayout(),u.current=!1};e();var t=window.setInterval(function(){u.current&&e()},1e3/n);return function(){return window.clearInterval(t)}},[n,l]),(0,o.useMemo)(function(){return{node:l,precision:i,requestLayoutCalculation:a}},[l,i])}},7838:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gallery-3d",function(){return n(1596)}])},1596:function(e,t,n){"use strict";n.r(t),n.d(t,{Container:function(){return R},ContainerRoot:function(){return F},VirtualizedContainer:function(){return z},default:function(){return j}});var o=n(4246),r=n(7378),i=n(1261),l=n(5449),u=n(3349),a=n(880),s=n(9719),c=n(9646),d=n(6625),f=n(8626),p=n(9477),h=n(9606),x=n(1964),y=n(8620),v=n(543);let g=(0,r.createContext)(null),m=["/co-flex/models/2CylinderEngine.glb","/co-flex/models/Avocado.glb","/co-flex/models/Buggy.glb"];function j(){let e=(0,a.useRouter)();return e.isReady?(0,o.jsx)(h.Xz,{style:{touchAction:"none",width:"100vw",height:"100vh"},gl:{antialias:!0},dpr:null==n.g.window?void 0:window.devicePixelRatio,children:(0,o.jsx)(w,{router:e})}):null}let b=1/Math.tan(10*Math.PI/180/2);function w(e){let{router:t}=e,n=(0,x.z)(e=>e.size.width/e.size.height);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.Suspense,{fallback:null,children:(0,o.jsx)(s.qA,{preset:"city"})}),(0,o.jsx)(c.c,{fov:10,near:.01,makeDefault:!0,position:[0,0,b]}),(0,o.jsx)("ambientLight",{intensity:.1}),(0,o.jsx)("group",{scale:2,position:[-n,1,0],children:(0,o.jsx)(i.VirtualBase,{children:(0,o.jsxs)(F,{width:n,height:1,flexDirection:"column",children:[(0,o.jsx)(r.Suspense,{fallback:null,children:(0,o.jsx)(O,{router:t,back:null!=t.query.url})}),null==t.query.url?(0,o.jsx)(_,{router:t}):(0,o.jsx)(r.Suspense,{fallback:null,children:(0,o.jsx)(D,{url:t.query.url})})]})})})]})}function _(e){let{router:t}=e;return(0,o.jsx)(R,{index:1,flexDirection:"row",flexWrap:"wrap",flexGrow:1,children:m.map((e,n)=>(0,o.jsx)(r.Suspense,{fallback:null,children:(0,o.jsx)(k,{index:n,router:t,url:e})},e))})}let C=new p.PlaneGeometry(1,1);function O(e){let{back:t,router:n}=e,i=function(e){let t=(0,x.D)(y.u,e);return(0,r.useMemo)(()=>{let e=t.paths.reduce((e,t)=>e.concat(function(e){var t,n,o,r,i,l;let u=[],a=null===(t=e.userData)||void 0===t?void 0:t.style.stroke;if(void 0!==a&&"none"!==a){let s=new p.MeshBasicMaterial({color:new p.Color().setStyle(a),opacity:null===(o=e.userData)||void 0===o?void 0:o.style.strokeOpacity,transparent:(null===(r=e.userData)||void 0===r?void 0:r.style.strokeOpacity)<1,side:p.DoubleSide,depthWrite:!1});u.push(...e.subPaths.map(t=>{var n;return{bufferGeometry:y.u.pointsToStroke(t.getPoints(),null===(n=e.userData)||void 0===n?void 0:n.style),material:s}}))}let c=null===(n=e.userData)||void 0===n?void 0:n.style.fill;if(void 0!==c&&"none"!==c){let d=new p.MeshBasicMaterial({color:new p.Color().setStyle(c),opacity:null===(i=e.userData)||void 0===i?void 0:i.style.fillOpacity,transparent:(null===(l=e.userData)||void 0===l?void 0:l.style.fillOpacity)<1,side:p.DoubleSide,depthWrite:!1});u.push(...e.toShapes(!0).map(e=>({bufferGeometry:new p.ShapeGeometry(e),material:d})))}return u}(t)),[]),n=new p.Group;for(let o of e)o.bufferGeometry.scale(1,-1,1),n.add(new p.Mesh(o.bufferGeometry,o.material));return n},[t.paths])}("/co-flex/back.svg");return(0,o.jsxs)(R,{index:0,height:.08,width:"100%",flexDirection:"row",alignItems:"center",children:[t&&(0,o.jsx)(R,{marginLeft:.03,index:0,width:.02,height:.03,content:e=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("mesh",{geometry:C,visible:!1,onClick(e){e.stopPropagation(),n.back()}}),(0,o.jsx)(M,{opacity:e,object:i})]})}),(0,o.jsx)(R,{marginLeft:.03,index:1,width:.038,height:.038,content:()=>(0,o.jsx)(d.x,{anchorX:"left",anchorY:"top",color:0,fontSize:1,children:"Gallery 3D"})})]})}C.translate(.5,-.5,0);let P=new p.EdgesGeometry(new p.BoxGeometry(1,1,1));function M(e){let{opacity:t,object:n,rotation:i}=e,[u,a]=(0,r.useMemo)(()=>{n.traverse(e=>{e instanceof p.Mesh&&(e.material.transparent=!0)}),N.setFromObject(n),N.getCenter(S);let e=[-S.x,-S.y,-S.z];N.getSize(S);let t=[1/S.x,1/S.y,0===S.z?1:1/S.z],o=[(-N.min.x-e[0])*t[0],(-N.max.y-e[1])*t[1],(-N.max.z-e[2])*t[2]];return[e,{position:o,scale:t}]},[n]);return(0,x.A)(()=>{n.traverse(e=>{e instanceof p.Mesh&&(e.material.opacity=t.get())})}),(0,o.jsx)("group",{...a,children:(0,o.jsx)(l.a.group,{rotation:i,children:(0,o.jsx)("group",{position:u,children:(0,o.jsx)("primitive",{object:n})})})})}P.translate(.5,-.5,-.5);let N=new p.Box3,S=new p.Vector3;function k(e){let{url:t,router:n,index:i}=e,l=(0,f.L)(t),u=(0,r.useMemo)(()=>l.scene.clone(!0),[l.scene]),[a,s]=(0,r.useMemo)(()=>(N.setFromObject(u),N.getSize(S),[S.x/S.y,S.x/S.z]),[u]);return(0,o.jsx)(R,{id:t,index:i,widthDepthRatio:s,content:(e,r)=>(0,o.jsx)("group",{onClick(e){e.stopPropagation(),n.push({query:{url:t}},void 0,{shallow:!0})},children:(0,o.jsx)(M,{rotation:r,opacity:e,object:u})}),marginBottom:.05,marginLeft:.05,marginRight:.05,marginTop:.05,maxWidth:.4*a,flexShrink:1,aspectRatio:a})}function D(e){let{url:t}=e,n=(0,f.L)(t),i=(0,r.useMemo)(()=>n.scene.clone(!0),[n.scene]),[l,u]=(0,r.useMemo)(()=>(N.setFromObject(i),N.getSize(S),[S.x/S.y,S.x/S.z]),[i]);return(0,o.jsx)(R,{index:1,marginBottom:.05,marginLeft:.05,marginRight:.05,marginTop:.05,flexDirection:"row",justifyContent:"center",flexGrow:1,children:(0,o.jsx)(R,{widthDepthRatio:u,flexShrink:1,id:t,rotate:!0,content:(e,t)=>(0,o.jsx)(M,{rotation:t,opacity:e,object:i}),aspectRatio:l})})}function F(e){let{children:t,...n}=e,[i,l]=(0,r.useState)({}),a=(0,u.useYogaRootNode)(n,(0,r.useCallback)(e=>l({position:[e.getComputed("left"),-e.getComputed("top"),0],scale:[e.getComputed("width"),e.getComputed("height"),1]}),[]),10,.001);return(0,o.jsx)(u.FlexNodeContextProvider,{context:a,children:(0,o.jsx)(g.Provider,{value:i,children:t})})}function R(e){let{id:t,children:n,index:l,content:a,widthDepthRatio:s,rotate:c,...d}=e,[f,p]=(0,r.useState)({}),h=(0,r.useContext)(g),x=(0,u.useYogaNode)(d,null!=l?l:0,(0,r.useCallback)(e=>{let t=e.getComputed("width");p({position:[e.getComputed("left"),-e.getComputed("top"),0],scale:[t,e.getComputed("height"),null==s?1:t/s]})},[s])),y=(0,r.useMemo)(()=>({...f,position:null!=f.position&&null!=h.position?[f.position[0]+h.position[0],f.position[1]+h.position[1],f.position[2]+h.position[2]]:void 0,content:a,rotate:c}),[h,a,f,c]);return(0,i.useVirtual)(z,y,l,t),(0,o.jsx)(u.FlexNodeContextProvider,{context:x,children:(0,o.jsx)(g.Provider,{value:y,children:n})})}function z(e){let{destroy:t,controllerProps:n}=e,i=(0,r.useRef)({}),{content:u,rotate:a,...s}=(0,r.useMemo)(()=>(n.length>0&&null!=n[0].position&&(i.current={...n[0]}),i.current),[top,n]),[{position:c,opacity:d,scale:f,rotation:p}]=(0,l.useSpring)({rotation:[0,0,0],...s,opacity:null!=s.position&&n.length>0?1:0,onRest:{opacity(e){0===e.value&&t()}}},[s,n]);return((0,v.useDrag)(e=>{let{down:t,delta:[n,o]}=e;if(t&&a){let r=o/window.innerHeight*10,i=n/window.innerHeight*10,[l,u]=p.goal;p.start([l+r,u+i,0])}},{target:window}),null==u)?null:(0,o.jsx)(l.a.group,{position:c,scale:f,children:u(d,p)})}}},function(e){e.O(0,[13,737,531,928,261,683,790,774,888,179],function(){return e(e.s=7838)}),_N_E=e.O()}]);