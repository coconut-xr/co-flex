(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[90],{7494:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeFlexNode=void 0;var o=function(e){function t(t,n){var r=e.call(this,t)||this;return r.onChange=n,r}return r(t,e),t.prototype.calculateLayout=function(){e.prototype.calculateLayout.call(this),this.afterCalculation()},t.prototype.afterCalculation=function(){this.onChange(this),this.commitedChildren.forEach((function(e){e instanceof t&&e.afterCalculation()}))},t}(n(2219).FlexNode);t.ChangeFlexNode=o},388:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useFlexNodeContext=t.FlexNodeContextProvider=void 0;var u=i(n(7378)),a=(0,u.createContext)(null);t.FlexNodeContextProvider=function(e){var t=e.children,n=e.context;return u.default.createElement(a.Provider,{value:n},t)},t.useFlexNodeContext=function(){var e=(0,u.useContext)(a);if(null==e)throw"unable to find flex context. Missing a FlexNodeContextProvider.";return e}},3349:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(7494),t),o(n(388),t),o(n(8955),t),o(n(7636),t),o(n(6377),t)},8955:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},u=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.useBindFlexNodeProperties=void 0;var a=n(7378);t.useBindFlexNodeProperties=function(e,t,n){var l=(0,a.useRef)({});(0,a.useEffect)((function(){var u,a,c,s;Object.freeze(n);var f=l.current;try{for(var d=o(Object.entries(n)),p=d.next();!p.done;p=d.next()){var h=i(p.value,2),y=h[0],v=h[1];v!=f[y]&&e.setProperty(y,v),delete f[y]}}catch(b){u={error:b}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(u)throw u.error}}try{for(var x=o(Object.entries(f)),g=x.next();!g.done;g=x.next()){y=i(g.value,1)[0];e.setProperty(y,void 0)}}catch(m){c={error:m}}finally{try{g&&!g.done&&(s=x.return)&&s.call(x)}finally{if(c)throw c.error}}l.current=r({},n),t()}),u([e,t],i(Object.entries(n).reduce((function(e,t){return e.concat(t)}),[])),!1))}},7636:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useYogaNode=void 0;var o=n(7378),i=n(3349);t.useYogaNode=function(e,t,n){var u=(0,i.useFlexNodeContext)(),a=(0,o.useMemo)((function(){return new i.ChangeFlexNode(u.precision,n)}),[u.precision,n]);return(0,i.useBindFlexNodeProperties)(a,u.requestLayoutCalculation,e),(0,o.useEffect)((function(){return u.node.insertChild(a),u.requestLayoutCalculation(),function(){u.node.removeChild(a),u.requestLayoutCalculation()}}),[a,u]),(0,o.useEffect)((function(){a.index=t,u.requestLayoutCalculation()}),[t,a,u]),(0,o.useEffect)((function(){return a.destroy.bind(a)}),[a]),(0,o.useMemo)((function(){return r(r({},u),{node:a})}),[a,u])}},6377:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useYogaRootNode=void 0;var r=n(7378),o=n(3349);t.useYogaRootNode=function(e,t,n,i){void 0===n&&(n=10),void 0===i&&(i=.01);var u=(0,r.useMemo)((function(){return new o.ChangeFlexNode(i,t)}),[i,t]),a=(0,r.useRef)(!1),l=(0,r.useCallback)((function(){return a.current=!0}),[]);return(0,o.useBindFlexNodeProperties)(u,l,e),(0,r.useEffect)((function(){var e=function(){u.calculateLayout(),a.current=!1};e();var t=window.setInterval((function(){a.current&&e()}),1e3/n);return function(){return window.clearInterval(t)}}),[n,u]),(0,r.useMemo)((function(){return{node:u,precision:i,requestLayoutCalculation:l}}),[u,i])}},8071:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gallery-3d",function(){return n(2186)}])},2186:function(e,t,n){"use strict";n.r(t),n.d(t,{Container:function(){return G},ContainerRoot:function(){return A},VirtualizedContainer:function(){return q},default:function(){return P}});var r=n(4246),o=n(7378),i=n(1261),u=n(5449),a=n(3349),l=n(387),c=n(897),s=n(7433),f=n(2849),d=n(8626),p=n(2212),h=n(1823),y=n(8620);function v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function x(e){var t=(0,h.U2)(y.u,e);return(0,o.useMemo)((function(){var e=function(e){return e.reduce((function(e,t){return e.concat(function(e){var t,n,r=[],o=null===(t=e.userData)||void 0===t?void 0:t.style.stroke;if(void 0!==o&&"none"!==o){var i,u,a,l=new p.MeshBasicMaterial({color:(new p.Color).setStyle(o),opacity:null===(u=e.userData)||void 0===u?void 0:u.style.strokeOpacity,transparent:(null===(a=e.userData)||void 0===a?void 0:a.style.strokeOpacity)<1,side:p.DoubleSide,depthWrite:!1});(i=r).push.apply(i,v(e.subPaths.map((function(t){var n;return{bufferGeometry:y.u.pointsToStroke(t.getPoints(),null===(n=e.userData)||void 0===n?void 0:n.style),material:l}}))))}var c=null===(n=e.userData)||void 0===n?void 0:n.style.fill;if(void 0!==c&&"none"!==c){var s,f,d,h=new p.MeshBasicMaterial({color:(new p.Color).setStyle(c),opacity:null===(f=e.userData)||void 0===f?void 0:f.style.fillOpacity,transparent:(null===(d=e.userData)||void 0===d?void 0:d.style.fillOpacity)<1,side:p.DoubleSide,depthWrite:!1});(s=r).push.apply(s,v(e.toShapes(!0).map((function(e){return{bufferGeometry:new p.ShapeBufferGeometry(e),material:h}}))))}return r}(t))}),[])}(t.paths),n=new p.Group,r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=u.value;l.bufferGeometry.scale(1,-1,1),n.add(new p.Mesh(l.bufferGeometry,l.material))}}catch(c){o=!0,i=c}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}),[t.paths])}var g=n(2869);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}function w(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var _=(0,o.createContext)(null),C=["/co-flex/models/2CylinderEngine.glb","/co-flex/models/Avocado.glb","/co-flex/models/Buggy.glb"];function P(){var e=(0,l.useRouter)();return e.isReady?(0,r.jsx)(h.Xz,{style:{touchAction:"none",width:"100vw",height:"100vh"},gl:{antialias:!0},dpr:null==n.g.window?void 0:window.devicePixelRatio,children:(0,r.jsx)(N,{router:e})}):null}var S=10*Math.PI/180,M=1/Math.tan(S/2);function N(e){var t=e.router,n=(0,h.Ky)((function(e){return e.size.width/e.size.height}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Suspense,{fallback:null,children:(0,r.jsx)(c.q,{preset:"city"})}),(0,r.jsx)(s.c,{fov:10,near:.01,makeDefault:!0,position:[0,0,M]}),(0,r.jsx)("ambientLight",{intensity:.1}),(0,r.jsx)("group",{scale:2,position:[-n,1,0],children:(0,r.jsx)(i.VirtualBase,{children:(0,r.jsxs)(A,{width:n,height:1,flexDirection:"column",children:[(0,r.jsx)(o.Suspense,{fallback:null,children:(0,r.jsx)(D,{router:t,back:null!=t.query.url})}),null==t.query.url?(0,r.jsx)(k,{router:t}):(0,r.jsx)(o.Suspense,{fallback:null,children:(0,r.jsx)(L,{url:t.query.url})})]})})})]})}function k(e){var t=e.router;return(0,r.jsx)(G,{index:1,flexDirection:"row",flexWrap:"wrap",flexGrow:1,children:C.map((function(e,n){return(0,r.jsx)(o.Suspense,{fallback:null,children:(0,r.jsx)(z,{index:n,router:t,url:e})},e)}))})}var F=new p.PlaneBufferGeometry(1,1);function D(e){var t=e.back,n=e.router,o=x("/co-flex/back.svg");return(0,r.jsxs)(G,{index:0,height:.08,width:"100%",flexDirection:"row",alignItems:"center",children:[t&&(0,r.jsx)(G,{marginLeft:.03,index:0,width:.02,height:.03,content:function(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("mesh",{geometry:F,visible:!1,onClick:function(e){e.stopPropagation(),n.back()}}),(0,r.jsx)(E,{opacity:e,object:o})]})}}),(0,r.jsx)(G,{marginLeft:.03,index:1,width:.038,height:.038,content:function(){return(0,r.jsx)(f.x,{anchorX:"left",anchorY:"top",color:0,fontSize:1,children:"Gallery 3D"})}})]})}function E(e){var t=e.opacity,n=e.object,i=e.rotation,a=(0,o.useMemo)((function(){n.traverse((function(e){m(e,p.Mesh)&&(e.material.transparent=!0)})),R.setFromObject(n),R.getCenter(B);var e=[-B.x,-B.y,-B.z];R.getSize(B);var t=[1/B.x,1/B.y,0===B.z?1:1/B.z];return[e,{position:[(-R.min.x-e[0])*t[0],(-R.max.y-e[1])*t[1],(-R.max.z-e[2])*t[2]],scale:t}]}),[n]),l=a[0],c=a[1];return(0,h.xQ)((function(){n.traverse((function(e){m(e,p.Mesh)&&(e.material.opacity=t.get())}))})),(0,r.jsx)("group",j({},c,{children:(0,r.jsx)(u.a.group,{rotation:i,children:(0,r.jsx)("group",{position:l,children:(0,r.jsx)("primitive",{object:n})})})}))}F.translate(.5,-.5,0),new p.EdgesGeometry(new p.BoxBufferGeometry(1,1,1)).translate(.5,-.5,-.5);var R=new p.Box3,B=new p.Vector3;function z(e){var t=e.url,n=e.router,i=e.index,u=(0,d.L)(t),a=(0,o.useMemo)((function(){return u.scene.clone(!0)}),[u.scene]),l=(0,o.useMemo)((function(){return R.setFromObject(a),R.getSize(B),[B.x/B.y,B.x/B.z]}),[a]),c=l[0],s=l[1];return(0,r.jsx)(G,{id:t,index:i,widthDepthRatio:s,content:function(e,o){return(0,r.jsx)("group",{onClick:function(e){e.stopPropagation(),n.push({query:{url:t}},void 0,{shallow:!0})},children:(0,r.jsx)(E,{rotation:o,opacity:e,object:a})})},marginBottom:.05,marginLeft:.05,marginRight:.05,marginTop:.05,maxWidth:.4*c,flexShrink:1,aspectRatio:c})}function L(e){var t=e.url,n=(0,d.L)(t),i=(0,o.useMemo)((function(){return n.scene.clone(!0)}),[n.scene]),u=(0,o.useMemo)((function(){return R.setFromObject(i),R.getSize(B),[B.x/B.y,B.x/B.z]}),[i]),a=u[0],l=u[1];return(0,r.jsx)(G,{index:1,marginBottom:.05,marginLeft:.05,marginRight:.05,marginTop:.05,flexDirection:"row",justifyContent:"center",flexGrow:1,children:(0,r.jsx)(G,{widthDepthRatio:l,flexShrink:1,id:t,rotate:!0,content:function(e,t){return(0,r.jsx)(E,{rotation:t,opacity:e,object:i})},aspectRatio:a})})}function A(e){var t=e.children,n=w(e,["children"]),i=(0,o.useState)({}),u=i[0],l=i[1],c=(0,a.useYogaRootNode)(n,(0,o.useCallback)((function(e){return l({position:[e.getComputed("left"),-e.getComputed("top"),0],scale:[e.getComputed("width"),e.getComputed("height"),1]})}),[]),10,.001);return(0,r.jsx)(a.FlexNodeContextProvider,{context:c,children:(0,r.jsx)(_.Provider,{value:u,children:t})})}function G(e){var t=e.id,n=e.children,u=e.index,l=e.content,c=e.widthDepthRatio,s=e.rotate,f=w(e,["id","children","index","content","widthDepthRatio","rotate"]),d=(0,o.useState)({}),p=d[0],h=d[1],y=(0,o.useContext)(_),v=(0,a.useYogaNode)(f,null!==u&&void 0!==u?u:0,(0,o.useCallback)((function(e){var t=e.getComputed("width"),n=null==c?1:t/c;h({position:[e.getComputed("left"),-e.getComputed("top"),0],scale:[t,e.getComputed("height"),n]})}),[c])),x=(0,o.useMemo)((function(){return j({},p,{position:null!=p.position&&null!=y.position?[p.position[0]+y.position[0],p.position[1]+y.position[1],p.position[2]+y.position[2]]:void 0,content:l,rotate:s})}),[y,l,p,s]);return(0,i.useVirtual)(q,x,u,t),(0,r.jsx)(a.FlexNodeContextProvider,{context:v,children:(0,r.jsx)(_.Provider,{value:x,children:n})})}function q(e){var t=e.destroy,n=e.controllerProps,i=(0,o.useRef)({}),a=(0,o.useMemo)((function(){return n.length>0&&null!=n[0].position&&(i.current=j({},n[0])),i.current}),[top,n]),l=a.content,c=a.rotate,s=w(a,["content","rotate"]),f=O((0,u.useSpring)(j({rotation:[0,0,0]},s,{opacity:null!=s.position&&n.length>0?1:0,onRest:{opacity:function(e){0===e.value&&t()}}}),[s,n]),1)[0],d=f.position,p=f.opacity,h=f.scale,y=f.rotation;return(0,g.c0)((function(e){var t=e.down,n=O(e.delta,2),r=n[0],o=n[1];if(t&&c){var i=o/window.innerHeight*10,u=r/window.innerHeight*10,a=O(y.goal,2),l=a[0],s=a[1];y.start([l+i,s+u,0])}}),{target:window}),null==l?null:(0,r.jsx)(u.a.group,{position:d,scale:h,children:l(p,y)})}}},function(e){e.O(0,[13,737,298,261,854,989,774,888,179],(function(){return t=8071,e(e.s=t);var t}));var t=e.O();_N_E=t}]);