"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{9719:function(e,t,r){r.d(t,{qA:function(){return v}});var n=r(7462),i=r(7378),a=r(1964),o=r(9477);class s extends o.DataTextureLoader{constructor(e){super(e),this.type=o.HalfFloatType}parse(e){let t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return -1},r=function(e,t,r){t=t||1024;let n=e.pos,i=-1,a=0,o="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));for(;0>(i=s.indexOf("\n"))&&a<t&&n<e.byteLength;)o+=s,a+=s.length,n+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));return -1<i&&(!1!==r&&(e.pos+=a+i+1),o+s.slice(0,i))},n=new Uint8Array(e);n.pos=0;let i=function(e){let n,i;let a=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(n=r(e)))return t(1,"no header found");if(!(i=n.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(u.valid|=1,u.programtype=i[1],u.string+=n+"\n";!1!==(n=r(e));){if(u.string+=n+"\n","#"===n.charAt(0)){u.comments+=n+"\n";continue}if((i=n.match(a))&&(u.gamma=parseFloat(i[1])),(i=n.match(o))&&(u.exposure=parseFloat(i[1])),(i=n.match(s))&&(u.valid|=2,u.format=i[1]),(i=n.match(l))&&(u.valid|=4,u.height=parseInt(i[1],10),u.width=parseInt(i[2],10)),2&u.valid&&4&u.valid)break}return 2&u.valid?4&u.valid?u:t(3,"missing image size specifier"):t(3,"missing format specifier")}(n);if(-1!==i){let a=i.width,s=i.height,l=function(e,r,n){if(r<8||r>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(r!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");let i=new Uint8Array(4*r*n);if(!i.length)return t(4,"unable to allocate buffer space");let a=0,o=0,s=4*r,l=new Uint8Array(4),u=new Uint8Array(s),c=n;for(;c>0&&o<e.byteLength;){if(o+4>e.byteLength)return t(1);if(l[0]=e[o++],l[1]=e[o++],l[2]=e[o++],l[3]=e[o++],2!=l[0]||2!=l[1]||(l[2]<<8|l[3])!=r)return t(3,"bad rgbe scanline format");let h=0,d;for(;h<s&&o<e.byteLength;){d=e[o++];let f=d>128;if(f&&(d-=128),0===d||h+d>s)return t(3,"bad scanline data");if(f){let p=e[o++];for(let A=0;A<d;A++)u[h++]=p}else u.set(e.subarray(o,o+d),h),h+=d,o+=d}for(let B=0;B<r;B++){let g=0;i[a]=u[B+g],g+=r,i[a+1]=u[B+g],g+=r,i[a+2]=u[B+g],g+=r,i[a+3]=u[B+g],a+=4}c--}return i}(n.subarray(n.pos),a,s);if(-1!==l){let u,c,h;switch(this.type){case o.FloatType:h=l.length/4;let d=new Float32Array(4*h);for(let f=0;f<h;f++)!function(e,t,r,n){let i=e[t+3],a=Math.pow(2,i-128)/255;r[n+0]=e[t+0]*a,r[n+1]=e[t+1]*a,r[n+2]=e[t+2]*a,r[n+3]=1}(l,4*f,d,4*f);u=d,c=o.FloatType;break;case o.HalfFloatType:h=l.length/4;let p=new Uint16Array(4*h);for(let A=0;A<h;A++)!function(e,t,r,n){let i=e[t+3],a=Math.pow(2,i-128)/255;r[n+0]=o.DataUtils.toHalfFloat(Math.min(e[t+0]*a,65504)),r[n+1]=o.DataUtils.toHalfFloat(Math.min(e[t+1]*a,65504)),r[n+2]=o.DataUtils.toHalfFloat(Math.min(e[t+2]*a,65504)),r[n+3]=o.DataUtils.toHalfFloat(1)}(l,4*A,p,4*A);u=p,c=o.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:a,height:s,data:u,header:i.string,gamma:i.gamma,exposure:i.exposure,type:c}}}return null}setDataType(e){return this.type=e,this}load(e,t,r,n){return super.load(e,function(e,r){switch(e.type){case o.FloatType:case o.HalfFloatType:e.encoding=o.LinearEncoding,e.minFilter=o.LinearFilter,e.magFilter=o.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,r)},r,n)}}let l=e=>e&&e.isCubeTexture;class u extends o.Mesh{constructor(e,t){var r,n;let i=l(e),a=null!=(r=i?null===(n=e.image[0])||void 0===n?void 0:n.width:e.image.width)?r:1024,s=Math.floor(Math.log2(a/4)),u=Math.pow(2,s),c=[i?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/(3*Math.max(u,112))}`,`#define CUBEUV_TEXEL_HEIGHT ${1/(4*u)}`,`#define CUBEUV_MAX_MIP ${s}.0`],h=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,d=c.join("\n")+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <encodings_fragment>
        }
        `,f={map:{value:e},height:{value:(null==t?void 0:t.height)||15},radius:{value:(null==t?void 0:t.radius)||100}},p=new o.IcosahedronGeometry(1,16),A=new o.ShaderMaterial({uniforms:f,fragmentShader:d,vertexShader:h,side:o.DoubleSide});super(p,A)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}let c={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"},h=e=>e.current&&e.current.isScene,d=e=>h(e)?e.current:e;function f(e,t,r,n,i=0){let a=d(t||r),o=a.background,s=a.environment,l=a.backgroundBlurriness||0;return"only"!==e&&(a.environment=n),e&&(a.background=n),e&&void 0!==a.backgroundBlurriness&&(a.backgroundBlurriness=i),()=>{"only"!==e&&(a.environment=s),e&&(a.background=o),e&&void 0!==a.backgroundBlurriness&&(a.backgroundBlurriness=l)}}function p({scene:e,background:t=!1,blur:r,map:n}){let o=(0,a.z)(e=>e.scene);return i.useLayoutEffect(()=>{if(n)return f(t,e,o,n,r)},[o,e,n,t,r]),null}function A({files:e=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:r,encoding:n,extensions:i}){if(r){if(!(r in c))throw Error("Preset must be one of: "+Object.keys(c).join(", "));e=c[r],t="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/"}let l=Array.isArray(e),u=l?o.CubeTextureLoader:s,h=(0,a.D)(u,l?[e]:e,e=>{e.setPath(t),i&&i(e)}),d=l?h[0]:h;return d.mapping=l?o.CubeReflectionMapping:o.EquirectangularReflectionMapping,d.encoding=(null!=n?n:l)?o.sRGBEncoding:o.LinearEncoding,d}function B({background:e=!1,scene:t,blur:r,...n}){let o=A(n),s=(0,a.z)(e=>e.scene);return i.useLayoutEffect(()=>f(e,t,s,o,r),[o,e,t,s,r]),null}function g({children:e,near:t=1,far:r=1e3,resolution:n=256,frames:s=1,map:l,background:u=!1,blur:c,scene:h,files:d,path:A,preset:g,extensions:m}){let v=(0,a.z)(e=>e.gl),C=(0,a.z)(e=>e.scene),y=i.useRef(null),[b]=i.useState(()=>new o.Scene),M=i.useMemo(()=>{let e=new o.WebGLCubeRenderTarget(n);return e.texture.type=o.HalfFloatType,e},[n]);i.useLayoutEffect(()=>(1===s&&y.current.update(v,b),f(u,h,C,M.texture,c)),[e,b,M.texture,h,C,u,s,v]);let F=1;return(0,a.A)(()=>{(s===1/0||F<s)&&(y.current.update(v,b),F++)}),i.createElement(i.Fragment,null,(0,a.g)(i.createElement(i.Fragment,null,e,i.createElement("cubeCamera",{ref:y,args:[t,r,M]}),d||g?i.createElement(B,{background:!0,files:d,preset:g,path:A,extensions:m}):l?i.createElement(p,{background:!0,map:l,extensions:m}):null),b))}function m(e){var t,r,o,s;let l=A(e),c=e.map||l;i.useMemo(()=>(0,a.e)({GroundProjectedEnvImpl:u}),[]);let h=i.useMemo(()=>[c],[c]),d=null==(t=e.ground)?void 0:t.height,f=null==(r=e.ground)?void 0:r.radius,B=null!==(o=null==(s=e.ground)?void 0:s.scale)&&void 0!==o?o:1e3;return i.createElement(i.Fragment,null,i.createElement(p,(0,n.Z)({},e,{map:c})),i.createElement("groundProjectedEnvImpl",{args:h,scale:B,height:d,radius:f}))}function v(e){return e.ground?i.createElement(m,e):e.map?i.createElement(p,e):e.children?i.createElement(g,e):i.createElement(B,e)}},9646:function(e,t,r){r.d(t,{c:function(){return l}});var n=r(7462),i=r(7378),a=r(1964),o=r(9477);let s=e=>"function"==typeof e,l=i.forwardRef(({envMap:e,resolution:t=256,frames:r=1/0,makeDefault:l,children:u,...c},h)=>{var d;let f=(0,a.z)(({set:e})=>e),p=(0,a.z)(({camera:e})=>e),A=(0,a.z)(({size:e})=>e),B=i.useRef(null),g=i.useRef(null),m=function(e,t,r){let{gl:n,size:s,viewport:l}=(0,a.z)(),u="number"==typeof e?e:s.width*l.dpr,c="number"==typeof t?t:s.height*l.dpr,{samples:h,...d}=("number"==typeof e?void 0:e)||{},f=i.useMemo(()=>{let e;return(e=new o.WebGLRenderTarget(u,c,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,encoding:n.outputEncoding,type:o.HalfFloatType,...d})).samples=h,e},[]);return i.useLayoutEffect(()=>{f.setSize(u,c),h&&(f.samples=h)},[h,f,u,c]),i.useEffect(()=>()=>f.dispose(),[]),f}(t);i.useLayoutEffect(()=>{c.manual||(B.current.aspect=A.width/A.height)},[A,c]),i.useLayoutEffect(()=>{B.current.updateProjectionMatrix()});let v=0,C=null,y=s(u);return(0,a.A)(t=>{y&&(r===1/0||v<r)&&(g.current.visible=!1,t.gl.setRenderTarget(m),C=t.scene.background,e&&(t.scene.background=e),t.gl.render(t.scene,B.current),t.scene.background=C,t.gl.setRenderTarget(null),g.current.visible=!0,v++)}),i.useLayoutEffect(()=>{if(l)return f(()=>({camera:B.current})),()=>f(()=>({camera:p}))},[B,l,f]),i.createElement(i.Fragment,null,i.createElement("perspectiveCamera",(0,n.Z)({ref:(d=[B,h],function(e){d.forEach(function(t){"function"==typeof t?t(e):null!=t&&(t.current=e)})})},c),!y&&u),i.createElement("group",{ref:g},y&&u(m.texture)))})},6625:function(e,t,r){let n,i;r.d(t,{x:function(){return es}});var a=r(7462),o=r(7378),s=r(9477);function l(){var e,t=0,r=[],n=0,i=0,a=f(function(e){i||s(1,e)}),o=f(function(e){i||s(-1,e)});function s(r,n){i++;var a=0;try{n===B&&p();var o=r>0&&d(n);o?o.call(n,f(function(e){a++,s(1,e)}),f(function(e){a++,s(-1,e)})):(t=r,e=n,u())}catch(l){t||a||s(-1,l)}}function u(){n||(setTimeout(c,0),n=1)}function c(){var e=r;n=0,r=[],e.forEach(h)}function h(e){e()}function d(e){var t=e&&(A(e)||"object"==typeof e)&&e.then;return A(t)&&t}function f(e){var t=0;return function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];t++||e.apply(this,r)}}function p(){throw TypeError("Chaining cycle detected")}var A=function(e){return"function"==typeof e},B={then:function(n,i){var a=l();return r.push(function(){var r=t>0?n:i;if(A(r))try{var o=r(e);o===a&&p();var s=d(o);s?s.call(o,a.resolve,a.reject):a.resolve(o)}catch(l){a.reject(l)}else a[t>0?"resolve":"reject"](e)}),t&&u(),a},resolve:a,reject:o};return B}function u(){var e,t,r=new Promise(function(r,n){e=r,t=n});return{then:r.then.bind(r),resolve:e,reject:t}}r(3454),l.all=u.all=function(e){var t=0,r=[],n=c();return 0===e.length?n.resolve([]):e.forEach(function(i,a){var o=c();o.resolve(i),o.then(function(i){t++,r[a]=i,t===e.length&&n.resolve(r)},n.reject)}),n};var c="function"==typeof Promise?u:l;function h(){var e=Object.create(null);function t(e,t){var r=void 0;self.troikaDefine=function(e){return r=e};var n=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(n)}catch(i){console.error(i)}return URL.revokeObjectURL(n),delete self.troikaDefine,r}self.addEventListener("message",function(r){var n=r.data,i=n.messageId,a=n.action,o=n.data;try{"registerModule"===a&&function r(n,i){var a=n.id,o=n.name,s=n.dependencies;void 0===s&&(s=[]);var l=n.init;void 0===l&&(l=function(){});var u=n.getTransferables;if(void 0===u&&(u=null),!e[a])try{s=s.map(function(t){return t&&t.isWorkerModule&&(r(t,function(e){if(e instanceof Error)throw e}),t=e[t.id].value),t}),l=t("<"+o+">.init",l),u&&(u=t("<"+o+">.getTransferables",u));var c=null;"function"==typeof l?c=l.apply(void 0,s):console.error("worker module init function failed to rehydrate"),e[a]={id:a,value:c,getTransferables:u},i(c)}catch(h){h&&h.noLog||console.error(h),i(h)}}(o,function(e){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:{isCallable:"function"==typeof e}})}),"callModule"===a&&function(t,r){var n,i=t.id,a=t.args;e[i]&&"function"==typeof e[i].value||r(Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var o=(n=e[i]).value.apply(n,a);o&&"function"==typeof o.then?o.then(l,function(e){return r(e instanceof Error?e:Error(""+e))}):l(o)}catch(s){r(s)}function l(t){try{var n=e[i].getTransferables&&e[i].getTransferables(t);n&&Array.isArray(n)&&n.length||(n=void 0),r(t,n)}catch(a){console.error(a),r(a)}}}(o,function(e,t){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:e},t||void 0)})}catch(s){postMessage({messageId:i,success:!1,error:s.stack})}})}var d=function(){var e=!1;if("undefined"!=typeof window&&void 0!==window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return d=function(){return e},e},f=0,p=0,A=!1,B=Object.create(null),g=Object.create(null),m=Object.create(null);function v(e){if((!e||"function"!=typeof e.init)&&!A)throw Error("requires `options.init` function");var t,r=e.dependencies,n=e.init,i=e.getTransferables,a=e.workerId;if(!d())return(t=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return t._getInitResult().then(function(t){if("function"==typeof t)return t.apply(void 0,e);throw Error("Worker module function was called but `init` did not return a callable function")})})._getInitResult=function(){var r=e.dependencies,n=e.init;r=Array.isArray(r)?r.map(function(e){return e&&e._getInitResult?e._getInitResult():e}):[];var i=c.all(r).then(function(e){return n.apply(null,e)});return t._getInitResult=function(){return i},i},t;null==a&&(a="#default");var o="workerModule"+ ++f,s=e.name||o,l=null;function u(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!l){l=y(a,"registerModule",u.workerModuleData);var r=function(){l=null,g[a].delete(r)};(g[a]||(g[a]=new Set)).add(r)}return l.then(function(t){if(t.isCallable)return y(a,"callModule",{id:o,args:e});throw Error("Worker module function was called but `init` did not return a callable function")})}return r=r&&r.map(function(e){return"function"!=typeof e||e.workerModuleData||(A=!0,e=v({workerId:a,name:"<"+s+"> function dependency: "+e.name,init:"function(){return (\n"+C(e)+"\n)}"}),A=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e}),u.workerModuleData={isWorkerModule:!0,id:o,name:s,dependencies:r,init:C(n),getTransferables:i&&C(i)},u}function C(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function y(e,t,r){var n=c(),i=++p;return m[i]=function(e){e.success?n.resolve(e.result):n.reject(Error("Error in worker "+t+" call: "+e.error))},(function(e){var t=B[e];if(!t){var r=C(h);(t=B[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+r+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,r=t.messageId,n=m[r];if(!n)throw Error("WorkerModule response with empty or unknown messageId");delete m[r],n(t)}}return t})(e).postMessage({messageId:i,action:t,data:r}),n}var b=v({name:"Thenable",dependencies:[c],init:function(e){return e}});function M(){return function(e){function t(e,t){for(var r,n,i,a,o,s=/([MLQCZ])([^MLQCZ]*)/g;r=s.exec(e);){var l=r[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(e){return parseFloat(e)});switch(r[1]){case"M":a=n=l[0],o=i=l[1];break;case"L":(l[0]!==a||l[1]!==o)&&t("L",a,o,a=l[0],o=l[1]);break;case"Q":t("Q",a,o,a=l[2],o=l[3],l[0],l[1]);break;case"C":t("C",a,o,a=l[4],o=l[5],l[0],l[1],l[2],l[3]);break;case"Z":(a!==n||o!==i)&&t("L",a,o,n,i)}}}function r(e,r,n){void 0===n&&(n=16);var i={x:0,y:0};t(e,function(e,t,a,o,s,l,u,c,h){switch(e){case"L":r(t,a,o,s);break;case"Q":for(var d=t,f=a,p=1;p<n;p++)!function(e,t,r,n,i,a,o,s){var l=1-o;s.x=l*l*e+2*l*o*r+o*o*i,s.y=l*l*t+2*l*o*n+o*o*a}(t,a,l,u,o,s,p/(n-1),i),r(d,f,i.x,i.y),d=i.x,f=i.y;break;case"C":for(var A=t,B=a,g=1;g<n;g++)!function(e,t,r,n,i,a,o,s,l,u){var c=1-l;u.x=c*c*c*e+3*c*c*l*r+3*c*l*l*i+l*l*l*o,u.y=c*c*c*t+3*c*c*l*n+3*c*l*l*a+l*l*l*s}(t,a,l,u,c,h,o,s,g/(n-1),i),r(A,B,i.x,i.y),A=i.x,B=i.y}})}var n="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",i=new WeakMap,a={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function o(e,t){var r=e.getContext?e.getContext("webgl",a):e,n=i.get(r);if(!n){var o="undefined"!=typeof WebGL2RenderingContext&&r instanceof WebGL2RenderingContext,s={},l={},u={},c=-1,h=[];function d(e){var t=s[e];if(!t&&!(t=s[e]=r.getExtension(e)))throw Error(e+" not supported");return t}function f(e,t){var n=r.createShader(t);return r.shaderSource(n,e),r.compileShader(n),n}function p(){s={},l={},u={},c=-1,h.length=0}r.canvas.addEventListener("webglcontextlost",function(e){p(),e.preventDefault()},!1),i.set(r,n={gl:r,isWebGL2:o,getExtension:d,withProgram:function(e,t,n,i){if(!l[e]){var a={},s={},u=r.createProgram();r.attachShader(u,f(t,r.VERTEX_SHADER)),r.attachShader(u,f(n,r.FRAGMENT_SHADER)),r.linkProgram(u),l[e]={program:u,transaction:function(e){r.useProgram(u),e({setUniform:function(e,t){for(var n=[],i=arguments.length-2;i-- >0;)n[i]=arguments[i+2];var a=s[t]||(s[t]=r.getUniformLocation(u,t));r["uniform"+e].apply(r,[a].concat(n))},setAttribute:function(e,t,n,i,s){var l=a[e];l||(l=a[e]={buf:r.createBuffer(),loc:r.getAttribLocation(u,e),data:null}),r.bindBuffer(r.ARRAY_BUFFER,l.buf),r.vertexAttribPointer(l.loc,t,r.FLOAT,!1,0,0),r.enableVertexAttribArray(l.loc),o?r.vertexAttribDivisor(l.loc,i):d("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc,i),s!==l.data&&(r.bufferData(r.ARRAY_BUFFER,s,n),l.data=s)}})}}}l[e].transaction(i)},withTexture:function(e,t){c++;try{r.activeTexture(r.TEXTURE0+c);var n=u[e];n||(n=u[e]=r.createTexture(),r.bindTexture(r.TEXTURE_2D,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.bindTexture(r.TEXTURE_2D,n),t(n,c)}finally{c--}},withTextureFramebuffer:function(e,t,n){var i=r.createFramebuffer();h.push(i),r.bindFramebuffer(r.FRAMEBUFFER,i),r.activeTexture(r.TEXTURE0+t),r.bindTexture(r.TEXTURE_2D,e),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0);try{n(i)}finally{r.deleteFramebuffer(i),r.bindFramebuffer(r.FRAMEBUFFER,h[--h.length-1]||null)}},handleContextLoss:p})}t(n)}function s(e,t,r,i,a,s,l,u){void 0===l&&(l=15),void 0===u&&(u=null),o(e,function(e){var o=e.gl,c=e.withProgram;(0,e.withTexture)("copy",function(e,h){o.texImage2D(o.TEXTURE_2D,0,o.RGBA,a,s,0,o.RGBA,o.UNSIGNED_BYTE,t),c("copy",n,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,o.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",h),o.bindFramebuffer(o.FRAMEBUFFER,u||null),o.disable(o.BLEND),o.colorMask(8&l,4&l,2&l,1&l),o.viewport(r,i,a,s),o.scissor(r,i,a,s),o.drawArrays(o.TRIANGLES,0,3)})})})}var l=Object.freeze({__proto__:null,withWebGLContext:o,renderImageData:s,resizeWebGLCanvasWithoutClearing:function(e,t,r){var n=e.width,i=e.height;o(e,function(a){var o=a.gl,l=new Uint8Array(n*i*4);o.readPixels(0,0,n,i,o.RGBA,o.UNSIGNED_BYTE,l),e.width=t,e.height=r,s(o,l,0,0,n,i)})}});function u(e,t,n,i,a,o){void 0===o&&(o=1);var s=new Uint8Array(e*t),l=i[2]-i[0],u=i[3]-i[1],c=[];r(n,function(e,t,r,n){c.push({x1:e,y1:t,x2:r,y2:n,minX:Math.min(e,r),minY:Math.min(t,n),maxX:Math.max(e,r),maxY:Math.max(t,n)})}),c.sort(function(e,t){return e.maxX-t.maxX});for(var h=0;h<e;h++)for(var d=0;d<t;d++){var f=function(e,t){for(var r=1/0,n=1/0,i=c.length;i--;){var a=c[i];if(a.maxX+n<=e)break;if(e+n>a.minX&&t-n<a.maxY&&t+n>a.minY){var o=function(e,t,r,n,i,a){var o=i-r,s=a-n,l=o*o+s*s,u=l?Math.max(0,Math.min(1,((e-r)*o+(t-n)*s)/l)):0,c=e-(r+u*o),h=t-(n+u*s);return c*c+h*h}(e,t,a.x1,a.y1,a.x2,a.y2);o<r&&(n=Math.sqrt(r=o))}}return function(e,t){for(var r=0,n=c.length;n--;){var i=c[n];if(i.maxX<=e)break;i.y1>t!=i.y2>t&&e<(i.x2-i.x1)*(t-i.y1)/(i.y2-i.y1)+i.x1&&(r+=i.y1<i.y2?1:-1)}return 0!==r}(e,t)&&(n=-n),n}(i[0]+l*(h+.5)/e,i[1]+u*(d+.5)/t),p=Math.pow(1-Math.abs(f)/a,o)/2;f<0&&(p=1-p),p=Math.max(0,Math.min(255,Math.round(255*p))),s[d*e+h]=p}return s}function c(e,t,r,n,i,a,o,s,l,u){void 0===a&&(a=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0),h(e,t,r,n,i,a,o,null,s,l,u)}function h(e,t,r,n,i,a,o,l,c,h,d){void 0===a&&(a=1),void 0===c&&(c=0),void 0===h&&(h=0),void 0===d&&(d=0);for(var f=u(e,t,r,n,i,a),p=new Uint8Array(4*f.length),A=0;A<f.length;A++)p[4*A+d]=f[A];s(o,p,c,h,e,t,1<<3-d,l)}var d=Object.freeze({__proto__:null,generate:u,generateIntoCanvas:c,generateIntoFramebuffer:h}),f=new Float32Array([0,0,2,0,0,2]),p=null,A=!1,B={},g=new WeakMap;function m(e){if(!A&&!b(e))throw Error("WebGL generation not supported")}function v(e,t,r,n,i,a,s){if(void 0===a&&(a=1),void 0===s&&(s=null),!s&&!(s=p)){var l="function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!=typeof document?document.createElement("canvas"):null;if(!l)throw Error("OffscreenCanvas or DOM canvas not supported");s=p=l.getContext("webgl",{depth:!1})}m(s);var u=new Uint8Array(e*t*4);o(s,function(o){var s=o.gl,l=o.withTexture,c=o.withTextureFramebuffer;l("readable",function(o,l){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,t,0,s.RGBA,s.UNSIGNED_BYTE,null),c(o,l,function(o){y(e,t,r,n,i,a,s,o,0,0,0),s.readPixels(0,0,e,t,s.RGBA,s.UNSIGNED_BYTE,u)})})});for(var c=new Uint8Array(e*t),h=0,d=0;h<u.length;h+=4)c[d++]=u[h];return c}function C(e,t,r,n,i,a,o,s,l,u){void 0===a&&(a=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0),y(e,t,r,n,i,a,o,null,s,l,u)}function y(e,t,i,a,s,l,u,c,h,d,p){void 0===l&&(l=1),void 0===h&&(h=0),void 0===d&&(d=0),void 0===p&&(p=0),m(u);var A=[];r(i,function(e,t,r,n){A.push(e,t,r,n)}),A=new Float32Array(A),o(u,function(r){var i=r.gl,o=r.isWebGL2,u=r.getExtension,B=r.withProgram,g=r.withTexture,m=r.withTextureFramebuffer,v=r.handleContextLoss;if(g("rawDistances",function(r,g){(e!==r._lastWidth||t!==r._lastHeight)&&i.texImage2D(i.TEXTURE_2D,0,i.RGBA,r._lastWidth=e,r._lastHeight=t,0,i.RGBA,i.UNSIGNED_BYTE,null),B("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",function(n){var c=n.setAttribute,h=n.setUniform,d=!o&&u("ANGLE_instanced_arrays"),p=!o&&u("EXT_blend_minmax");c("aUV",2,i.STATIC_DRAW,0,f),c("aLineSegment",4,i.DYNAMIC_DRAW,1,A),h.apply(void 0,["4f","uGlyphBounds"].concat(a)),h("1f","uMaxDistance",s),h("1f","uExponent",l),m(r,g,function(r){i.enable(i.BLEND),i.colorMask(!0,!0,!0,!0),i.viewport(0,0,e,t),i.scissor(0,0,e,t),i.blendFunc(i.ONE,i.ONE),i.blendEquationSeparate(i.FUNC_ADD,o?i.MAX:p.MAX_EXT),i.clear(i.COLOR_BUFFER_BIT),o?i.drawArraysInstanced(i.TRIANGLES,0,3,A.length/4):d.drawArraysInstancedANGLE(i.TRIANGLES,0,3,A.length/4)})}),B("post",n,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",function(r){r.setAttribute("aUV",2,i.STATIC_DRAW,0,f),r.setUniform("1i","tex",g),i.bindFramebuffer(i.FRAMEBUFFER,c),i.disable(i.BLEND),i.colorMask(0===p,1===p,2===p,3===p),i.viewport(h,d,e,t),i.scissor(h,d,e,t),i.drawArrays(i.TRIANGLES,0,3)})}),i.isContextLost())throw v(),Error("webgl context lost")})}function b(e){var t=e&&e!==p?e.canvas||e:B,r=g.get(t);if(void 0===r){A=!0;var n=null;try{var i=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],a=v(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);(r=a&&i.length===a.length&&a.every(function(e,t){return e===i[t]}))||(n="bad trial run results",console.info(i,a))}catch(o){r=!1,n=o.message}n&&console.warn("WebGL SDF generation not supported:",n),A=!1,g.set(t,r)}return r}var M=Object.freeze({__proto__:null,generate:v,generateIntoCanvas:C,generateIntoFramebuffer:y,isSupported:b});return e.forEachPathCommand=t,e.generate=function(e,t,r,n,i,a){void 0===i&&(i=Math.max(n[2]-n[0],n[3]-n[1])/2),void 0===a&&(a=1);try{return v.apply(M,arguments)}catch(o){return console.info("WebGL SDF generation failed, falling back to JS",o),u.apply(d,arguments)}},e.generateIntoCanvas=function(e,t,r,n,i,a,o,s,l,u){void 0===i&&(i=Math.max(n[2]-n[0],n[3]-n[1])/2),void 0===a&&(a=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0);try{return C.apply(M,arguments)}catch(h){return console.info("WebGL SDF generation failed, falling back to JS",h),c.apply(d,arguments)}},e.javascript=d,e.pathToLineSegments=r,e.webgl=M,e.webglUtils=l,Object.defineProperty(e,"__esModule",{value:!0}),e}({})}var F=function(){return function(e){var t,r,n,i,a={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},o={},s={};o.L=1,s[1]="L",Object.keys(a).forEach(function(e,t){o[e]=1<<t+1,s[o[e]]=e}),Object.freeze(o);var l=o.LRI|o.RLI|o.FSI,u=o.L|o.R|o.AL,c=o.B|o.S|o.WS|o.ON|o.FSI|o.LRI|o.RLI|o.PDI,h=o.BN|o.RLE|o.LRE|o.RLO|o.LRO|o.PDF,d=o.S|o.WS|o.B|l|o.PDI|h,f=null;function p(e){return!function(){if(!f){f=new Map;var e=function(e){if(a.hasOwnProperty(e)){var t=0;a[e].split(",").forEach(function(r){var n=r.split("+"),i=n[0],a=n[1];i=parseInt(i,36),a=a?parseInt(a,36):0,f.set(t+=i,o[e]);for(var s=0;s<a;s++)f.set(++t,o[e])})}};for(var t in a)e(t)}}(),f.get(e.codePointAt(0))||o.L}var A={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function B(e,t){var r,n=0,i=new Map,a=t&&new Map;return e.split(",").forEach(function e(o){if(-1!==o.indexOf("+"))for(var s=+o;s--;)e(r);else{r=o;var l=o.split(">"),u=l[0],c=l[1];u=String.fromCodePoint(n+=parseInt(u,36)),c=String.fromCodePoint(n+=parseInt(c,36)),i.set(u,c),t&&a.set(c,u)}}),{map:i,reverseMap:a}}function g(){if(!t){var e=B(A.pairs,!0),i=e.map,a=e.reverseMap;t=i,r=a,n=B(A.canonical,!1).map}}function m(e){return g(),t.get(e)||null}function v(e){return g(),r.get(e)||null}function C(e){return g(),n.get(e)||null}var y=o.L,b=o.R,M=o.EN,F=o.ES,E=o.ET,T=o.AN,x=o.CS,S=o.B,I=o.S,G=o.ON,D=o.BN,R=o.NSM,U=o.AL,w=o.LRO,_=o.RLO,k=o.LRE,L=o.RLE,P=o.PDF,H=o.LRI,O=o.RLI,J=o.FSI,N=o.PDI;function K(e){return!function(){if(!i){var e=B("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),t=e.map;e.reverseMap.forEach(function(e,r){t.set(r,e)}),i=t}}(),i.get(e)||null}function j(e,t,r,n){var i=e.length;r=Math.max(0,null==r?0:+r),n=Math.min(i-1,null==n?i-1:+n);var a=[];return t.paragraphs.forEach(function(i){var o=Math.max(r,i.start),s=Math.min(n,i.end);if(o<s){for(var l=t.levels.slice(o,s+1),u=s;u>=o&&p(e[u])&d;u--)l[u]=i.level;for(var c=i.level,h=1/0,f=0;f<l.length;f++){var A=l[f];A>c&&(c=A),A<h&&(h=1|A)}for(var B=c;B>=h;B--)for(var g=0;g<l.length;g++)if(l[g]>=B){for(var m=g;g+1<l.length&&l[g+1]>=B;)g++;g>m&&a.push([m+r,g+r])}}}),a}function Q(e,t,r,n){for(var i=j(e,t,r,n),a=[],o=0;o<e.length;o++)a[o]=o;return i.forEach(function(e){for(var t=e[0],r=e[1],n=a.slice(t,r+1),i=n.length;i--;)a[r-i]=n[i]}),a}return e.closingToOpeningBracket=v,e.getBidiCharType=p,e.getBidiCharTypeName=function(e){return s[p(e)]},e.getCanonicalBracket=C,e.getEmbeddingLevels=function(e,t){for(var r=new Uint32Array(e.length),n=0;n<e.length;n++)r[n]=p(e[n]);var i=new Map;function a(e,t){var n=r[e];r[e]=t,i.set(n,i.get(n)-1),n&c&&i.set(c,i.get(c)-1),i.set(t,(i.get(t)||0)+1),t&c&&i.set(c,(i.get(c)||0)+1)}for(var o=new Uint8Array(e.length),s=new Map,f=[],A=null,B=0;B<e.length;B++)A||f.push(A={start:B,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:tG(B,!1)}),r[B]&S&&(A.end=B,A=null);for(var g=L|k|_|w|l|N|P|S,K=function(e){return e+(1&e?1:2)},j=function(e){return e+(1&e?2:1)},Q=0;Q<f.length;Q++){var X=[{_level:(A=f[Q]).level,_override:0,_isolate:0}],W=void 0,V=0,Y=0,Z=0;i.clear();for(var z=A.start;z<=A.end;z++){var q=r[z];if(W=X[X.length-1],i.set(q,(i.get(q)||0)+1),q&c&&i.set(c,(i.get(c)||0)+1),q&g){if(q&(L|k)){o[z]=W._level;var $=(q===L?j:K)(W._level);!($<=125)||V||Y?!V&&Y++:X.push({_level:$,_override:0,_isolate:0})}else if(q&(_|w)){o[z]=W._level;var ee=(q===_?j:K)(W._level);!(ee<=125)||V||Y?!V&&Y++:X.push({_level:ee,_override:q&_?b:y,_isolate:0})}else if(q&l){q&J&&(q=1===tG(z+1,!0)?O:H),o[z]=W._level,W._override&&a(z,W._override);var et=(q===O?j:K)(W._level);et<=125&&0===V&&0===Y?(Z++,X.push({_level:et,_override:0,_isolate:1,_isolInitIndex:z})):V++}else if(q&N){if(V>0)V--;else if(Z>0){for(Y=0;!X[X.length-1]._isolate;)X.pop();var er=X[X.length-1]._isolInitIndex;null!=er&&(s.set(er,z),s.set(z,er)),X.pop(),Z--}W=X[X.length-1],o[z]=W._level,W._override&&a(z,W._override)}else q&P?(0===V&&(Y>0?Y--:!W._isolate&&X.length>1&&(X.pop(),W=X[X.length-1])),o[z]=W._level):q&S&&(o[z]=A.level)}else o[z]=W._level,W._override&&q!==D&&a(z,W._override)}for(var en=[],ei=null,ea=A.start;ea<=A.end;ea++){var eo=r[ea];if(!(eo&h)){var es=o[ea],el=eo&l,eu=eo===N;ei&&es===ei._level?(ei._end=ea,ei._endsWithIsolInit=el):en.push(ei={_start:ea,_end:ea,_level:es,_startsWithPDI:eu,_endsWithIsolInit:el})}}for(var ec=[],eh=0;eh<en.length;eh++){var ed=en[eh];if(!ed._startsWithPDI||ed._startsWithPDI&&!s.has(ed._start)){for(var ef=[ei=ed],ep=void 0;ei&&ei._endsWithIsolInit&&null!=(ep=s.get(ei._end));)for(var eA=eh+1;eA<en.length;eA++)if(en[eA]._start===ep){ef.push(ei=en[eA]);break}for(var eB=[],eg=0;eg<ef.length;eg++)for(var em=ef[eg],ev=em._start;ev<=em._end;ev++)eB.push(ev);for(var eC=o[eB[0]],ey=A.level,eb=eB[0]-1;eb>=0;eb--)if(!(r[eb]&h)){ey=o[eb];break}var eM=eB[eB.length-1],eF=o[eM],eE=A.level;if(!(r[eM]&l)){for(var eT=eM+1;eT<=A.end;eT++)if(!(r[eT]&h)){eE=o[eT];break}}ec.push({_seqIndices:eB,_sosType:Math.max(ey,eC)%2?b:y,_eosType:Math.max(eE,eF)%2?b:y})}}for(var ex=0;ex<ec.length;ex++){var eS=ec[ex],eI=eS._seqIndices,eG=eS._sosType,eD=eS._eosType;if(i.get(R))for(var eR=0;eR<eI.length;eR++){var eU=eI[eR];if(r[eU]&R){for(var ew=eG,e_=eR-1;e_>=0;e_--)if(!(r[eI[e_]]&h)){ew=r[eI[e_]];break}a(eU,ew&(l|N)?G:ew)}}if(i.get(M))for(var ek=0;ek<eI.length;ek++){var eL=eI[ek];if(r[eL]&M)for(var eP=ek-1;eP>=-1;eP--){var eH=-1===eP?eG:r[eI[eP]];if(eH&u){eH===U&&a(eL,T);break}}}if(i.get(U))for(var eO=0;eO<eI.length;eO++){var eJ=eI[eO];r[eJ]&U&&a(eJ,b)}if(i.get(F)||i.get(x))for(var eN=1;eN<eI.length-1;eN++){var eK=eI[eN];if(r[eK]&(F|x)){for(var ej=0,eQ=0,eX=eN-1;eX>=0&&(ej=r[eI[eX]])&h;eX--);for(var eW=eN+1;eW<eI.length&&(eQ=r[eI[eW]])&h;eW++);ej===eQ&&(r[eK]===F?ej===M:ej&(M|T))&&a(eK,ej)}}if(i.get(M)){for(var eV=0;eV<eI.length;eV++)if(r[eI[eV]]&M){for(var eY=eV-1;eY>=0&&r[eI[eY]]&(E|h);eY--)a(eI[eY],M);for(var eZ=eV+1;eZ<eI.length&&r[eI[eZ]]&(E|h);eZ++)a(eI[eZ],M)}}if(i.get(E)||i.get(F)||i.get(x))for(var ez=0;ez<eI.length;ez++){var eq=eI[ez];if(r[eq]&(E|F|x)){a(eq,G);for(var e$=ez-1;e$>=0&&r[eI[e$]]&h;e$--)a(eI[e$],G);for(var e1=ez+1;e1<eI.length&&r[eI[e1]]&h;e1++)a(eI[e1],G)}}if(i.get(M))for(var e0=0,e2=eG;e0<eI.length;e0++){var e9=eI[e0],e3=r[e9];e3&M?e2===y&&a(e9,y):e3&u&&(e2=e3)}if(i.get(c)){for(var e4=b|M|T,e8=e4|y,e6=[],e5=[],e7=0;e7<eI.length;e7++)if(r[eI[e7]]&c){var te=e[eI[e7]],tt=void 0;if(null!==m(te)){if(e5.length<63)e5.push({char:te,seqIndex:e7});else break}else if(null!==(tt=v(te)))for(var tr=e5.length-1;tr>=0;tr--){var tn=e5[tr].char;if(tn===tt||tn===v(C(te))||m(C(tn))===te){e6.push([e5[tr].seqIndex,e7]),e5.length=tr;break}}}e6.sort(function(e,t){return e[0]-t[0]});for(var ti=0;ti<e6.length;ti++){for(var ta=e6[ti],to=ta[0],ts=ta[1],tl=!1,tu=0,tc=to+1;tc<ts;tc++){var th=eI[tc];if(r[th]&e8){tl=!0;var td=r[th]&e4?b:y;if(td===tD(th)){tu=td;break}}}if(tl&&!tu){tu=eG;for(var tf=to-1;tf>=0;tf--){var tp=eI[tf];if(r[tp]&e8){var tA=r[tp]&e4?b:y;tu=tA!==tD(tp)?tA:tD(tp);break}}}if(tu){if(r[eI[to]]=r[eI[ts]]=tu,tu!==tD(eI[to])){for(var tB=to+1;tB<eI.length;tB++)if(!(r[eI[tB]]&h)){p(e[eI[tB]])&R&&(r[eI[tB]]=tu);break}}if(tu!==tD(eI[ts])){for(var tg=ts+1;tg<eI.length;tg++)if(!(r[eI[tg]]&h)){p(e[eI[tg]])&R&&(r[eI[tg]]=tu);break}}}}for(var tm=0;tm<eI.length;tm++)if(r[eI[tm]]&c){for(var tv=tm,tC=tm,ty=eG,tb=tm-1;tb>=0;tb--)if(r[eI[tb]]&h)tv=tb;else{ty=r[eI[tb]]&e4?b:y;break}for(var tM=eD,tF=tm+1;tF<eI.length;tF++)if(r[eI[tF]]&(c|h))tC=tF;else{tM=r[eI[tF]]&e4?b:y;break}for(var tE=tv;tE<=tC;tE++)r[eI[tE]]=ty===tM?ty:tD(eI[tE]);tm=tC}}}for(var tT=A.start;tT<=A.end;tT++){var tx=o[tT],tS=r[tT];if(1&tx?tS&(y|M|T)&&o[tT]++:tS&b?o[tT]++:tS&(T|M)&&(o[tT]+=2),tS&h&&(o[tT]=0===tT?A.level:o[tT-1]),tT===A.end||p(e[tT])&(I|S))for(var tI=tT;tI>=0&&p(e[tI])&d;tI--)o[tI]=A.level}}return{levels:o,paragraphs:f};function tG(t,n){for(var i=t;i<e.length;i++){var a=r[i];if(a&(b|U))return 1;if(a&(S|y)||n&&a===N)break;if(a&l){var o=function(t){for(var n=1,i=t+1;i<e.length;i++){var a=r[i];if(a&S)break;if(a&N){if(0==--n)return i}else a&l&&n++}return -1}(i);i=-1===o?e.length:o}}return 0}function tD(e){return 1&o[e]?b:y}},e.getMirroredCharacter=K,e.getMirroredCharactersMap=function(e,t,r,n){var i=e.length;r=Math.max(0,null==r?0:+r),n=Math.min(i-1,null==n?i-1:+n);for(var a=new Map,o=r;o<=n;o++)if(1&t[o]){var s=K(e[o]);null!==s&&a.set(o,s)}return a},e.getReorderSegments=j,e.getReorderedIndices=Q,e.getReorderedString=function(e,t,r,n){var i=Q(e,t,r,n),a=[].concat(e);return i.forEach(function(r,n){a[n]=(1&t.levels[r]?K(e[r]):null)||e[r]}),a.join("")},e.openingToClosingBracket=m,Object.defineProperty(e,"__esModule",{value:!0}),e}({})};let E=/\bvoid\s+main\s*\(\s*\)\s*{/g;function T(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(e,t){let r=s.ShaderChunk[t];return r?T(r):e})}let x=[];for(let S=0;S<256;S++)x[S]=(S<16?"0":"")+S.toString(16);let I=Object.assign||function(){let e=arguments[0];for(let t=1,r=arguments.length;t<r;t++){let n=arguments[t];if(n)for(let i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e},G=Date.now(),D=new WeakMap,R=new Map,U=1e10;function w(e,t,r,n,i){return(n||i||r)&&(e=e.replace(E,`
${r}
void troikaOrigMain${t}() {`),e+=`
void main() {
  ${n}
  troikaOrigMain${t}();
  ${i}
}`),e}function _(e,t){return"uniforms"===e?void 0:"function"==typeof t?t.toString():t}let k=0,L=new Map;s.DoubleSide;let P=()=>(self.performance||Date).now(),H=M(),O=function(){let e=[],t=0;function r(){let n=P();for(;e.length&&P()-n<5;)e.shift()();t=e.length?setTimeout(r,0):0}return(...n)=>{let i=c();return e.push(()=>{let e=P();try{H.webgl.generateIntoCanvas(...n),i.resolve({timing:P()-e})}catch(t){i.reject(t)}}),t||(t=setTimeout(r,0)),i}}(),J=function(){let e={},t=0;return function(r,n,i,a,o,s,l,u,c,h){let d="TroikaTextSDFGenerator_JS_"+t++%4,f=e[d];return f||(f=e[d]={workerModule:v({name:d,workerId:d,dependencies:[M,P],init(e,t){let r=e().javascript.generate;return function(...e){let n=t(),i=r(...e);return{textureData:i,timing:t()-n}}},getTransferables:e=>[e.textureData.buffer]}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(r,n,i,a,o,s).then(({textureData:e,timing:t})=>{let i=P(),a=new Uint8Array(4*e.length);for(let o=0;o<e.length;o++)a[4*o+h]=e[o];return H.webglUtils.renderImageData(l,a,u,c,r,n,1<<3-h),t+=P()-i,0==--f.requests&&(f.idleTimer=setTimeout(()=>{g[d]&&g[d].forEach(function(e){e()}),B[d]&&(B[d].terminate(),delete B[d])},2e3)),{timing:t}})}}(),N=H.webglUtils.resizeWebGLCanvasWithoutClearing,K=v({name:"Typr Font Parser",dependencies:[/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/ function(){var e,t,r;return"undefined"==typeof window&&(self.window=self),(e={},(t={parse:function(e){var r=t._bin,n=new Uint8Array(e);if("ttcf"==r.readASCII(n,0,4)){var i=4;r.readUshort(n,i),i+=2,r.readUshort(n,i),i+=2;var a=r.readUint(n,i);i+=4;for(var o=[],s=0;s<a;s++){var l=r.readUint(n,i);i+=4,o.push(t._readFont(n,l))}return o}return[t._readFont(n,0)]},_readFont:function(e,r){var n=t._bin,i=r;n.readFixed(e,r),r+=4;var a=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2;for(var o=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],s={_data:e,_offset:i},l={},u=0;u<a;u++){var c=n.readASCII(e,r,4);r+=4,n.readUint(e,r),r+=4;var h=n.readUint(e,r);r+=4;var d=n.readUint(e,r);r+=4,l[c]={offset:h,length:d}}for(u=0;u<o.length;u++){var f=o[u];l[f]&&(s[f.trim()]=t[f.trim()].parse(e,l[f].offset,l[f].length,s))}return s},_tabOffset:function(e,r,n){for(var i=t._bin,a=i.readUshort(e,n+4),o=n+12,s=0;s<a;s++){var l=i.readASCII(e,o,4);o+=4,i.readUint(e,o),o+=4;var u=i.readUint(e,o);if(o+=4,i.readUint(e,o),o+=4,l==r)return u}return 0}})._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,r){return t._bin.readShort(e,r)/16384},readInt:function(e,r){return t._bin._view(e).getInt32(r)},readInt8:function(e,r){return t._bin._view(e).getInt8(r)},readShort:function(e,r){return t._bin._view(e).getInt16(r)},readUshort:function(e,r){return t._bin._view(e).getUint16(r)},readUshorts:function(e,r,n){for(var i=[],a=0;a<n;a++)i.push(t._bin.readUshort(e,r+2*a));return i},readUint:function(e,r){return t._bin._view(e).getUint32(r)},readUint64:function(e,r){return 4294967296*t._bin.readUint(e,r)+t._bin.readUint(e,r+4)},readASCII:function(e,t,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(e[t+i]);return n},readUnicode:function(e,t,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(e[t++]<<8|e[t++]);return n},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,r,n){var i=t._bin._tdec;return i&&0==r&&n==e.length?i.decode(e):t._bin.readASCII(e,r,n)},readBytes:function(e,t,r){for(var n=[],i=0;i<r;i++)n.push(e[t+i]);return n},readASCIIArray:function(e,t,r){for(var n=[],i=0;i<r;i++)n.push(String.fromCharCode(e[t+i]));return n},_view:function(e){return e._dataView||(e._dataView=e.buffer?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(new Uint8Array(e).buffer))}},t._lctf={},t._lctf.parse=function(e,r,n,i,a){var o=t._bin,s={},l=r;o.readFixed(e,r),r+=4;var u=o.readUshort(e,r);r+=2;var c=o.readUshort(e,r);r+=2;var h=o.readUshort(e,r);return r+=2,s.scriptList=t._lctf.readScriptList(e,l+u),s.featureList=t._lctf.readFeatureList(e,l+c),s.lookupList=t._lctf.readLookupList(e,l+h,a),s},t._lctf.readLookupList=function(e,r,n){var i=t._bin,a=r,o=[],s=i.readUshort(e,r);r+=2;for(var l=0;l<s;l++){var u=i.readUshort(e,r);r+=2;var c=t._lctf.readLookupTable(e,a+u,n);o.push(c)}return o},t._lctf.readLookupTable=function(e,r,n){var i=t._bin,a=r,o={tabs:[]};o.ltype=i.readUshort(e,r),r+=2,o.flag=i.readUshort(e,r),r+=2;var s=i.readUshort(e,r);r+=2;for(var l=o.ltype,u=0;u<s;u++){var c=i.readUshort(e,r);r+=2;var h=n(e,l,a+c,o);o.tabs.push(h)}return o},t._lctf.numOfOnes=function(e){for(var t=0,r=0;r<32;r++)0!=(e>>>r&1)&&t++;return t},t._lctf.readClassDef=function(e,r){var n=t._bin,i=[],a=n.readUshort(e,r);if(r+=2,1==a){var o=n.readUshort(e,r);r+=2;var s=n.readUshort(e,r);r+=2;for(var l=0;l<s;l++)i.push(o+l),i.push(o+l),i.push(n.readUshort(e,r)),r+=2}if(2==a){var u=n.readUshort(e,r);for(r+=2,l=0;l<u;l++)i.push(n.readUshort(e,r)),r+=2,i.push(n.readUshort(e,r)),r+=2,i.push(n.readUshort(e,r)),r+=2}return i},t._lctf.getInterval=function(e,t){for(var r=0;r<e.length;r+=3){var n=e[r],i=e[r+1];if(e[r+2],n<=t&&t<=i)return r}return -1},t._lctf.readCoverage=function(e,r){var n=t._bin,i={};i.fmt=n.readUshort(e,r),r+=2;var a=n.readUshort(e,r);return r+=2,1==i.fmt&&(i.tab=n.readUshorts(e,r,a)),2==i.fmt&&(i.tab=n.readUshorts(e,r,3*a)),i},t._lctf.coverageIndex=function(e,r){var n=e.tab;if(1==e.fmt)return n.indexOf(r);if(2==e.fmt){var i=t._lctf.getInterval(n,r);if(-1!=i)return n[i+2]+(r-n[i])}return -1},t._lctf.readFeatureList=function(e,r){var n=t._bin,i=r,a=[],o=n.readUshort(e,r);r+=2;for(var s=0;s<o;s++){var l=n.readASCII(e,r,4);r+=4;var u=n.readUshort(e,r);r+=2;var c=t._lctf.readFeatureTable(e,i+u);c.tag=l.trim(),a.push(c)}return a},t._lctf.readFeatureTable=function(e,r){var n=t._bin,i=r,a={},o=n.readUshort(e,r);r+=2,o>0&&(a.featureParams=i+o);var s=n.readUshort(e,r);r+=2,a.tab=[];for(var l=0;l<s;l++)a.tab.push(n.readUshort(e,r+2*l));return a},t._lctf.readScriptList=function(e,r){var n=t._bin,i=r,a={},o=n.readUshort(e,r);r+=2;for(var s=0;s<o;s++){var l=n.readASCII(e,r,4);r+=4;var u=n.readUshort(e,r);r+=2,a[l.trim()]=t._lctf.readScriptTable(e,i+u)}return a},t._lctf.readScriptTable=function(e,r){var n=t._bin,i=r,a={},o=n.readUshort(e,r);r+=2,a.default=t._lctf.readLangSysTable(e,i+o);var s=n.readUshort(e,r);r+=2;for(var l=0;l<s;l++){var u=n.readASCII(e,r,4);r+=4;var c=n.readUshort(e,r);r+=2,a[u.trim()]=t._lctf.readLangSysTable(e,i+c)}return a},t._lctf.readLangSysTable=function(e,r){var n=t._bin,i={};n.readUshort(e,r),r+=2,i.reqFeature=n.readUshort(e,r),r+=2;var a=n.readUshort(e,r);return r+=2,i.features=n.readUshorts(e,r,a),i},t.CFF={},t.CFF.parse=function(e,r,n){var i=t._bin;(e=new Uint8Array(e.buffer,r,n))[r=0],e[++r],e[++r],e[++r],r++;var a=[];r=t.CFF.readIndex(e,r,a);for(var o=[],s=0;s<a.length-1;s++)o.push(i.readASCII(e,r+a[s],a[s+1]-a[s]));r+=a[a.length-1];var l=[];r=t.CFF.readIndex(e,r,l);var u=[];for(s=0;s<l.length-1;s++)u.push(t.CFF.readDict(e,r+l[s],r+l[s+1]));r+=l[l.length-1];var c=u[0],h=[];r=t.CFF.readIndex(e,r,h);var d=[];for(s=0;s<h.length-1;s++)d.push(i.readASCII(e,r+h[s],h[s+1]-h[s]));if(r+=h[h.length-1],t.CFF.readSubrs(e,r,c),c.CharStrings){r=c.CharStrings,h=[],r=t.CFF.readIndex(e,r,h);var f=[];for(s=0;s<h.length-1;s++)f.push(i.readBytes(e,r+h[s],h[s+1]-h[s]));c.CharStrings=f}if(c.ROS){r=c.FDArray;var p=[];for(r=t.CFF.readIndex(e,r,p),c.FDArray=[],s=0;s<p.length-1;s++){var A=t.CFF.readDict(e,r+p[s],r+p[s+1]);t.CFF._readFDict(e,A,d),c.FDArray.push(A)}r+=p[p.length-1],r=c.FDSelect,c.FDSelect=[];var B=e[r];if(r++,3!=B)throw B;var g=i.readUshort(e,r);for(r+=2,s=0;s<g+1;s++)c.FDSelect.push(i.readUshort(e,r),e[r+2]),r+=3}return c.Encoding&&(c.Encoding=t.CFF.readEncoding(e,c.Encoding,c.CharStrings.length)),c.charset&&(c.charset=t.CFF.readCharset(e,c.charset,c.CharStrings.length)),t.CFF._readFDict(e,c,d),c},t.CFF._readFDict=function(e,r,n){var i;for(var a in r.Private&&(i=r.Private[1],r.Private=t.CFF.readDict(e,i,i+r.Private[0]),r.Private.Subrs&&t.CFF.readSubrs(e,i+r.Private.Subrs,r.Private)),r)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(a)&&(r[a]=n[r[a]-426+35])},t.CFF.readSubrs=function(e,r,n){var i=t._bin,a=[];r=t.CFF.readIndex(e,r,a);var o,s=a.length;o=s<1240?107:s<33900?1131:32768,n.Bias=o,n.Subrs=[];for(var l=0;l<a.length-1;l++)n.Subrs.push(i.readBytes(e,r+a[l],a[l+1]-a[l]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var r=0;r<e.charset.length;r++)if(e.charset[r]==t)return r;return -1},t.CFF.glyphBySE=function(e,r){return r<0||r>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[r])},t.CFF.readEncoding=function(e,r,n){t._bin;var i=[".notdef"],a=e[r];if(r++,0!=a)throw"error: unknown encoding format: "+a;var o=e[r];r++;for(var s=0;s<o;s++)i.push(e[r+s]);return i},t.CFF.readCharset=function(e,r,n){var i=t._bin,a=[".notdef"],o=e[r];if(r++,0==o)for(var s=0;s<n;s++){var l=i.readUshort(e,r);r+=2,a.push(l)}else{if(1!=o&&2!=o)throw"error: format: "+o;for(;a.length<n;){l=i.readUshort(e,r),r+=2;var u=0;for(1==o?(u=e[r],r++):(u=i.readUshort(e,r),r+=2),s=0;s<=u;s++)a.push(l),l++}}return a},t.CFF.readIndex=function(e,r,n){var i=t._bin,a=i.readUshort(e,r)+1,o=e[r+=2];if(r++,1==o)for(var s=0;s<a;s++)n.push(e[r+s]);else if(2==o)for(s=0;s<a;s++)n.push(i.readUshort(e,r+2*s));else if(3==o)for(s=0;s<a;s++)n.push(16777215&i.readUint(e,r+3*s-1));else if(1!=a)throw"unsupported offset size: "+o+", count: "+a;return(r+=a*o)-1},t.CFF.getCharString=function(e,r,n){var i=t._bin,a=e[r],o=e[r+1];e[r+2],e[r+3],e[r+4];var s=1,l=null,u=null;a<=20&&(l=a,s=1),12==a&&(l=100*a+o,s=2),21<=a&&a<=27&&(l=a,s=1),28==a&&(u=i.readShort(e,r+1),s=3),29<=a&&a<=31&&(l=a,s=1),32<=a&&a<=246&&(u=a-139,s=1),247<=a&&a<=250&&(u=256*(a-247)+o+108,s=2),251<=a&&a<=254&&(u=-(256*(a-251))-o-108,s=2),255==a&&(u=i.readInt(e,r+1)/65535,s=5),n.val=null!=u?u:"o"+l,n.size=s},t.CFF.readCharString=function(e,r,n){for(var i=r+n,a=t._bin,o=[];r<i;){var s=e[r],l=e[r+1];e[r+2],e[r+3],e[r+4];var u=1,c=null,h=null;s<=20&&(c=s,u=1),12==s&&(c=100*s+l,u=2),19!=s&&20!=s||(c=s,u=2),21<=s&&s<=27&&(c=s,u=1),28==s&&(h=a.readShort(e,r+1),u=3),29<=s&&s<=31&&(c=s,u=1),32<=s&&s<=246&&(h=s-139,u=1),247<=s&&s<=250&&(h=256*(s-247)+l+108,u=2),251<=s&&s<=254&&(h=-(256*(s-251))-l-108,u=2),255==s&&(h=a.readInt(e,r+1)/65535,u=5),o.push(null!=h?h:"o"+c),r+=u}return o},t.CFF.readDict=function(e,r,n){for(var i=t._bin,a={},o=[];r<n;){var s=e[r],l=e[r+1];e[r+2],e[r+3],e[r+4];var u=1,c=null,h=null;if(28==s&&(h=i.readShort(e,r+1),u=3),29==s&&(h=i.readInt(e,r+1),u=5),32<=s&&s<=246&&(h=s-139,u=1),247<=s&&s<=250&&(h=256*(s-247)+l+108,u=2),251<=s&&s<=254&&(h=-(256*(s-251))-l-108,u=2),255==s)throw h=i.readInt(e,r+1)/65535,u=5,"unknown number";if(30==s){var d=[];for(u=1;;){var f=e[r+u];u++;var p=f>>4,A=15&f;if(15!=p&&d.push(p),15!=A&&d.push(A),15==A)break}for(var B="",g=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],m=0;m<d.length;m++)B+=g[d[m]];h=parseFloat(B)}s<=21&&(c=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],u=1,12==s&&(c=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],u=2)),null!=c?(a[c]=1==o.length?o[0]:o,o=[]):o.push(h),r+=u}return a},t.cmap={},t.cmap.parse=function(e,r,n){e=new Uint8Array(e.buffer,r,n),r=0;var i=t._bin,a={};i.readUshort(e,r),r+=2;var o=i.readUshort(e,r);r+=2;var s=[];a.tables=[];for(var l=0;l<o;l++){var u=i.readUshort(e,r);r+=2;var c=i.readUshort(e,r);r+=2;var h=i.readUint(e,r);r+=4;var d="p"+u+"e"+c,f=s.indexOf(h);if(-1==f){f=a.tables.length,s.push(h);var p,A=i.readUshort(e,h);0==A?p=t.cmap.parse0(e,h):4==A?p=t.cmap.parse4(e,h):6==A?p=t.cmap.parse6(e,h):12==A?p=t.cmap.parse12(e,h):console.debug("unknown format: "+A,u,c,h),a.tables.push(p)}if(null!=a[d])throw"multiple tables for one platform+encoding";a[d]=f}return a},t.cmap.parse0=function(e,r){var n=t._bin,i={};i.format=n.readUshort(e,r),r+=2;var a=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2,i.map=[];for(var o=0;o<a-6;o++)i.map.push(e[r+o]);return i},t.cmap.parse4=function(e,r){var n=t._bin,i=r,a={};a.format=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2;var s=n.readUshort(e,r);r+=2;var l=s/2;a.searchRange=n.readUshort(e,r),r+=2,a.entrySelector=n.readUshort(e,r),r+=2,a.rangeShift=n.readUshort(e,r),r+=2,a.endCount=n.readUshorts(e,r,l),r+=2*l,r+=2,a.startCount=n.readUshorts(e,r,l),r+=2*l,a.idDelta=[];for(var u=0;u<l;u++)a.idDelta.push(n.readShort(e,r)),r+=2;for(a.idRangeOffset=n.readUshorts(e,r,l),r+=2*l,a.glyphIdArray=[];r<i+o;)a.glyphIdArray.push(n.readUshort(e,r)),r+=2;return a},t.cmap.parse6=function(e,r){var n=t._bin,i={};i.format=n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,i.firstCode=n.readUshort(e,r),r+=2;var a=n.readUshort(e,r);r+=2,i.glyphIdArray=[];for(var o=0;o<a;o++)i.glyphIdArray.push(n.readUshort(e,r)),r+=2;return i},t.cmap.parse12=function(e,r){var n=t._bin,i={};i.format=n.readUshort(e,r),r+=2,r+=2,n.readUint(e,r),r+=4,n.readUint(e,r),r+=4;var a=n.readUint(e,r);r+=4,i.groups=[];for(var o=0;o<a;o++){var s=r+12*o,l=n.readUint(e,s+0),u=n.readUint(e,s+4),c=n.readUint(e,s+8);i.groups.push([l,u,c])}return i},t.glyf={},t.glyf.parse=function(e,t,r,n){for(var i=[],a=0;a<n.maxp.numGlyphs;a++)i.push(null);return i},t.glyf._parseGlyf=function(e,r){var n,i=t._bin,a=e._data,o=t._tabOffset(a,"glyf",e._offset)+e.loca[r];if(e.loca[r]==e.loca[r+1])return null;var s={};if(s.noc=i.readShort(a,o),o+=2,s.xMin=i.readShort(a,o),o+=2,s.yMin=i.readShort(a,o),o+=2,s.xMax=i.readShort(a,o),o+=2,s.yMax=i.readShort(a,o),o+=2,s.xMin>=s.xMax||s.yMin>=s.yMax)return null;if(s.noc>0){s.endPts=[];for(var l=0;l<s.noc;l++)s.endPts.push(i.readUshort(a,o)),o+=2;var u=i.readUshort(a,o);if(o+=2,a.length-o<u)return null;s.instructions=i.readBytes(a,o,u),o+=u;var c=s.endPts[s.noc-1]+1;for(l=0,s.flags=[];l<c;l++){var h=a[o];if(o++,s.flags.push(h),0!=(8&h)){var d=a[o];o++;for(var f=0;f<d;f++)s.flags.push(h),l++}}for(l=0,s.xs=[];l<c;l++){var p=0!=(2&s.flags[l]),A=0!=(16&s.flags[l]);p?(s.xs.push(A?a[o]:-a[o]),o++):A?s.xs.push(0):(s.xs.push(i.readShort(a,o)),o+=2)}for(l=0,s.ys=[];l<c;l++)p=0!=(4&s.flags[l]),A=0!=(32&s.flags[l]),p?(s.ys.push(A?a[o]:-a[o]),o++):A?s.ys.push(0):(s.ys.push(i.readShort(a,o)),o+=2);var B=0,g=0;for(l=0;l<c;l++)B+=s.xs[l],g+=s.ys[l],s.xs[l]=B,s.ys[l]=g}else{s.parts=[];do{n=i.readUshort(a,o),o+=2;var m={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(s.parts.push(m),m.glyphIndex=i.readUshort(a,o),o+=2,1&n){var v=i.readShort(a,o);o+=2;var C=i.readShort(a,o);o+=2}else v=i.readInt8(a,o),o++,C=i.readInt8(a,o),o++;2&n?(m.m.tx=v,m.m.ty=C):(m.p1=v,m.p2=C),8&n?(m.m.a=m.m.d=i.readF2dot14(a,o),o+=2):64&n?(m.m.a=i.readF2dot14(a,o),o+=2,m.m.d=i.readF2dot14(a,o),o+=2):128&n&&(m.m.a=i.readF2dot14(a,o),o+=2,m.m.b=i.readF2dot14(a,o),o+=2,m.m.c=i.readF2dot14(a,o),o+=2,m.m.d=i.readF2dot14(a,o),o+=2)}while(32&n);if(256&n){var y=i.readUshort(a,o);for(o+=2,s.instr=[],l=0;l<y;l++)s.instr.push(a[o]),o++}}return s},t.GPOS={},t.GPOS.parse=function(e,r,n,i){return t._lctf.parse(e,r,n,i,t.GPOS.subt)},t.GPOS.subt=function(e,r,n,i){var a=t._bin,o=n,s={};if(s.fmt=a.readUshort(e,n),n+=2,1==r||2==r||3==r||7==r||8==r&&s.fmt<=2){var l=a.readUshort(e,n);n+=2,s.coverage=t._lctf.readCoverage(e,l+o)}if(1==r&&1==s.fmt){var u=a.readUshort(e,n);n+=2;var c=t._lctf.numOfOnes(u);0!=u&&(s.pos=t.GPOS.readValueRecord(e,n,u))}else if(2==r&&s.fmt>=1&&s.fmt<=2){u=a.readUshort(e,n),n+=2;var h=a.readUshort(e,n);n+=2,c=t._lctf.numOfOnes(u);var d=t._lctf.numOfOnes(h);if(1==s.fmt){s.pairsets=[];var f=a.readUshort(e,n);n+=2;for(var p=0;p<f;p++){var A=o+a.readUshort(e,n);n+=2;var B=a.readUshort(e,A);A+=2;for(var g=[],m=0;m<B;m++){var v=a.readUshort(e,A);A+=2,0!=u&&(E=t.GPOS.readValueRecord(e,A,u),A+=2*c),0!=h&&(T=t.GPOS.readValueRecord(e,A,h),A+=2*d),g.push({gid2:v,val1:E,val2:T})}s.pairsets.push(g)}}if(2==s.fmt){var C=a.readUshort(e,n);n+=2;var y=a.readUshort(e,n);n+=2;var b=a.readUshort(e,n);n+=2;var M=a.readUshort(e,n);for(n+=2,s.classDef1=t._lctf.readClassDef(e,o+C),s.classDef2=t._lctf.readClassDef(e,o+y),s.matrix=[],p=0;p<b;p++){var F=[];for(m=0;m<M;m++){var E=null,T=null;0!=u&&(E=t.GPOS.readValueRecord(e,n,u),n+=2*c),0!=h&&(T=t.GPOS.readValueRecord(e,n,h),n+=2*d),F.push({val1:E,val2:T})}s.matrix.push(F)}}}else{if(9==r&&1==s.fmt){var x=a.readUshort(e,n);n+=2;var S=a.readUint(e,n);if(n+=4,9==i.ltype)i.ltype=x;else if(i.ltype!=x)throw"invalid extension substitution";return t.GPOS.subt(e,i.ltype,o+S)}console.debug("unsupported GPOS table LookupType",r,"format",s.fmt)}return s},t.GPOS.readValueRecord=function(e,r,n){var i=t._bin,a=[];return a.push(1&n?i.readShort(e,r):0),r+=1&n?2:0,a.push(2&n?i.readShort(e,r):0),r+=2&n?2:0,a.push(4&n?i.readShort(e,r):0),r+=4&n?2:0,a.push(8&n?i.readShort(e,r):0),r+=8&n?2:0,a},t.GSUB={},t.GSUB.parse=function(e,r,n,i){return t._lctf.parse(e,r,n,i,t.GSUB.subt)},t.GSUB.subt=function(e,r,n,i){var a=t._bin,o=n,s={};if(s.fmt=a.readUshort(e,n),n+=2,1!=r&&4!=r&&5!=r&&6!=r)return null;if(1==r||4==r||5==r&&s.fmt<=2||6==r&&s.fmt<=2){var l=a.readUshort(e,n);n+=2,s.coverage=t._lctf.readCoverage(e,o+l)}if(1==r&&s.fmt>=1&&s.fmt<=2){if(1==s.fmt)s.delta=a.readShort(e,n),n+=2;else if(2==s.fmt){var u=a.readUshort(e,n);n+=2,s.newg=a.readUshorts(e,n,u),n+=2*s.newg.length}}else if(4==r){s.vals=[],u=a.readUshort(e,n),n+=2;for(var c=0;c<u;c++){var h=a.readUshort(e,n);n+=2,s.vals.push(t.GSUB.readLigatureSet(e,o+h))}}else if(5==r&&2==s.fmt){if(2==s.fmt){var d=a.readUshort(e,n);n+=2,s.cDef=t._lctf.readClassDef(e,o+d),s.scset=[];var f=a.readUshort(e,n);for(n+=2,c=0;c<f;c++){var p=a.readUshort(e,n);n+=2,s.scset.push(0==p?null:t.GSUB.readSubClassSet(e,o+p))}}}else if(6==r&&3==s.fmt){if(3==s.fmt){for(c=0;c<3;c++){u=a.readUshort(e,n),n+=2;for(var A=[],B=0;B<u;B++)A.push(t._lctf.readCoverage(e,o+a.readUshort(e,n+2*B)));n+=2*u,0==c&&(s.backCvg=A),1==c&&(s.inptCvg=A),2==c&&(s.ahedCvg=A)}u=a.readUshort(e,n),n+=2,s.lookupRec=t.GSUB.readSubstLookupRecords(e,n,u)}}else{if(7==r&&1==s.fmt){var g=a.readUshort(e,n);n+=2;var m=a.readUint(e,n);if(n+=4,9==i.ltype)i.ltype=g;else if(i.ltype!=g)throw"invalid extension substitution";return t.GSUB.subt(e,i.ltype,o+m)}console.debug("unsupported GSUB table LookupType",r,"format",s.fmt)}return s},t.GSUB.readSubClassSet=function(e,r){var n=t._bin.readUshort,i=r,a=[],o=n(e,r);r+=2;for(var s=0;s<o;s++){var l=n(e,r);r+=2,a.push(t.GSUB.readSubClassRule(e,i+l))}return a},t.GSUB.readSubClassRule=function(e,r){var n=t._bin.readUshort,i={},a=n(e,r),o=n(e,r+=2);r+=2,i.input=[];for(var s=0;s<a-1;s++)i.input.push(n(e,r)),r+=2;return i.substLookupRecords=t.GSUB.readSubstLookupRecords(e,r,o),i},t.GSUB.readSubstLookupRecords=function(e,r,n){for(var i=t._bin.readUshort,a=[],o=0;o<n;o++)a.push(i(e,r),i(e,r+2)),r+=4;return a},t.GSUB.readChainSubClassSet=function(e,r){var n=t._bin,i=r,a=[],o=n.readUshort(e,r);r+=2;for(var s=0;s<o;s++){var l=n.readUshort(e,r);r+=2,a.push(t.GSUB.readChainSubClassRule(e,i+l))}return a},t.GSUB.readChainSubClassRule=function(e,r){for(var n=t._bin,i={},a=["backtrack","input","lookahead"],o=0;o<a.length;o++){var s=n.readUshort(e,r);r+=2,1==o&&s--,i[a[o]]=n.readUshorts(e,r,s),r+=2*i[a[o]].length}return s=n.readUshort(e,r),r+=2,i.subst=n.readUshorts(e,r,2*s),r+=2*i.subst.length,i},t.GSUB.readLigatureSet=function(e,r){var n=t._bin,i=r,a=[],o=n.readUshort(e,r);r+=2;for(var s=0;s<o;s++){var l=n.readUshort(e,r);r+=2,a.push(t.GSUB.readLigature(e,i+l))}return a},t.GSUB.readLigature=function(e,r){var n=t._bin,i={chain:[]};i.nglyph=n.readUshort(e,r),r+=2;var a=n.readUshort(e,r);r+=2;for(var o=0;o<a-1;o++)i.chain.push(n.readUshort(e,r)),r+=2;return i},t.head={},t.head.parse=function(e,r,n){var i=t._bin,a={};return i.readFixed(e,r),r+=4,a.fontRevision=i.readFixed(e,r),r+=4,i.readUint(e,r),r+=4,i.readUint(e,r),r+=4,a.flags=i.readUshort(e,r),r+=2,a.unitsPerEm=i.readUshort(e,r),r+=2,a.created=i.readUint64(e,r),r+=8,a.modified=i.readUint64(e,r),r+=8,a.xMin=i.readShort(e,r),r+=2,a.yMin=i.readShort(e,r),r+=2,a.xMax=i.readShort(e,r),r+=2,a.yMax=i.readShort(e,r),r+=2,a.macStyle=i.readUshort(e,r),r+=2,a.lowestRecPPEM=i.readUshort(e,r),r+=2,a.fontDirectionHint=i.readShort(e,r),r+=2,a.indexToLocFormat=i.readShort(e,r),r+=2,a.glyphDataFormat=i.readShort(e,r),r+=2,a},t.hhea={},t.hhea.parse=function(e,r,n){var i=t._bin,a={};return i.readFixed(e,r),r+=4,a.ascender=i.readShort(e,r),r+=2,a.descender=i.readShort(e,r),r+=2,a.lineGap=i.readShort(e,r),r+=2,a.advanceWidthMax=i.readUshort(e,r),r+=2,a.minLeftSideBearing=i.readShort(e,r),r+=2,a.minRightSideBearing=i.readShort(e,r),r+=2,a.xMaxExtent=i.readShort(e,r),r+=2,a.caretSlopeRise=i.readShort(e,r),r+=2,a.caretSlopeRun=i.readShort(e,r),r+=2,a.caretOffset=i.readShort(e,r),r+=2,r+=8,a.metricDataFormat=i.readShort(e,r),r+=2,a.numberOfHMetrics=i.readUshort(e,r),r+=2,a},t.hmtx={},t.hmtx.parse=function(e,r,n,i){for(var a=t._bin,o={aWidth:[],lsBearing:[]},s=0,l=0,u=0;u<i.maxp.numGlyphs;u++)u<i.hhea.numberOfHMetrics&&(s=a.readUshort(e,r),r+=2,l=a.readShort(e,r),r+=2),o.aWidth.push(s),o.lsBearing.push(l);return o},t.kern={},t.kern.parse=function(e,r,n,i){var a=t._bin,o=a.readUshort(e,r);if(r+=2,1==o)return t.kern.parseV1(e,r-2,n,i);var s=a.readUshort(e,r);r+=2;for(var l={glyph1:[],rval:[]},u=0;u<s;u++){r+=2,n=a.readUshort(e,r),r+=2;var c=a.readUshort(e,r);r+=2;var h=c>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;r=t.kern.readFormat0(e,r,l)}return l},t.kern.parseV1=function(e,r,n,i){var a=t._bin;a.readFixed(e,r),r+=4;var o=a.readUint(e,r);r+=4;for(var s={glyph1:[],rval:[]},l=0;l<o;l++){a.readUint(e,r),r+=4;var u=a.readUshort(e,r);r+=2,a.readUshort(e,r),r+=2;var c=u>>>8;if(0!=(c&=15))throw"unknown kern table format: "+c;r=t.kern.readFormat0(e,r,s)}return s},t.kern.readFormat0=function(e,r,n){var i=t._bin,a=-1,o=i.readUshort(e,r);r+=2,i.readUshort(e,r),r+=2,i.readUshort(e,r),r+=2,i.readUshort(e,r),r+=2;for(var s=0;s<o;s++){var l=i.readUshort(e,r);r+=2;var u=i.readUshort(e,r);r+=2;var c=i.readShort(e,r);r+=2,l!=a&&(n.glyph1.push(l),n.rval.push({glyph2:[],vals:[]}));var h=n.rval[n.rval.length-1];h.glyph2.push(u),h.vals.push(c),a=l}return r},t.loca={},t.loca.parse=function(e,r,n,i){var a=t._bin,o=[],s=i.head.indexToLocFormat,l=i.maxp.numGlyphs+1;if(0==s)for(var u=0;u<l;u++)o.push(a.readUshort(e,r+(u<<1))<<1);if(1==s)for(u=0;u<l;u++)o.push(a.readUint(e,r+(u<<2)));return o},t.maxp={},t.maxp.parse=function(e,r,n){var i=t._bin,a={},o=i.readUint(e,r);return r+=4,a.numGlyphs=i.readUshort(e,r),r+=2,65536==o&&(a.maxPoints=i.readUshort(e,r),r+=2,a.maxContours=i.readUshort(e,r),r+=2,a.maxCompositePoints=i.readUshort(e,r),r+=2,a.maxCompositeContours=i.readUshort(e,r),r+=2,a.maxZones=i.readUshort(e,r),r+=2,a.maxTwilightPoints=i.readUshort(e,r),r+=2,a.maxStorage=i.readUshort(e,r),r+=2,a.maxFunctionDefs=i.readUshort(e,r),r+=2,a.maxInstructionDefs=i.readUshort(e,r),r+=2,a.maxStackElements=i.readUshort(e,r),r+=2,a.maxSizeOfInstructions=i.readUshort(e,r),r+=2,a.maxComponentElements=i.readUshort(e,r),r+=2,a.maxComponentDepth=i.readUshort(e,r),r+=2),a},t.name={},t.name.parse=function(e,r,n){var i=t._bin,a={};i.readUshort(e,r),r+=2;var o=i.readUshort(e,r);r+=2,i.readUshort(e,r);for(var s,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],u=r+=2,c=0;c<o;c++){var h=i.readUshort(e,r);r+=2;var d=i.readUshort(e,r);r+=2;var f=i.readUshort(e,r);r+=2;var p=i.readUshort(e,r);r+=2;var A=i.readUshort(e,r);r+=2;var B=i.readUshort(e,r);r+=2;var g,m=l[p],v=u+12*o+B;if(0==h)g=i.readUnicode(e,v,A/2);else if(3==h&&0==d)g=i.readUnicode(e,v,A/2);else if(0==d)g=i.readASCII(e,v,A);else if(1==d)g=i.readUnicode(e,v,A/2);else if(3==d)g=i.readUnicode(e,v,A/2);else{if(1!=h)throw"unknown encoding "+d+", platformID: "+h;g=i.readASCII(e,v,A),console.debug("reading unknown MAC encoding "+d+" as ASCII")}var C="p"+h+","+f.toString(16);null==a[C]&&(a[C]={}),a[C][void 0!==m?m:p]=g,a[C]._lang=f}for(var y in a)if(null!=a[y].postScriptName&&1033==a[y]._lang)return a[y];for(var y in a)if(null!=a[y].postScriptName&&0==a[y]._lang)return a[y];for(var y in a)if(null!=a[y].postScriptName&&3084==a[y]._lang)return a[y];for(var y in a)if(null!=a[y].postScriptName)return a[y];for(var y in a){s=y;break}return console.debug("returning name table with languageID "+a[s]._lang),a[s]},t["OS/2"]={},t["OS/2"].parse=function(e,r,n){var i=t._bin.readUshort(e,r);r+=2;var a={};if(0==i)t["OS/2"].version0(e,r,a);else if(1==i)t["OS/2"].version1(e,r,a);else if(2==i||3==i||4==i)t["OS/2"].version2(e,r,a);else{if(5!=i)throw"unknown OS/2 table version: "+i;t["OS/2"].version5(e,r,a)}return a},t["OS/2"].version0=function(e,r,n){var i=t._bin;return n.xAvgCharWidth=i.readShort(e,r),r+=2,n.usWeightClass=i.readUshort(e,r),r+=2,n.usWidthClass=i.readUshort(e,r),r+=2,n.fsType=i.readUshort(e,r),r+=2,n.ySubscriptXSize=i.readShort(e,r),r+=2,n.ySubscriptYSize=i.readShort(e,r),r+=2,n.ySubscriptXOffset=i.readShort(e,r),r+=2,n.ySubscriptYOffset=i.readShort(e,r),r+=2,n.ySuperscriptXSize=i.readShort(e,r),r+=2,n.ySuperscriptYSize=i.readShort(e,r),r+=2,n.ySuperscriptXOffset=i.readShort(e,r),r+=2,n.ySuperscriptYOffset=i.readShort(e,r),r+=2,n.yStrikeoutSize=i.readShort(e,r),r+=2,n.yStrikeoutPosition=i.readShort(e,r),r+=2,n.sFamilyClass=i.readShort(e,r),r+=2,n.panose=i.readBytes(e,r,10),r+=10,n.ulUnicodeRange1=i.readUint(e,r),r+=4,n.ulUnicodeRange2=i.readUint(e,r),r+=4,n.ulUnicodeRange3=i.readUint(e,r),r+=4,n.ulUnicodeRange4=i.readUint(e,r),r+=4,n.achVendID=[i.readInt8(e,r),i.readInt8(e,r+1),i.readInt8(e,r+2),i.readInt8(e,r+3)],r+=4,n.fsSelection=i.readUshort(e,r),r+=2,n.usFirstCharIndex=i.readUshort(e,r),r+=2,n.usLastCharIndex=i.readUshort(e,r),r+=2,n.sTypoAscender=i.readShort(e,r),r+=2,n.sTypoDescender=i.readShort(e,r),r+=2,n.sTypoLineGap=i.readShort(e,r),r+=2,n.usWinAscent=i.readUshort(e,r),r+=2,n.usWinDescent=i.readUshort(e,r),r+=2},t["OS/2"].version1=function(e,r,n){var i=t._bin;return r=t["OS/2"].version0(e,r,n),n.ulCodePageRange1=i.readUint(e,r),r+=4,n.ulCodePageRange2=i.readUint(e,r),r+=4},t["OS/2"].version2=function(e,r,n){var i=t._bin;return r=t["OS/2"].version1(e,r,n),n.sxHeight=i.readShort(e,r),r+=2,n.sCapHeight=i.readShort(e,r),r+=2,n.usDefault=i.readUshort(e,r),r+=2,n.usBreak=i.readUshort(e,r),r+=2,n.usMaxContext=i.readUshort(e,r),r+=2},t["OS/2"].version5=function(e,r,n){var i=t._bin;return r=t["OS/2"].version2(e,r,n),n.usLowerOpticalPointSize=i.readUshort(e,r),r+=2,n.usUpperOpticalPointSize=i.readUshort(e,r),r+=2},t.post={},t.post.parse=function(e,r,n){var i=t._bin,a={};return a.version=i.readFixed(e,r),r+=4,a.italicAngle=i.readFixed(e,r),r+=4,a.underlinePosition=i.readShort(e,r),r+=2,a.underlineThickness=i.readShort(e,r),r+=2,a},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var r=e.cmap,n=-1;if(null!=r.p0e4?n=r.p0e4:null!=r.p3e1?n=r.p3e1:null!=r.p1e0?n=r.p1e0:null!=r.p0e3&&(n=r.p0e3),-1==n)throw"no familiar platform and encoding!";var i=r.tables[n];if(0==i.format)return t>=i.map.length?0:i.map[t];if(4==i.format){for(var a=-1,o=0;o<i.endCount.length;o++)if(t<=i.endCount[o]){a=o;break}return -1==a||i.startCount[a]>t?0:65535&(0!=i.idRangeOffset[a]?i.glyphIdArray[t-i.startCount[a]+(i.idRangeOffset[a]>>1)-(i.idRangeOffset.length-a)]:t+i.idDelta[a])}if(12==i.format){if(t>i.groups[i.groups.length-1][1])return 0;for(o=0;o<i.groups.length;o++){var s=i.groups[o];if(s[0]<=t&&t<=s[1])return s[2]+(t-s[0])}return 0}throw"unknown cmap table format "+i.format},t.U.glyphToPath=function(e,r){var n={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[r]){var i=e.SVG.entries[r];return null==i?n:("string"==typeof i&&(i=t.SVG.toPath(i),e.SVG.entries[r]=i),i)}if(e.CFF){var a={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},o=e.CFF,s=e.CFF.Private;if(o.ROS){for(var l=0;o.FDSelect[l+2]<=r;)l+=2;s=o.FDArray[o.FDSelect[l+1]].Private}t.U._drawCFF(e.CFF.CharStrings[r],a,o,s,n)}else e.glyf&&t.U._drawGlyf(r,e,n);return n},t.U._drawGlyf=function(e,r,n){var i=r.glyf[e];null==i&&(i=r.glyf[e]=t.glyf._parseGlyf(r,e)),null!=i&&(i.noc>-1?t.U._simpleGlyph(i,n):t.U._compoGlyph(i,r,n))},t.U._simpleGlyph=function(e,r){for(var n=0;n<e.noc;n++){for(var i=0==n?0:e.endPts[n-1]+1,a=e.endPts[n],o=i;o<=a;o++){var s=o==i?a:o-1,l=o==a?i:o+1,u=1&e.flags[o],c=1&e.flags[s],h=1&e.flags[l],d=e.xs[o],f=e.ys[o];if(o==i){if(u){if(!c){t.U.P.moveTo(r,d,f);continue}t.U.P.moveTo(r,e.xs[s],e.ys[s])}else c?t.U.P.moveTo(r,e.xs[s],e.ys[s]):t.U.P.moveTo(r,(e.xs[s]+d)/2,(e.ys[s]+f)/2)}u?c&&t.U.P.lineTo(r,d,f):h?t.U.P.qcurveTo(r,d,f,e.xs[l],e.ys[l]):t.U.P.qcurveTo(r,d,f,(d+e.xs[l])/2,(f+e.ys[l])/2)}t.U.P.closePath(r)}},t.U._compoGlyph=function(e,r,n){for(var i=0;i<e.parts.length;i++){var a={cmds:[],crds:[]},o=e.parts[i];t.U._drawGlyf(o.glyphIndex,r,a);for(var s=o.m,l=0;l<a.crds.length;l+=2){var u=a.crds[l],c=a.crds[l+1];n.crds.push(u*s.a+c*s.b+s.tx),n.crds.push(u*s.c+c*s.d+s.ty)}for(l=0;l<a.cmds.length;l++)n.cmds.push(a.cmds[l])}},t.U._getGlyphClass=function(e,r){var n=t._lctf.getInterval(r,e);return -1==n?0:r[n+2]},t.U.getPairAdjustment=function(e,r,n){var i=0,a=!1;if(e.GPOS)for(var o=e.GPOS,s=o.lookupList,l=o.featureList,u=[],c=0;c<l.length;c++){var h=l[c];if("kern"==h.tag){a=!0;for(var d=0;d<h.tab.length;d++)if(!u[h.tab[d]]){u[h.tab[d]]=!0;for(var f=s[h.tab[d]],p=0;p<f.tabs.length;p++)if(null!=f.tabs[p]){var A,B,g=f.tabs[p];if(!g.coverage||-1!=(B=t._lctf.coverageIndex(g.coverage,r))){if(1==f.ltype);else if(2==f.ltype){if(1==g.fmt){var m=g.pairsets[B];for(c=0;c<m.length;c++)m[c].gid2==n&&(A=m[c])}else if(2==g.fmt){var v=t.U._getGlyphClass(r,g.classDef1),C=t.U._getGlyphClass(n,g.classDef2);A=g.matrix[v][C]}A&&A.val1&&A.val1[2]&&(i+=A.val1[2]),A&&A.val2&&A.val2[0]&&(i+=A.val2[0])}}}}}}if(e.kern&&!a){var y=e.kern.glyph1.indexOf(r);if(-1!=y){var b=e.kern.rval[y].glyph2.indexOf(n);-1!=b&&(i+=e.kern.rval[y].vals[b])}}return i},t.U._applySubs=function(e,r,n,i){for(var a=e.length-r-1,o=0;o<n.tabs.length;o++)if(null!=n.tabs[o]){var s,l=n.tabs[o];if(!l.coverage||-1!=(s=t._lctf.coverageIndex(l.coverage,e[r]))){if(1==n.ltype)e[r],1==l.fmt?e[r]=e[r]+l.delta:e[r]=l.newg[s];else if(4==n.ltype)for(var u=l.vals[s],c=0;c<u.length;c++){var h=u[c],d=h.chain.length;if(!(d>a)){for(var f=!0,p=0,A=0;A<d;A++){for(;-1==e[r+p+(1+A)];)p++;h.chain[A]!=e[r+p+(1+A)]&&(f=!1)}if(f){for(A=0,e[r]=h.nglyph;A<d+p;A++)e[r+A+1]=-1;break}}}else if(5==n.ltype&&2==l.fmt)for(var B=t._lctf.getInterval(l.cDef,e[r]),g=l.cDef[B+2],m=l.scset[g],v=0;v<m.length;v++){var C=m[v],y=C.input;if(!(y.length>a)){for(f=!0,A=0;A<y.length;A++){var b=t._lctf.getInterval(l.cDef,e[r+1+A]);if(-1==B&&l.cDef[b+2]!=y[A]){f=!1;break}}if(f){var M=C.substLookupRecords;for(c=0;c<M.length;c+=2)M[c],M[c+1]}}}else if(6==n.ltype&&3==l.fmt){if(!t.U._glsCovered(e,l.backCvg,r-l.backCvg.length)||!t.U._glsCovered(e,l.inptCvg,r)||!t.U._glsCovered(e,l.ahedCvg,r+l.inptCvg.length))continue;var F=l.lookupRec;for(v=0;v<F.length;v+=2){B=F[v];var E=i[F[v+1]];t.U._applySubs(e,r+B,E,i)}}}}},t.U._glsCovered=function(e,r,n){for(var i=0;i<r.length;i++)if(-1==t._lctf.coverageIndex(r[i],e[n+i]))return!1;return!0},t.U.glyphsToPath=function(e,r,n){for(var i={cmds:[],crds:[]},a=0,o=0;o<r.length;o++){var s=r[o];if(-1!=s){for(var l=o<r.length-1&&-1!=r[o+1]?r[o+1]:0,u=t.U.glyphToPath(e,s),c=0;c<u.crds.length;c+=2)i.crds.push(u.crds[c]+a),i.crds.push(u.crds[c+1]);for(n&&i.cmds.push(n),c=0;c<u.cmds.length;c++)i.cmds.push(u.cmds[c]);n&&i.cmds.push("X"),a+=e.hmtx.aWidth[s],o<r.length-1&&(a+=t.U.getPairAdjustment(e,s,l))}}return i},t.U.P={},t.U.P.moveTo=function(e,t,r){e.cmds.push("M"),e.crds.push(t,r)},t.U.P.lineTo=function(e,t,r){e.cmds.push("L"),e.crds.push(t,r)},t.U.P.curveTo=function(e,t,r,n,i,a,o){e.cmds.push("C"),e.crds.push(t,r,n,i,a,o)},t.U.P.qcurveTo=function(e,t,r,n,i){e.cmds.push("Q"),e.crds.push(t,r,n,i)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,r,n,i,a){for(var o=r.stack,s=r.nStems,l=r.haveWidth,u=r.width,c=r.open,h=0,d=r.x,f=r.y,p=0,A=0,B=0,g=0,m=0,v=0,C=0,y=0,b=0,M=0,F={val:0,size:0};h<e.length;){t.CFF.getCharString(e,h,F);var E=F.val;if(h+=F.size,"o1"==E||"o18"==E)o.length%2==0||l||(u=o.shift()+i.nominalWidthX),s+=o.length>>1,o.length=0,l=!0;else if("o3"==E||"o23"==E)o.length%2==0||l||(u=o.shift()+i.nominalWidthX),s+=o.length>>1,o.length=0,l=!0;else if("o4"==E)o.length>1&&!l&&(u=o.shift()+i.nominalWidthX,l=!0),c&&t.U.P.closePath(a),f+=o.pop(),t.U.P.moveTo(a,d,f),c=!0;else if("o5"==E)for(;o.length>0;)d+=o.shift(),f+=o.shift(),t.U.P.lineTo(a,d,f);else if("o6"==E||"o7"==E)for(var T=o.length,x="o6"==E,S=0;S<T;S++){var I=o.shift();x?d+=I:f+=I,x=!x,t.U.P.lineTo(a,d,f)}else if("o8"==E||"o24"==E){T=o.length;for(var G=0;G+6<=T;)p=d+o.shift(),A=f+o.shift(),B=p+o.shift(),g=A+o.shift(),d=B+o.shift(),f=g+o.shift(),t.U.P.curveTo(a,p,A,B,g,d,f),G+=6;"o24"==E&&(d+=o.shift(),f+=o.shift(),t.U.P.lineTo(a,d,f))}else{if("o11"==E)break;if("o1234"==E||"o1235"==E||"o1236"==E||"o1237"==E)"o1234"==E&&(A=f,B=(p=d+o.shift())+o.shift(),M=g=A+o.shift(),v=g,y=f,d=(C=(m=(b=B+o.shift())+o.shift())+o.shift())+o.shift(),t.U.P.curveTo(a,p,A,B,g,b,M),t.U.P.curveTo(a,m,v,C,y,d,f)),"o1235"==E&&(p=d+o.shift(),A=f+o.shift(),B=p+o.shift(),g=A+o.shift(),b=B+o.shift(),M=g+o.shift(),m=b+o.shift(),v=M+o.shift(),C=m+o.shift(),y=v+o.shift(),d=C+o.shift(),f=y+o.shift(),o.shift(),t.U.P.curveTo(a,p,A,B,g,b,M),t.U.P.curveTo(a,m,v,C,y,d,f)),"o1236"==E&&(p=d+o.shift(),A=f+o.shift(),B=p+o.shift(),M=g=A+o.shift(),v=g,C=(m=(b=B+o.shift())+o.shift())+o.shift(),y=v+o.shift(),d=C+o.shift(),t.U.P.curveTo(a,p,A,B,g,b,M),t.U.P.curveTo(a,m,v,C,y,d,f)),"o1237"==E&&(p=d+o.shift(),A=f+o.shift(),B=p+o.shift(),g=A+o.shift(),b=B+o.shift(),M=g+o.shift(),m=b+o.shift(),v=M+o.shift(),Math.abs((C=m+o.shift())-d)>Math.abs((y=v+o.shift())-f)?d=C+o.shift():f=y+o.shift(),t.U.P.curveTo(a,p,A,B,g,b,M),t.U.P.curveTo(a,m,v,C,y,d,f));else if("o14"==E){if(o.length>0&&!l&&(u=o.shift()+n.nominalWidthX,l=!0),4==o.length){var D=o.shift(),R=o.shift(),U=o.shift(),w=o.shift(),_=t.CFF.glyphBySE(n,U),k=t.CFF.glyphBySE(n,w);t.U._drawCFF(n.CharStrings[_],r,n,i,a),r.x=D,r.y=R,t.U._drawCFF(n.CharStrings[k],r,n,i,a)}c&&(t.U.P.closePath(a),c=!1)}else if("o19"==E||"o20"==E)o.length%2==0||l||(u=o.shift()+i.nominalWidthX),s+=o.length>>1,o.length=0,l=!0,h+=s+7>>3;else if("o21"==E)o.length>2&&!l&&(u=o.shift()+i.nominalWidthX,l=!0),f+=o.pop(),d+=o.pop(),c&&t.U.P.closePath(a),t.U.P.moveTo(a,d,f),c=!0;else if("o22"==E)o.length>1&&!l&&(u=o.shift()+i.nominalWidthX,l=!0),d+=o.pop(),c&&t.U.P.closePath(a),t.U.P.moveTo(a,d,f),c=!0;else if("o25"==E){for(;o.length>6;)d+=o.shift(),f+=o.shift(),t.U.P.lineTo(a,d,f);p=d+o.shift(),A=f+o.shift(),B=p+o.shift(),g=A+o.shift(),d=B+o.shift(),f=g+o.shift(),t.U.P.curveTo(a,p,A,B,g,d,f)}else if("o26"==E)for(o.length%2&&(d+=o.shift());o.length>0;)p=d,A=f+o.shift(),d=B=p+o.shift(),f=(g=A+o.shift())+o.shift(),t.U.P.curveTo(a,p,A,B,g,d,f);else if("o27"==E)for(o.length%2&&(f+=o.shift());o.length>0;)A=f,B=(p=d+o.shift())+o.shift(),g=A+o.shift(),d=B+o.shift(),f=g,t.U.P.curveTo(a,p,A,B,g,d,f);else if("o10"==E||"o29"==E){var L="o10"==E?i:n;if(0==o.length)console.debug("error: empty stack");else{var P=o.pop(),H=L.Subrs[P+L.Bias];r.x=d,r.y=f,r.nStems=s,r.haveWidth=l,r.width=u,r.open=c,t.U._drawCFF(H,r,n,i,a),d=r.x,f=r.y,s=r.nStems,l=r.haveWidth,u=r.width,c=r.open}}else if("o30"==E||"o31"==E){var O=o.length,J=(G=0,"o31"==E);for(G+=O-(T=-3&O);G<T;)J?(A=f,B=(p=d+o.shift())+o.shift(),f=(g=A+o.shift())+o.shift(),T-G==5?(d=B+o.shift(),G++):d=B,J=!1):(p=d,A=f+o.shift(),B=p+o.shift(),g=A+o.shift(),d=B+o.shift(),T-G==5?(f=g+o.shift(),G++):f=g,J=!0),t.U.P.curveTo(a,p,A,B,g,d,f),G+=4}else{if("o"==(E+"").charAt(0))throw console.debug("Unknown operation: "+E,e),E;o.push(E)}}}r.x=d,r.y=f,r.nStems=s,r.haveWidth=l,r.width=u,r.open=c},r=t,e.Typr=r,e.default={Typr:r},Object.defineProperty(e,"__esModule",{value:!0}),e).Typr},/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/ function(){return function(e){var t=Uint8Array,r=Uint16Array,n=Uint32Array,i=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(e,t){for(var i=new r(31),a=0;a<31;++a)i[a]=t+=1<<e[a-1];var o=new n(i[30]);for(a=1;a<30;++a)for(var s=i[a];s<i[a+1];++s)o[s]=s-i[a]<<5|a;return[i,o]},l=s(i,2),u=l[0],c=l[1];u[28]=258,c[258]=28;for(var h=s(a,0)[0],d=new r(32768),f=0;f<32768;++f){var p=(43690&f)>>>1|(21845&f)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,d[f]=((65280&p)>>>8|(255&p)<<8)>>>1}var A=function(e,t,n){for(var i=e.length,a=0,o=new r(t);a<i;++a)++o[e[a]-1];var s,l=new r(t);for(a=0;a<t;++a)l[a]=l[a-1]+o[a-1]<<1;if(n){s=new r(1<<t);var u=15-t;for(a=0;a<i;++a)if(e[a])for(var c=a<<4|e[a],h=t-e[a],f=l[e[a]-1]++<<h,p=f|(1<<h)-1;f<=p;++f)s[d[f]>>>u]=c}else for(s=new r(i),a=0;a<i;++a)e[a]&&(s[a]=d[l[e[a]-1]++]>>>15-e[a]);return s},B=new t(288);for(f=0;f<144;++f)B[f]=8;for(f=144;f<256;++f)B[f]=9;for(f=256;f<280;++f)B[f]=7;for(f=280;f<288;++f)B[f]=8;var g=new t(32);for(f=0;f<32;++f)g[f]=5;var m=A(B,9,1),v=A(g,5,1),C=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},y=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&r},b=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],F=function(e,t,r){var n=Error(t||M[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,F),!r)throw n;return n},E=function(e,s,l){var c,d,f,p,B=e.length;if(!B||l&&!l.l&&B<5)return s||new t(0);var g=!s||l,M=!l||l.i;l||(l={}),s||(s=new t(3*B));var E,T=function(e){var r=s.length;if(e>r){var n=new t(Math.max(2*r,e));n.set(s),s=n}},x=l.f||0,S=l.p||0,I=l.b||0,G=l.l,D=l.d,R=l.m,U=l.n,w=8*B;do{if(!G){l.f=x=y(e,S,1);var _=y(e,S+1,3);if(S+=3,!_){var k=e[(W=((E=S)/8|0)+(7&E&&1)+4)-4]|e[W-3]<<8,L=W+k;if(L>B){M&&F(0);break}g&&T(I+k),s.set(e.subarray(W,L),I),l.b=I+=k,l.p=S=8*L;continue}if(1==_)G=m,D=v,R=9,U=5;else if(2==_){var P=y(e,S,31)+257,H=y(e,S+10,15)+4,O=P+y(e,S+5,31)+1;S+=14;for(var J=new t(O),N=new t(19),K=0;K<H;++K)N[o[K]]=y(e,S+3*K,7);S+=3*H;var j=C(N),Q=(1<<j)-1,X=A(N,j,1);for(K=0;K<O;){var W,V=X[y(e,S,Q)];if(S+=15&V,(W=V>>>4)<16)J[K++]=W;else{var Y=0,Z=0;for(16==W?(Z=3+y(e,S,3),S+=2,Y=J[K-1]):17==W?(Z=3+y(e,S,7),S+=3):18==W&&(Z=11+y(e,S,127),S+=7);Z--;)J[K++]=Y}}var z=J.subarray(0,P),q=J.subarray(P);R=C(z),U=C(q),G=A(z,R,1),D=A(q,U,1)}else F(1);if(S>w){M&&F(0);break}}g&&T(I+131072);for(var $=(1<<R)-1,ee=(1<<U)-1,et=S;;et=S){var er=(Y=G[b(e,S)&$])>>>4;if((S+=15&Y)>w){M&&F(0);break}if(Y||F(2),er<256)s[I++]=er;else{if(256==er){et=S,G=null;break}var en=er-254;if(er>264){var ei=i[K=er-257];en=y(e,S,(1<<ei)-1)+u[K],S+=ei}var ea=D[b(e,S)&ee],eo=ea>>>4;if(ea||F(3),S+=15&ea,q=h[eo],eo>3&&(ei=a[eo],q+=b(e,S)&(1<<ei)-1,S+=ei),S>w){M&&F(0);break}g&&T(I+131072);for(var es=I+en;I<es;I+=4)s[I]=s[I-q],s[I+1]=s[I+1-q],s[I+2]=s[I+2-q],s[I+3]=s[I+3-q];I=es}}l.l=G,l.p=et,l.b=I,G&&(x=1,l.m=R,l.d=D,l.n=U)}while(!x);return I==s.length?s:(c=s,(d=0)<0&&(d=0),(null==(f=I)||f>c.length)&&(f=c.length),(p=new(c instanceof r?r:c instanceof n?n:t)(f-d)).set(c.subarray(d,f)),p)},T=new t(0),x="undefined"!=typeof TextDecoder&&new TextDecoder;try{x.decode(T,{stream:!0})}catch(S){}return e.convert_streams=function(e){var t=new DataView(e),r=0;function n(){var e=t.getUint16(r);return r+=2,e}function i(){var e=t.getUint32(r);return r+=4,e}function a(e){g.setUint16(m,e),m+=2}function o(e){g.setUint32(m,e),m+=4}for(var s={signature:i(),flavor:i(),length:i(),numTables:n(),reserved:n(),totalSfntSize:i(),majorVersion:n(),minorVersion:n(),metaOffset:i(),metaLength:i(),metaOrigLength:i(),privOffset:i(),privLength:i()},l=0;Math.pow(2,l)<=s.numTables;)l++;l--;for(var u=16*Math.pow(2,l),c=16*s.numTables-u,h=12,d=[],f=0;f<s.numTables;f++)d.push({tag:i(),offset:i(),compLength:i(),origLength:i(),origChecksum:i()}),h+=16;var p,A=new Uint8Array(12+16*d.length+d.reduce(function(e,t){return e+t.origLength+4},0)),B=A.buffer,g=new DataView(B),m=0;return o(s.flavor),a(s.numTables),a(u),a(l),a(c),d.forEach(function(e){o(e.tag),o(e.origChecksum),o(h),o(e.origLength),e.outOffset=h,(h+=e.origLength)%4!=0&&(h+=4-h%4)}),d.forEach(function(t){var r=e.slice(t.offset,t.offset+t.compLength);if(t.compLength!=t.origLength){var n=new Uint8Array(t.origLength);E(new Uint8Array(r,2),n)}else n=new Uint8Array(r);A.set(n,t.outOffset);var i=0;(h=t.outOffset+t.origLength)%4!=0&&(i=4-h%4),A.set(new Uint8Array(i).buffer,t.outOffset+t.origLength),p=h+i}),B.slice(0,p)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams},function(e,t){let r;let n={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},a=[null,"isol","init","fina","medi"];return function(o){let s=new Uint8Array(o,0,4),l=e._bin.readASCII(s,0,4);if("wOFF"===l)o=t(o);else if("wOF2"===l)throw Error("woff2 fonts not supported");return function(t){let o=Object.create(null),s={unitsPerEm:t.head.unitsPerEm,ascender:t.hhea.ascender,descender:t.hhea.descender,forEachGlyph(l,u,c,h){let d=0,f=1/s.unitsPerEm*u,p=function(t,n){let o=[];for(let s=0;s<n.length;s++){let l=n.codePointAt(s);l>65535&&s++,o.push(e.U.codeToGlyph(t,l))}let u=t.GSUB;if(u){let c;let{lookupList:h,featureList:d}=u,f=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,p=[];d.forEach(t=>{if(f.test(t.tag))for(let s=0;s<t.tab.length;s++){if(p[t.tab[s]])continue;p[t.tab[s]]=!0;let l=h[t.tab[s]],u=/^(isol|init|fina|medi)$/.test(t.tag);u&&!c&&(c=function(e){let t=new Uint8Array(e.length),n=32,a=1,o=-1;for(let s=0;s<e.length;s++){let l=e.codePointAt(s),u=0|function(e){if(!r){let t={R:2,L:1,D:4,C:16,U:32,T:8};for(let n in r=new Map,i){let a=0;i[n].split(",").forEach(e=>{let[i,o]=e.split("+");i=parseInt(i,36),o=o?parseInt(o,36):0,r.set(a+=i,t[n]);for(let s=o;s--;)r.set(++a,t[n])})}}return r.get(e)||32}(l),c=1;!(8&u)&&(21&n?22&u?(c=3,(1===a||3===a)&&t[o]++):33&u&&(2===a||4===a)&&t[o]--:34&n&&(2===a||4===a)&&t[o]--,a=t[s]=c,n=u,o=s,l>65535&&s++)}return t}(n));for(let d=0;d<o.length;d++)c&&u&&a[c[d]]!==t.tag||e.U._applySubs(o,d,l,h)}})}return o}(t,l),A=0,B=-1;return p.forEach((r,i)=>{if(-1!==r){let a=o[r];if(!a){let s,p,g,m;let{cmds:v,crds:C}=e.U.glyphToPath(t,r),y="",b=0;for(let M=0,F=v.length;M<F;M++){let E=n[v[M]];y+=v[M];for(let T=1;T<=E;T++)y+=(T>1?",":"")+C[b++]}if(C.length){s=p=1/0,g=m=-1/0;for(let x=0,S=C.length;x<S;x+=2){let I=C[x],G=C[x+1];I<s&&(s=I),G<p&&(p=G),I>g&&(g=I),G>m&&(m=G)}}else s=g=p=m=0;a=o[r]={index:r,advanceWidth:t.hmtx.aWidth[r],xMin:s,yMin:p,xMax:g,yMax:m,path:y,pathCommandCount:v.length}}-1!==B&&(d+=e.U.getPairAdjustment(t,B,r)*f),h.call(null,a,d,A),a.advanceWidth&&(d+=a.advanceWidth*f),c&&(d+=c*u),B=r}A+=l.codePointAt(A)>65535?2:1}),d}};return s}(e.parse(o)[0])}}],init(e,t,r){let n=e(),i=t();return r(n,i)}}),j={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Q=new s.Color;function X(){return(self.performance||Date).now()}let W=Object.create(null);function V(e,t){var r;e=function(e,t){for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}({},e);let n=X();if(e.font=(r=e.font||j.defaultFontURL,i||(i="undefined"==typeof document?{}:document.createElement("a")),i.href=r,i.href),e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||j.sdfGlyphSize,null!=e.colorRanges){let a={};for(let o in e.colorRanges)if(e.colorRanges.hasOwnProperty(o)){let l=e.colorRanges[o];"number"!=typeof l&&(l=Q.set(l).getHex()),a[o]=l}e.colorRanges=a}Object.freeze(e);let{textureWidth:u,sdfExponent:h}=j,{sdfGlyphSize:d}=e,f=u/d*4,p=W[d];if(!p){let A=document.createElement("canvas");A.width=u,A.height=256*d/f,(p=W[d]={glyphCount:0,sdfGlyphSize:d,sdfCanvas:A,sdfTexture:new s.Texture(A,void 0,void 0,void 0,s.LinearFilter,s.LinearFilter),contextLost:!1,glyphsByFont:new Map}).sdfTexture.generateMipmaps=!1,function(e){let t=e.sdfCanvas;t.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),e.contextLost=!0}),t.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),e.contextLost=!1;let r=[];e.glyphsByFont.forEach(t=>{t.forEach(t=>{r.push(Y(t,e,!0))})}),c.all(r).then(()=>{Z(e),e.sdfTexture.needsUpdate=!0})})}(p)}let{sdfTexture:B,sdfCanvas:g}=p,m=p.glyphsByFont.get(e.font);m||p.glyphsByFont.set(e.font,m=new Map),q(e).then(r=>{let{glyphIds:i,glyphPositions:a,fontSize:o,unitsPerEm:s,timings:l}=r,A=[],v=new Float32Array(4*i.length),C=o/s,y=0,b=0,M=X();i.forEach((e,t)=>{let n=m.get(e);if(!n){let{path:o,pathBounds:s}=r.glyphData[e],l=Math.max(s[2]-s[0],s[3]-s[1])/d*(j.sdfMargin*d+.5),u=p.glyphCount++,c=[s[0]-l,s[1]-l,s[2]+l,s[3]+l];m.set(e,n={path:o,atlasIndex:u,sdfViewBox:c}),A.push(n)}let{sdfViewBox:h}=n,f=a[b++],B=a[b++];v[y++]=f+h[0]*C,v[y++]=B+h[1]*C,v[y++]=f+h[2]*C,v[y++]=B+h[3]*C,i[t]=n.atlasIndex}),l.quads=(l.quads||0)+(X()-M);let F=X();l.sdf={};let E=g.height,T=Math.ceil(p.glyphCount/f),x=Math.pow(2,Math.ceil(Math.log2(T*d)));x>E&&(console.info(`Increasing SDF texture size ${E}->${x}`),N(g,u,x),B.dispose()),c.all(A.map(t=>Y(t,p,e.gpuAccelerateSDF).then(({timing:e})=>{l.sdf[t.atlasIndex]=e}))).then(()=>{A.length&&!p.contextLost&&(Z(p),B.needsUpdate=!0),l.sdfTotal=X()-F,l.total=X()-n,t(Object.freeze({parameters:e,sdfTexture:B,sdfGlyphSize:d,sdfExponent:h,glyphBounds:v,glyphAtlasIndices:i,glyphColors:r.glyphColors,caretPositions:r.caretPositions,caretHeight:r.caretHeight,chunkedBounds:r.chunkedBounds,ascender:r.ascender,descender:r.descender,lineHeight:r.lineHeight,topBaseline:r.topBaseline,blockBounds:r.blockBounds,visibleBounds:r.visibleBounds,timings:r.timings,get totalBounds(){return console.log("totalBounds deprecated, use blockBounds instead"),r.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");let[a,o,s,u]=r.blockBounds;return[s-a,u-o]}}))})}),c.all([]).then(()=>{if(!p.contextLost){var e;(e=g)._warm||(H.webgl.isSupported(e),e._warm=!0)}})}function Y({path:e,atlasIndex:t,sdfViewBox:r},{sdfGlyphSize:i,sdfCanvas:a,contextLost:o},s){if(o)return Promise.resolve({timing:-1});let{textureWidth:l,sdfExponent:u}=j,c=Math.max(r[2]-r[0],r[3]-r[1]),h=Math.floor(t/4);return function(e,t,r,i,a,o,s,l,u,c,h=!0){return h?O(e,t,r,i,a,o,s,l,u,c).then(null,h=>(n||(console.warn("WebGL SDF generation failed, falling back to JS",h),n=!0),J(e,t,r,i,a,o,s,l,u,c))):J(e,t,r,i,a,o,s,l,u,c)}(i,i,e,r,c,u,a,h%(l/i)*i,Math.floor(h/(l/i))*i,t%4,s)}function Z(e){if("function"!=typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");let{sdfCanvas:t,sdfTexture:r}=e,{width:n,height:i}=t,a=e.sdfCanvas.getContext("webgl"),o=r.image.data;o&&o.length===n*i*4||(o=new Uint8Array(n*i*4),r.image={width:n,height:i,data:o},r.flipY=!1,r.isDataTexture=!0),a.readPixels(0,0,n,i,a.RGBA,a.UNSIGNED_BYTE,o)}}let z=v({name:"Typesetter",dependencies:[j,K,function(e,t,r){let{defaultFontURL:n}=r,i=Object.create(null),a=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,s=/[\s\-\u007C\u00AD\u2010\u2012-\u2014\u2027\u2056\u2E17\u2E40]/;function l(t,r){t||(t=n);let a=i[t];if(a)a.pending?a.pending.push(r):r(a);else{var o,s;i[t]={pending:[r]},o=t,s=e=>{let r=i[t].pending;i[t]=e,r.forEach(t=>t(e))},function t(){let r=e=>{console.error(`Failure loading font ${o}${o===n?"":"; trying fallback"}`,e),o!==n&&(o=n,t())};try{let i=new XMLHttpRequest;i.open("get",o,!0),i.responseType="arraybuffer",i.onload=function(){if(i.status>=400)r(Error(i.statusText));else if(i.status>0)try{let t=e(i.response);s(t)}catch(n){r(n)}},i.onerror=r,i.send()}catch(a){r(a)}}()}}function u({text:e="",font:r=n,sdfGlyphSize:i=64,fontSize:u=1,letterSpacing:p=0,lineHeight:A="normal",maxWidth:B=a,direction:g,textAlign:m="left",textIndent:v=0,whiteSpace:C="normal",overflowWrap:y="normal",anchorX:b=0,anchorY:M=0,includeCaretPositions:F=!1,chunkedBoundsSize:E=8192,colorRanges:T=null},x,S=!1){let I=d(),G={fontLoad:0,typesetting:0};e.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),u=+u,p=+p,B=+B,A=A||"normal",v=+v,l(r,r=>{let n=isFinite(B),i=null,l=null,D=null,R=null,U=null,w=null,_=null,k=0,L=0,P="nowrap"!==C,{ascender:H,descender:O,unitsPerEm:J}=r;G.fontLoad=d()-I;let N=d(),K=u/J;"normal"===A&&(A=(H-O)/J),A*=u;let j=(A-(H-O)*K)/2,Q=-(H*K+j),X=Math.min(A,(H-O)*K),W=(H+O)/2*K-X/2,V=v,Y=new f,Z=[Y];r.forEachGlyph(e,u,p,(t,r,i)=>{let a;let l=e.charAt(i),c=t.advanceWidth*K,h=Y.count;if("isEmpty"in t||(t.isWhitespace=!!l&&/\s/.test(l),t.canBreakAfter=!!l&&s.test(l),t.isEmpty=t.xMin===t.xMax||t.yMin===t.yMax||o.test(l)),!t.isWhitespace&&!t.isEmpty&&L++,P&&n&&!t.isWhitespace&&r+c+V>B&&h){if(Y.glyphAt(h-1).glyphObj.canBreakAfter)a=new f,V=-r;else for(let d=h;d--;){if(0===d&&"break-word"===y){a=new f,V=-r;break}if(Y.glyphAt(d).glyphObj.canBreakAfter){a=Y.splitAt(d+1);let A=a.glyphAt(0).x;V-=A;for(let g=a.count;g--;)a.glyphAt(g).x-=A;break}}a&&(Y.isSoftWrapped=!0,Y=a,Z.push(Y),k=B)}let m=Y.glyphAt(Y.count);m.glyphObj=t,m.x=r+V,m.width=c,m.charIndex=i,"\n"===l&&(Y=new f,Z.push(Y),V=-(r+c+p*u)+v)}),Z.forEach(e=>{for(let t=e.count;t--;){let{glyphObj:r,x:n,width:i}=e.glyphAt(t);if(!r.isWhitespace){e.width=n+i,e.width>k&&(k=e.width);return}}});let z=0,q=0;if(b&&("number"==typeof b?z=-b:"string"==typeof b&&(z=-k*("left"===b?0:"center"===b?.5:"right"===b?1:c(b)))),M){if("number"==typeof M)q=-M;else if("string"==typeof M){let $=Z.length*A;q="top"===M?0:"top-baseline"===M?-Q:"middle"===M?$/2:"bottom"===M?$:"bottom-baseline"===M?$-j+O*K:c(M)*$}}if(!S){let ee,et;let er=t.getEmbeddingLevels(e,g);i=new Uint16Array(L),l=new Float32Array(2*L),D={},w=[a,a,-a,-a],_=[];let en=Q;F&&(U=new Float32Array(3*e.length)),T&&(R=new Uint8Array(3*L));let ei=0,ea=-1,eo=-1;if(Z.forEach((n,o)=>{let{count:s,width:u}=n;if(s>0){let c,d=0;for(let f=s;f--&&n.glyphAt(f).glyphObj.isWhitespace;)d++;let p=0,B=0;if("center"===m)p=(k-u)/2;else if("right"===m)p=k-u;else if("justify"===m&&n.isSoftWrapped){let g=0;for(let v=s-d;v--;)n.glyphAt(v).glyphObj.isWhitespace&&g++;B=(k-u)/g}if(B||p){let C=0;for(let y=0;y<s;y++){let b=n.glyphAt(y),M=b.glyphObj;b.x+=p+C,0!==B&&M.isWhitespace&&y<s-d&&(C+=B,b.width+=B)}}let x=t.getReorderSegments(e,er,n.glyphAt(0).charIndex,n.glyphAt(n.count-1).charIndex);for(let S=0;S<x.length;S++){let[I,G]=x[S],L=1/0,P=-1/0;for(let H=0;H<s;H++)if(n.glyphAt(H).charIndex>=I){let O=H,J=H;for(;J<s;J++){let N=n.glyphAt(J);if(N.charIndex>G)break;J<s-d&&(L=Math.min(L,N.x),P=Math.max(P,N.x+N.width))}for(let j=O;j<J;j++){let Q=n.glyphAt(j);Q.x=P-(Q.x+Q.width-L)}break}}let X=e=>c=e;for(let V=0;V<s;V++){let Y=n.glyphAt(V);c=Y.glyphObj;let Z=c.index,$=1&er.levels[Y.charIndex];if($){let es=t.getMirroredCharacter(e[Y.charIndex]);es&&r.forEachGlyph(es,0,0,X)}if(F){let{charIndex:el}=Y,eu=Y.x+z,ec=Y.x+Y.width+z;U[3*el]=$?ec:eu,U[3*el+1]=$?eu:ec,U[3*el+2]=en+W+q;let eh=el-ea;eh>1&&h(U,ea,eh),ea=el}if(T){let{charIndex:ed}=Y;for(;ed>eo;)eo++,T.hasOwnProperty(eo)&&(et=T[eo])}if(!c.isWhitespace&&!c.isEmpty){let ef=ei++;D[Z]||(D[Z]={path:c.path,pathBounds:[c.xMin,c.yMin,c.xMax,c.yMax]});let ep=Y.x+z,eA=en+q;l[2*ef]=ep,l[2*ef+1]=eA;let eB=ep+c.xMin*K,eg=eA+c.yMin*K,em=ep+c.xMax*K,ev=eA+c.yMax*K;eB<w[0]&&(w[0]=eB),eg<w[1]&&(w[1]=eg),em>w[2]&&(w[2]=em),ev>w[3]&&(w[3]=ev),ef%E==0&&(ee={start:ef,end:ef,rect:[a,a,-a,-a]},_.push(ee)),ee.end++;let eC=ee.rect;if(eB<eC[0]&&(eC[0]=eB),eg<eC[1]&&(eC[1]=eg),em>eC[2]&&(eC[2]=em),ev>eC[3]&&(eC[3]=ev),i[ef]=Z,T){let ey=3*ef;R[ey]=et>>16&255,R[ey+1]=et>>8&255,R[ey+2]=255&et}}}}en-=A}),U){let es=e.length-ea;es>1&&h(U,ea,es)}}G.typesetting=d()-N,x({glyphIds:i,glyphPositions:l,glyphData:D,caretPositions:U,caretHeight:X,glyphColors:R,chunkedBounds:_,fontSize:u,unitsPerEm:J,ascender:H*K,descender:O*K,lineHeight:A,topBaseline:Q,blockBounds:[z,q-Z.length*A,z+k,q],visibleBounds:w,timings:G})})}function c(e){let t=e.match(/^([\d.]+)%$/),r=t?parseFloat(t[1]):NaN;return isNaN(r)?0:r/100}function h(e,t,r){let n=e[3*t],i=e[3*t+1],a=e[3*t+2],o=(i-n)/r;for(let s=0;s<r;s++){let l=(t+s)*3;e[l]=n+o*s,e[l+1]=n+o*(s+1),e[l+2]=a}}function d(){return(self.performance||Date).now()}function f(){this.data=[]}let p=["glyphObj","x","width","charIndex"];return f.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/p.length)},glyphAt(e){let t=f.flyweight;return t.data=this.data,t.index=e,t},splitAt(e){let t=new f;return t.data=this.data.splice(e*p.length),t}},f.flyweight=p.reduce((e,t,r,n)=>(Object.defineProperty(e,t,{get(){return this.data[this.index*p.length+r]},set(e){this.data[this.index*p.length+r]=e}}),e),{data:null,index:0}),{typeset:u,measure:function(e,t){u(e,e=>{let[r,n,i,a]=e.blockBounds;t({width:i-r,height:a-n})},{metricsOnly:!0})},loadFont:l}},F],init(e,t,r,n){let{defaultFontURL:i}=e;return r(t,n(),{defaultFontURL:i})}}),q=v({name:"Typesetter",dependencies:[z,b],init:(e,t)=>function(r){let n=new t;return e.typeset(r,n.resolve),n},getTransferables(e){let t=[e.glyphPositions.buffer,e.glyphIds.buffer];return e.caretPositions&&t.push(e.caretPositions.buffer),e.glyphColors&&t.push(e.glyphColors.buffer),t}}),$=(()=>{let e={},t="aTroikaGlyphIndex";class r extends s.InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new s.Sphere,this.boundingBox=new s.Box3}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){let t=this.getIndex().count;this.setDrawRange(e===s.BackSide?t/2:0,e===s.DoubleSide?t:t/2)}set detail(t){if(t!==this._detail){this._detail=t,("number"!=typeof t||t<1)&&(t=1);let r=function(t){let r=e[t];if(!r){let n=new s.PlaneBufferGeometry(1,1,t,t),i=n.clone(),a=n.attributes,o=i.attributes,l=new s.BufferGeometry,u=a.uv.count;for(let c=0;c<u;c++)o.position.array[3*c]*=-1,o.normal.array[3*c+2]*=-1;["position","normal","uv"].forEach(e=>{l.setAttribute(e,new s.Float32BufferAttribute([...a[e].array,...o[e].array],a[e].itemSize))}),l.setIndex([...n.index.array,...i.index.array.map(e=>e+u)]),l.translate(.5,.5,0),r=e[t]=l}return r}(t);["position","normal","uv"].forEach(e=>{this.attributes[e]=r.attributes[e].clone()}),this.setIndex(r.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,r,a,o,s){n(this,"aTroikaGlyphBounds",e,4),n(this,t,r,1),n(this,"aTroikaGlyphColor",s,3),this._blockBounds=a,this._chunkedBounds=o,i(this,r.length),this._updateBounds()}_updateBounds(){let e=this._blockBounds;if(e){let{curveRadius:t,boundingBox:r}=this;if(t){let{PI:n,floor:i,min:a,max:o,sin:s,cos:l}=Math,u=n/2,c=2*n,h=Math.abs(t),d=e[0]/h,f=e[2]/h,p=i((d+u)/c)!==i((f+u)/c)?-h:a(s(d)*h,s(f)*h),A=i((d-u)/c)!==i((f-u)/c)?h:o(s(d)*h,s(f)*h),B=i((d+n)/c)!==i((f+n)/c)?2*h:o(h-l(d)*h,h-l(f)*h);r.min.set(p,e[1],t<0?-B:0),r.max.set(A,e[3],t<0?0:B)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let r=this.getAttribute(t).count,n=this._chunkedBounds;if(n)for(let a=n.length;a--;){r=n[a].end;let o=n[a].rect;if(o[1]<e.w&&o[3]>e.y&&o[0]<e.z&&o[2]>e.x)break}i(this,r)}}function n(e,t,r,n){let i=e.getAttribute(t);r?i&&i.array.length===r.length?(i.array.set(r),i.needsUpdate=!0):(e.setAttribute(t,new s.InstancedBufferAttribute(r,n)),delete e._maxInstanceCount,e.dispose()):i&&e.deleteAttribute(t)}function i(e,t){e[e.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=t}return r.prototype.setAttribute||(r.prototype.setAttribute=function(e,t){return this.attributes[e]=t,this}),r})(),ee=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,et=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,er=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,en=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`,ei=(()=>{let e=new s.MeshBasicMaterial({color:16777215,side:s.DoubleSide,transparent:!0}),t=new s.Matrix4,r=new s.Vector3,n=new s.Vector3,i=[],a=new s.Vector3,o="+x+y";function l(e){return Array.isArray(e)?e[0]:e}let u=()=>{let t=new s.Mesh(new s.PlaneBufferGeometry(1,1),e);return u=()=>t,t},c=()=>{let t=new s.Mesh(new s.PlaneBufferGeometry(1,1,32,1),e);return c=()=>t,t},h={type:"syncstart"},d={type:"synccomplete"},f=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],p=f.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class A extends s.Mesh{constructor(){let e=new $;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=8421504,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=o,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(h),V({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);let r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(e=>e&&e())})),this.dispatchEvent(d),e&&e()})))}onBeforeRender(e,t,r,n,i,a){this.sync(),i.isTroikaTextMaterial&&this._prepareForRender(i),i._hadOwnSide=i.hasOwnProperty("side"),this.geometry.setSide(i._actualSide=i.side),i.side=s.FrontSide}onAfterRender(e,t,r,n,i,a){i._hadOwnSide?i.side=i._actualSide:delete i.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let t=this._derivedMaterial,r=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=e.clone());if(t&&t.baseMaterial===r||(t=this._derivedMaterial=function(e){let t=function e(t,r){let n=function(e){let t=JSON.stringify(e,_),r=L.get(t);return null==r&&L.set(t,r=++k),r}(r),i=D.get(t);if(i||D.set(t,i=Object.create(null)),i[n])return new i[n];let a=`_onBeforeCompile${n}`,o=function(e){t.onBeforeCompile.call(this,e);let i=this.customProgramCacheKey()+"|"+e.vertexShader+"|"+e.fragmentShader,o=R[i];if(!o){let s=function({vertexShader:e,fragmentShader:t},r,n){let{vertexDefs:i,vertexMainIntro:a,vertexMainOutro:o,vertexTransform:s,fragmentDefs:l,fragmentMainIntro:u,fragmentMainOutro:c,fragmentColorTransform:h,customRewriter:d,timeUniform:f}=r;if(i=i||"",a=a||"",o=o||"",l=l||"",u=u||"",c=c||"",(s||d)&&(e=T(e)),(h||d)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"),t=T(t)),d){let p=d({vertexShader:e,fragmentShader:t});e=p.vertexShader,t=p.fragmentShader}if(h){let A=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,e=>(A.push(e),"")),c=`${h}
${A.join("\n")}
${c}`}if(f){let B=`
uniform float ${f};
`;i=B+i,l=B+l}return s&&(e=`vec3 troika_position_${n};
vec3 troika_normal_${n};
vec2 troika_uv_${n};
${e}
`,i=`${i}
void troikaVertexTransform${n}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${s}
}
`,a=`
troika_position_${n} = vec3(position);
troika_normal_${n} = vec3(normal);
troika_uv_${n} = vec2(uv);
troikaVertexTransform${n}(troika_position_${n}, troika_normal_${n}, troika_uv_${n});
${a}
`,e=e.replace(/\b(position|normal|uv)\b/g,(e,t,r,i)=>/\battribute\s+vec[23]\s+$/.test(i.substr(0,r))?t:`troika_${t}_${n}`)),e=w(e,n,i,a,o),t=w(t,n,l,u,c),{vertexShader:e,fragmentShader:t}}(e,r,n);o=R[i]=s}e.vertexShader=o.vertexShader,e.fragmentShader=o.fragmentShader,I(e.uniforms,this.uniforms),r.timeUniform&&(e.uniforms[r.timeUniform]={get value(){return Date.now()-G}}),this[a]&&this[a](e)},l=function(){return u(r.chained?t:t.clone())},u=function(e){let i=Object.create(e,c);return Object.defineProperty(i,"baseMaterial",{value:t}),Object.defineProperty(i,"id",{value:U++}),i.uuid=function(){let e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=x[255&e]+x[e>>8&255]+x[e>>16&255]+x[e>>24&255]+"-"+x[255&t]+x[t>>8&255]+"-"+x[t>>16&15|64]+x[t>>24&255]+"-"+x[63&r|128]+x[r>>8&255]+"-"+x[r>>16&255]+x[r>>24&255]+x[255&n]+x[n>>8&255]+x[n>>16&255]+x[n>>24&255];return i.toUpperCase()}(),i.uniforms=I({},e.uniforms,r.uniforms),i.defines=I({},e.defines,r.defines),i.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",i.extensions=I({},e.extensions,r.extensions),i._listeners=void 0,i},c={constructor:{value:l},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get:()=>o,set(e){this[a]=e}},copy:{writable:!0,configurable:!0,value:function(e){return t.copy.call(this,e),t.isShaderMaterial||t.isDerivedMaterial||(I(this.extensions,e.extensions),I(this.defines,e.defines),I(this.uniforms,s.UniformsUtils.clone(e.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){let e=new t.constructor;return u(e).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let n=this._depthMaterial;return n||((n=this._depthMaterial=e(t.isDerivedMaterial?t.getDepthMaterial():new s.MeshDepthMaterial({depthPacking:s.RGBADepthPacking}),r)).defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let n=this._distanceMaterial;return n||((n=this._distanceMaterial=e(t.isDerivedMaterial?t.getDistanceMaterial():new s.MeshDistanceMaterial,r)).defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value(){let{_depthMaterial:e,_distanceMaterial:r}=this;e&&e.dispose(),r&&r.dispose(),t.dispose.call(this)}}};return i[n]=l,new l}(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new s.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new s.Vector4(0,0,0,0)},uTroikaClipRect:{value:new s.Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new s.Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new s.Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new s.Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:ee,vertexTransform:et,fragmentDefs:er,fragmentColorTransform:en,customRewriter({vertexShader:e,fragmentShader:t}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(t)&&(t=t.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(e)||(e=e.replace(E,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:e,fragmentShader:t}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}(r),r.addEventListener("dispose",function e(){r.removeEventListener("dispose",e),t.dispose()})),!this.outlineWidth&&!this.outlineBlur&&!this.outlineOffsetX&&!this.outlineOffsetY)return t;{let n=t._outlineMtl;return n||((n=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}})).isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,t.addEventListener("dispose",function e(){t.removeEventListener("dispose",e),n.dispose()})),[n,t]}}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return l(this.material).getDepthMaterial()}get customDistanceMaterial(){return l(this.material).getDistanceMaterial()}_prepareForRender(e){let i=e.isTextOutlineMaterial,l=e.uniforms,u=this.textRenderInfo;if(u){let c,h,d;let{sdfTexture:f,blockBounds:p}=u;l.uTroikaSDFTexture.value=f,l.uTroikaSDFTextureSize.value.set(f.image.width,f.image.height),l.uTroikaSDFGlyphSize.value=u.sdfGlyphSize,l.uTroikaSDFExponent.value=u.sdfExponent,l.uTroikaTotalBounds.value.fromArray(p),l.uTroikaUseGlyphColors.value=!i&&!!u.glyphColors;let A=0,B=0,g=0,m=0,v=0;if(i){let{outlineWidth:C,outlineOffsetX:y,outlineOffsetY:b,outlineBlur:M,outlineOpacity:F}=this;A=this._parsePercent(C)||0,B=Math.max(0,this._parsePercent(M)||0),c=F,m=this._parsePercent(y)||0,v=this._parsePercent(b)||0}else(g=Math.max(0,this._parsePercent(this.strokeWidth)||0))&&(d=this.strokeColor,l.uTroikaStrokeColor.value.set(null==d?8421504:d),null==(h=this.strokeOpacity)&&(h=1)),c=this.fillOpacity;l.uTroikaDistanceOffset.value=A,l.uTroikaPositionOffset.value.set(m,v),l.uTroikaBlurRadius.value=B,l.uTroikaStrokeWidth.value=g,l.uTroikaStrokeOpacity.value=h,l.uTroikaFillOpacity.value=null==c?1:c,l.uTroikaCurveRadius.value=this.curveRadius||0;let E=this.clipRect;if(E&&Array.isArray(E)&&4===E.length)l.uTroikaClipRect.value.fromArray(E);else{let T=100*(this.fontSize||.1);l.uTroikaClipRect.value.set(p[0]-T,p[1]-T,p[2]+T,p[3]+T)}this.geometry.applyClipRect(l.uTroikaClipRect.value)}l.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;let x=i?this.outlineColor||0:this.color;if(null==x)delete e.color;else{let S=e.hasOwnProperty("color")?e.color:e.color=new s.Color;(x!==S._input||"object"==typeof x)&&S.set(S._input=x)}let I=this.orientation||o;if(I!==e._orientation){let G=l.uTroikaOrient.value,D=(I=I.replace(/[^-+xyz]/g,""))!==o&&I.match(/^([-+])([xyz])([-+])([xyz])$/);if(D){let[,R,U,w,_]=D;r.set(0,0,0)[U]="-"===R?1:-1,n.set(0,0,0)[_]="-"===w?-1:1,t.lookAt(a,r.cross(n),n),G.setFromMatrix4(t)}else G.identity();e._orientation=I}}_parsePercent(e){if("string"==typeof e){let t=e.match(/^(-?[\d.]+)%$/),r=t?parseFloat(t[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new s.Vector2){t.copy(e);let r=this.curveRadius;return r&&(t.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),t}worldPositionToTextCoords(e,t=new s.Vector2){return r.copy(e),this.localPositionToTextCoords(this.worldToLocal(r),t)}raycast(e,t){let{textRenderInfo:r,curveRadius:n}=this;if(r){let a=r.blockBounds,o=n?c():u(),s=o.geometry,{position:l,uv:h}=s.attributes;for(let d=0;d<h.count;d++){let f=a[0]+h.getX(d)*(a[2]-a[0]),p=a[1]+h.getY(d)*(a[3]-a[1]),A=0;n&&(A=n-Math.cos(f/n)*n,f=Math.sin(f/n)*n),l.setXYZ(d,f,p,A)}s.boundingSphere=this.geometry.boundingSphere,s.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,i.length=0,o.raycast(e,i);for(let B=0;B<i.length;B++)i[B].object=this,t.push(i[B])}}copy(e){let t=this.geometry;return super.copy(e),this.geometry=t,p.forEach(t=>{this[t]=e[t]}),this}clone(){return new this.constructor().copy(this)}}f.forEach(e=>{let t="_private_"+e;Object.defineProperty(A.prototype,e,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})});let B=!1;return Object.defineProperty(A.prototype,"anchor",{get(){return this._deprecated_anchor},set(e){this._deprecated_anchor=e,B||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),B=!0),Array.isArray(e)?(this.anchorX=`${100*(+e[0]||0)}%`,this.anchorY=`${100*(+e[1]||0)}%`):this.anchorX=this.anchorY=0}}),A})();new WeakMap,new WeakMap;var ea=r(1964),eo=r(4881);let es=o.forwardRef(({anchorX:e="center",anchorY:t="middle",font:r,children:n,characters:i,onSync:s,...l},u)=>{let c=(0,ea.z)(({invalidate:e})=>e),[h]=o.useState(()=>new ei),[d,f]=o.useMemo(()=>{let e=[],t="";return o.Children.forEach(n,r=>{"string"==typeof r||"number"==typeof r?t+=r:e.push(r)}),[e,t]},[n]);return(0,eo.Rq)(()=>new Promise(e=>(function({font:e,characters:t,sdfGlyphSize:r},n){let i=Array.isArray(t)?t.join("\n"):""+t;V({font:e,sdfGlyphSize:r,text:i},n)})({font:r,characters:i},e)),["troika-text",r,i]),o.useLayoutEffect(()=>void h.sync(()=>{c(),s&&s(h)})),o.useEffect(()=>()=>h.dispose(),[h]),o.createElement("primitive",(0,a.Z)({object:h,ref:u,font:r,text:f,anchorX:e,anchorY:t},l),d)})},8626:function(e,t,r){let n;r.d(t,{L:function(){return et}});var i=r(9477);let a=new WeakMap;class o extends i.Loader{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,n){let a=new i.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,e=>{let r={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,r).then(t).catch(n)},r,n)}decodeDracoFile(e,t,r,n){let i={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){let r;for(let n in t.attributeTypes){let i=t.attributeTypes[n];void 0!==i.BYTES_PER_ELEMENT&&(t.attributeTypes[n]=i.name)}let o=JSON.stringify(t);if(a.has(e)){let s=a.get(e);if(s.key===o)return s.promise;if(0===e.byteLength)throw Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let l=this.workerNextTaskID++,u=e.byteLength,c=this._getWorker(l,u).then(n=>(r=n,new Promise((n,i)=>{r._callbacks[l]={resolve:n,reject:i},r.postMessage({type:"decode",id:l,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return c.catch(()=>!0).then(()=>{r&&l&&this._releaseTask(r,l)}),a.set(e,{key:o,promise:c}),c}_createGeometry(e){let t=new i.BufferGeometry;e.index&&t.setIndex(new i.BufferAttribute(e.index.array,1));for(let r=0;r<e.attributes.length;r++){let n=e.attributes[r],a=n.name,o=n.array,s=n.itemSize;t.setAttribute(a,new i.BufferAttribute(o,s))}return t}_loadLibrary(e,t){let r=new i.FileLoader(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((t,n)=>{r.load(e,t,void 0,n)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{let r=t[0];e||(this.decoderConfig.wasmBinary=t[1]);let n=s.toString(),i=["/* draco decoder */",r,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(e){let t=e.data;switch(t.type){case"decode":r._callbacks[t.id].resolve(t);break;case"error":r._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});let n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function s(){let e,t;onmessage=function(r){let n=r.data;switch(n.type){case"init":e=n.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":let i=n.buffer,a=n.taskConfig;t.then(e=>{let t=e.draco,r=new t.Decoder,o=new t.DecoderBuffer;o.Init(new Int8Array(i),i.byteLength);try{let s=function(e,t,r,n){let i,a;let o=n.attributeIDs,s=n.attributeTypes,l=t.GetEncodedGeometryType(r);if(l===e.TRIANGULAR_MESH)i=new e.Mesh,a=t.DecodeBufferToMesh(r,i);else if(l===e.POINT_CLOUD)i=new e.PointCloud,a=t.DecodeBufferToPointCloud(r,i);else throw Error("THREE.DRACOLoader: Unexpected geometry type.");if(!a.ok()||0===i.ptr)throw Error("THREE.DRACOLoader: Decoding failed: "+a.error_msg());let u={index:null,attributes:[]};for(let c in o){let h,d;let f=self[s[c]];if(n.useUniqueIDs)d=o[c],h=t.GetAttributeByUniqueId(i,d);else{if(-1===(d=t.GetAttributeId(i,e[o[c]])))continue;h=t.GetAttribute(i,d)}u.attributes.push(function(e,t,r,n,i,a){let o=a.num_components(),s=r.num_points(),l=s*o,u=l*i.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),h=e._malloc(u);t.GetAttributeDataArrayForAllPoints(r,a,c,u,h);let d=new i(e.HEAPF32.buffer,h,l).slice();return e._free(h),{name:n,array:d,itemSize:o}}(e,t,i,c,f,h))}return l===e.TRIANGULAR_MESH&&(u.index=function(e,t,r){let n=r.num_faces(),i=3*n,a=4*i,o=e._malloc(a);t.GetTrianglesUInt32Array(r,a,o);let s=new Uint32Array(e.HEAPF32.buffer,o,i).slice();return e._free(o),{array:s,itemSize:1}}(e,t,i)),e.destroy(i),u}(t,r,o,a),l=s.attributes.map(e=>e.array.buffer);s.index&&l.push(s.index.array.buffer),self.postMessage({type:"decode",id:n.id,geometry:s},l)}catch(u){console.error(u),self.postMessage({type:"error",id:n.id,error:u.message})}finally{t.destroy(o),t.destroy(r)}})}}}let l=()=>{let e;if(n)return n;let t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!=typeof WebAssembly)return{supported:!1};let i="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";WebAssembly.validate(t)&&(i="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");let a=WebAssembly.instantiate(function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;++n){let i=e.charCodeAt(n);t[n]=i>96?i-71:i>64?i-65:i>47?i+4:i>46?63:62}let a=0;for(let o=0;o<e.length;++o)t[a++]=t[o]<60?r[t[o]]:(t[o]-60)*64+t[++o];return t.buffer.slice(0,a)}(i),{}).then(t=>{(e=t.instance).exports.__wasm_call_ctors()});function o(t,r,n,i,a,o){let s=e.exports.sbrk,l=n+3&-4,u=s(l*i),c=s(a.length),h=new Uint8Array(e.exports.memory.buffer);h.set(a,c);let d=t(u,n,i,c,a.length);if(0===d&&o&&o(u,l,i),r.set(h.subarray(u,u+n*i)),s(u-s(0)),0!==d)throw Error(`Malformed buffer data: ${d}`)}let s={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},l={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return n={ready:a,supported:!0,decodeVertexBuffer(t,r,n,i,a){o(e.exports.meshopt_decodeVertexBuffer,t,r,n,i,e.exports[s[a]])},decodeIndexBuffer(t,r,n,i){o(e.exports.meshopt_decodeIndexBuffer,t,r,n,i)},decodeIndexSequence(t,r,n,i){o(e.exports.meshopt_decodeIndexSequence,t,r,n,i)},decodeGltfBuffer(t,r,n,i,a,u){o(e.exports[l[a]],t,r,n,i,e.exports[s[u]])}}};class u extends i.Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new A(e)}),this.register(function(e){return new b(e)}),this.register(function(e){return new M(e)}),this.register(function(e){return new g(e)}),this.register(function(e){return new m(e)}),this.register(function(e){return new v(e)}),this.register(function(e){return new C(e)}),this.register(function(e){return new p(e)}),this.register(function(e){return new y(e)}),this.register(function(e){return new B(e)}),this.register(function(e){return new d(e)}),this.register(function(e){return new F(e)})}load(e,t,r,n){let a;let o=this;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:i.LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);let s=function(t){n?n(t):console.error(t),o.manager.itemError(e),o.manager.itemEnd(e)},l=new i.FileLoader(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(r){try{o.parse(r,a,function(r){t(r),o.manager.itemEnd(e)},s)}catch(n){s(n)}},r,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return -1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return -1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,n){let a;let o={},s={};if("string"==typeof e)a=e;else{let l=i.LoaderUtils.decodeText(new Uint8Array(e,0,4));if(l===E){try{o[h.KHR_BINARY_GLTF]=new x(e)}catch(u){n&&n(u);return}a=o[h.KHR_BINARY_GLTF].content}else a=i.LoaderUtils.decodeText(new Uint8Array(e))}let c=JSON.parse(a);if(void 0===c.asset||c.asset.version[0]<2){n&&n(Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let d=new Y(c,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){let A=this.pluginCallbacks[p](d);s[A.name]=A,o[A.name]=!0}if(c.extensionsUsed)for(let B=0;B<c.extensionsUsed.length;++B){let g=c.extensionsUsed[B],m=c.extensionsRequired||[];switch(g){case h.KHR_MATERIALS_UNLIT:o[g]=new f;break;case h.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[g]=new D;break;case h.KHR_DRACO_MESH_COMPRESSION:o[g]=new S(c,this.dracoLoader);break;case h.KHR_TEXTURE_TRANSFORM:o[g]=new I;break;case h.KHR_MESH_QUANTIZATION:o[g]=new R;break;default:m.indexOf(g)>=0&&void 0===s[g]&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}d.setExtensions(o),d.setPlugins(s),d.parse(r,n)}parseAsync(e,t){let r=this;return new Promise(function(n,i){r.parse(e,t,n,i)})}}function c(){let e={};return{get:function(t){return e[t]},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},removeAll:function(){e={}}}}let h={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class d{constructor(e){this.parser=e,this.name=h.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let r=0,n=t.length;r<n;r++){let i=t[r];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){let t;let r=this.parser,n="light:"+e,a=r.cache.get(n);if(a)return a;let o=r.json,s=o.extensions&&o.extensions[this.name]||{},l=s.lights||[],u=l[e],c=new i.Color(16777215);void 0!==u.color&&c.fromArray(u.color);let h=void 0!==u.range?u.range:0;switch(u.type){case"directional":(t=new i.DirectionalLight(c)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new i.PointLight(c)).distance=h;break;case"spot":(t=new i.SpotLight(c)).distance=h,u.spot=u.spot||{},u.spot.innerConeAngle=void 0!==u.spot.innerConeAngle?u.spot.innerConeAngle:0,u.spot.outerConeAngle=void 0!==u.spot.outerConeAngle?u.spot.outerConeAngle:Math.PI/4,t.angle=u.spot.outerConeAngle,t.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return t.position.set(0,0,0),t.decay=2,void 0!==u.intensity&&(t.intensity=u.intensity),t.name=r.createUniqueName(u.name||"light_"+e),a=Promise.resolve(t),r.cache.add(n,a),a}createNodeAttachment(e){let t=this,r=this.parser,n=r.json,i=n.nodes[e],a=i.extensions&&i.extensions[this.name]||{},o=a.light;return void 0===o?null:this._loadLight(o).then(function(e){return r._getNodeRef(t.cache,o,e)})}}class f{constructor(){this.name=h.KHR_MATERIALS_UNLIT}getMaterialType(){return i.MeshBasicMaterial}extendParams(e,t,r){let n=[];e.color=new i.Color(1,1,1),e.opacity=1;let a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){let o=a.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==a.baseColorTexture&&n.push(r.assignTexture(e,"map",a.baseColorTexture,i.sRGBEncoding))}return Promise.all(n)}}class p{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let i=n.extensions[this.name].emissiveStrength;return void 0!==i&&(t.emissiveIntensity=i),Promise.resolve()}}class A{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let t=this.parser,r=t.json.materials[e];return r.extensions&&r.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let a=[],o=n.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&a.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&a.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(a.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){let s=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new i.Vector2(s,s)}return Promise.all(a)}}class B{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let t=this.parser,r=t.json.materials[e];return r.extensions&&r.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let i=[],a=n.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&i.push(r.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&i.push(r.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(i)}}class g{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_SHEEN}getMaterialType(e){let t=this.parser,r=t.json.materials[e];return r.extensions&&r.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let a=[];t.sheenColor=new i.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;let o=n.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&a.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,i.sRGBEncoding)),void 0!==o.sheenRoughnessTexture&&a.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(a)}}class m{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let t=this.parser,r=t.json.materials[e];return r.extensions&&r.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let i=[],a=n.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(r.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}class v{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_VOLUME}getMaterialType(e){let t=this.parser,r=t.json.materials[e];return r.extensions&&r.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let a=[],o=n.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&a.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;let s=o.attenuationColor||[1,1,1];return t.attenuationColor=new i.Color(s[0],s[1],s[2]),Promise.all(a)}}class C{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_IOR}getMaterialType(e){let t=this.parser,r=t.json.materials[e];return r.extensions&&r.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let i=n.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class y{constructor(e){this.parser=e,this.name=h.KHR_MATERIALS_SPECULAR}getMaterialType(e){let t=this.parser,r=t.json.materials[e];return r.extensions&&r.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){let r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let a=[],o=n.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&a.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));let s=o.specularColorFactor||[1,1,1];return t.specularColor=new i.Color(s[0],s[1],s[2]),void 0!==o.specularColorTexture&&a.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,i.sRGBEncoding)),Promise.all(a)}}class b{constructor(e){this.parser=e,this.name=h.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,r=t.json,n=r.textures[e];if(!n.extensions||!n.extensions[this.name])return null;let i=n.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(!(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures")}return t.loadTextureImage(e,i.source,a)}}class M{constructor(e){this.parser=e,this.name=h.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let t=this.name,r=this.parser,n=r.json,i=n.textures[e];if(!i.extensions||!i.extensions[t])return null;let a=i.extensions[t],o=n.images[a.source],s=r.textureLoader;if(o.uri){let l=r.options.manager.getHandler(o.uri);null!==l&&(s=l)}return this.detectSupport().then(function(i){if(i)return r.loadTextureImage(e,a.source,s);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class F{constructor(e){this.name=h.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,r=t.bufferViews[e];if(!r.extensions||!r.extensions[this.name])return null;{let n=r.extensions[this.name],i=this.parser.getDependency("buffer",n.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(!(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files")}return i.then(function(e){let t=n.byteOffset||0,r=n.byteLength||0,i=n.count,o=n.byteStride,s=new Uint8Array(e,t,r);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(i,o,s,n.mode,n.filter).then(function(e){return e.buffer}):a.ready.then(function(){let e=new ArrayBuffer(i*o);return a.decodeGltfBuffer(new Uint8Array(e),i,o,s,n.mode,n.filter),e})})}}}let E="glTF",T={JSON:1313821514,BIN:5130562};class x{constructor(e){this.name=h.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,12);if(this.header={magic:i.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==E)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-12,n=new DataView(e,12),a=0;for(;a<r;){let o=n.getUint32(a,!0);a+=4;let s=n.getUint32(a,!0);if(a+=4,s===T.JSON){let l=new Uint8Array(e,12+a,o);this.content=i.LoaderUtils.decodeText(l)}else if(s===T.BIN){let u=12+a;this.body=e.slice(u,u+o)}a+=o}if(null===this.content)throw Error("THREE.GLTFLoader: JSON content not found.")}}class S{constructor(e,t){if(!t)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=h.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let r=this.json,n=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},s={},l={};for(let u in a){let c=J[u]||u.toLowerCase();o[c]=a[u]}for(let h in e.attributes){let d=J[h]||h.toLowerCase();if(void 0!==a[h]){let f=r.accessors[e.attributes[h]],p=L[f.componentType];l[d]=p.name,s[d]=!0===f.normalized}}return t.getDependency("bufferView",i).then(function(e){return new Promise(function(t){n.decodeDracoFile(e,function(e){for(let r in e.attributes){let n=e.attributes[r],i=s[r];void 0!==i&&(n.normalized=i)}t(e)},o,l)})})}}class I{constructor(){this.name=h.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class G extends i.MeshStandardMaterial{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;let t={specular:{value:new i.Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=t,this.onBeforeCompile=function(e){for(let r in t)e.uniforms[r]=t[r];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>","#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif").replace("#include <metalnessmap_pars_fragment>","#ifdef USE_GLOSSINESSMAP\n	uniform sampler2D glossinessMap;\n#endif").replace("#include <roughnessmap_fragment>","vec3 specularFactor = specular;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture\n	specularFactor *= texelSpecular.rgb;\n#endif").replace("#include <metalnessmap_fragment>","float glossinessFactor = glossiness;\n#ifdef USE_GLOSSINESSMAP\n	vec4 texelGlossiness = texture2D( glossinessMap, vUv );\n	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture\n	glossinessFactor *= texelGlossiness.a;\n#endif").replace("#include <lights_physical_fragment>","PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.\nmaterial.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\nmaterial.specularColor = specularFactor;")},Object.defineProperties(this,{specular:{get:function(){return t.specular.value},set:function(e){t.specular.value=e}},specularMap:{get:function(){return t.specularMap.value},set:function(e){t.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return t.glossiness.value},set:function(e){t.glossiness.value=e}},glossinessMap:{get:function(){return t.glossinessMap.value},set:function(e){t.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class D{constructor(){this.name=h.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return G}extendParams(e,t,r){let n=t.extensions[this.name];e.color=new i.Color(1,1,1),e.opacity=1;let a=[];if(Array.isArray(n.diffuseFactor)){let o=n.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(void 0!==n.diffuseTexture&&a.push(r.assignTexture(e,"map",n.diffuseTexture,i.sRGBEncoding)),e.emissive=new i.Color(0,0,0),e.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,e.specular=new i.Color(1,1,1),Array.isArray(n.specularFactor)&&e.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){let s=n.specularGlossinessTexture;a.push(r.assignTexture(e,"glossinessMap",s)),a.push(r.assignTexture(e,"specularMap",s,i.sRGBEncoding))}return Promise.all(a)}createMaterial(e){let t=new G(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=i.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class R{constructor(){this.name=h.KHR_MESH_QUANTIZATION}}class U extends i.Interpolant{constructor(e,t,r,n){super(e,t,r,n)}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n*3+n;for(let a=0;a!==n;a++)t[a]=r[i+a];return t}interpolate_(e,t,r,n){let i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,l=3*o,u=n-t,c=(r-t)/u,h=c*c,d=h*c,f=e*l,p=f-l,A=-2*d+3*h,B=d-h,g=1-A,m=B-h+c;for(let v=0;v!==o;v++){let C=a[p+v+o],y=a[p+v+s]*u,b=a[f+v+o],M=a[f+v]*u;i[v]=g*C+m*y+A*b+B*M}return i}}let w=new i.Quaternion;class _ extends U{interpolate_(e,t,r,n){let i=super.interpolate_(e,t,r,n);return w.fromArray(i).normalize().toArray(i),i}}let k={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},L={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},P={9728:i.NearestFilter,9729:i.LinearFilter,9984:i.NearestMipmapNearestFilter,9985:i.LinearMipmapNearestFilter,9986:i.NearestMipmapLinearFilter,9987:i.LinearMipmapLinearFilter},H={33071:i.ClampToEdgeWrapping,33648:i.MirroredRepeatWrapping,10497:i.RepeatWrapping},O={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},J={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},N={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},K={CUBICSPLINE:void 0,LINEAR:i.InterpolateLinear,STEP:i.InterpolateDiscrete},j={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Q(e,t,r){for(let n in r.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=r.extensions[n])}function X(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function W(e){let t="",r=Object.keys(e).sort();for(let n=0,i=r.length;n<i;n++)t+=r[n]+":"+e[r[n]]+";";return t}function V(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class Y{constructor(e={},t={}){var r,n;this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new c,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let a="undefined"!=typeof navigator&&!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),o="undefined"!=typeof navigator&&(null===(r=navigator.userAgent)||void 0===r?void 0:r.indexOf("Firefox"))>-1,s="undefined"!=typeof navigator&&o?null===(n=navigator.userAgent)||void 0===n?void 0:n.match(/Firefox\/([0-9]+)\./)[1]:-1;"undefined"==typeof createImageBitmap||a||o&&s<98?this.textureLoader=new i.TextureLoader(this.options.manager):this.textureLoader=new i.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new i.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let r=this,n=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(t){let a={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:r,userData:{}};Q(i,a,n),X(a,n),Promise.all(r._invokeAll(function(e){return e.afterRoot&&e.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let n=0,i=t.length;n<i;n++){let a=t[n].joints;for(let o=0,s=a.length;o<s;o++)e[a[o]].isBone=!0}for(let l=0,u=e.length;l<u;l++){let c=e[l];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(r[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;let n=r.clone(),i=(e,t)=>{let r=this.associations.get(e);for(let[n,a]of(null!=r&&this.associations.set(t,r),e.children.entries()))i(a,t.children[n])};return i(r,n),n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){let n=e(t[r]);if(n)return n}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let r=[];for(let n=0;n<t.length;n++){let i=e(t[n]);i&&r.push(i)}return r}getDependency(e,t){let r=e+":"+t,n=this.cache.get(r);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this.loadNode(t);break;case"mesh":n=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":n=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":n=this.loadSkin(t);break;case"animation":n=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":n=this.loadCamera(t);break;default:throw Error("Unknown type: "+e)}this.cache.add(r,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){let r=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map(function(t,n){return r.getDependency(e,n)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],r=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[h.KHR_BINARY_GLTF].body);let n=this.options;return new Promise(function(e,a){r.load(i.LoaderUtils.resolveURL(t.uri,n.path),e,void 0,function(){a(Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){let r=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+r)})}loadAccessor(e){let t=this,r=this.json,n=this.json.accessors[e];if(void 0===n.bufferView&&void 0===n.sparse)return Promise.resolve(null);let a=[];return void 0!==n.bufferView?a.push(this.getDependency("bufferView",n.bufferView)):a.push(null),void 0!==n.sparse&&(a.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(a).then(function(e){let a,o;let s=e[0],l=O[n.type],u=L[n.componentType],c=u.BYTES_PER_ELEMENT,h=n.byteOffset||0,d=void 0!==n.bufferView?r.bufferViews[n.bufferView].byteStride:void 0,f=!0===n.normalized;if(d&&d!==c*l){let p=Math.floor(h/d),A="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+p+":"+n.count,B=t.cache.get(A);B||(a=new u(s,p*d,n.count*d/c),B=new i.InterleavedBuffer(a,d/c),t.cache.add(A,B)),o=new i.InterleavedBufferAttribute(B,l,h%d/c,f)}else a=null===s?new u(n.count*l):new u(s,h,n.count*l),o=new i.BufferAttribute(a,l,f);if(void 0!==n.sparse){let g=O.SCALAR,m=L[n.sparse.indices.componentType],v=n.sparse.indices.byteOffset||0,C=n.sparse.values.byteOffset||0,y=new m(e[1],v,n.sparse.count*g),b=new u(e[2],C,n.sparse.count*l);null!==s&&(o=new i.BufferAttribute(o.array.slice(),o.itemSize,o.normalized));for(let M=0,F=y.length;M<F;M++){let E=y[M];if(o.setX(E,b[M*l]),l>=2&&o.setY(E,b[M*l+1]),l>=3&&o.setZ(E,b[M*l+2]),l>=4&&o.setW(E,b[M*l+3]),l>=5)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o})}loadTexture(e){let t=this.json,r=this.options,n=t.textures[e],i=n.source,a=t.images[i],o=this.textureLoader;if(a.uri){let s=r.manager.getHandler(a.uri);null!==s&&(o=s)}return this.loadTextureImage(e,i,o)}loadTextureImage(e,t,r){let n=this,a=this.json,o=a.textures[e],s=a.images[t],l=(s.uri||s.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];let u=this.loadImageSource(t,r).then(function(t){t.flipY=!1,o.name&&(t.name=o.name);let r=a.samplers||{},s=r[o.sampler]||{};return t.magFilter=P[s.magFilter]||i.LinearFilter,t.minFilter=P[s.minFilter]||i.LinearMipmapLinearFilter,t.wrapS=H[s.wrapS]||i.RepeatWrapping,t.wrapT=H[s.wrapT]||i.RepeatWrapping,n.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){let r=this.json,n=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());let a=r.images[e],o=self.URL||self.webkitURL,s=a.uri||"",l=!1;if(void 0!==a.bufferView)s=this.getDependency("bufferView",a.bufferView).then(function(e){l=!0;let t=new Blob([e],{type:a.mimeType});return s=o.createObjectURL(t)});else if(void 0===a.uri)throw Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let u=Promise.resolve(s).then(function(e){return new Promise(function(r,a){let o=r;!0===t.isImageBitmapLoader&&(o=function(e){let t=new i.Texture(e);t.needsUpdate=!0,r(t)}),t.load(i.LoaderUtils.resolveURL(e,n.path),o,void 0,a)})}).then(function(e){var t;return!0===l&&o.revokeObjectURL(s),e.userData.mimeType=a.mimeType||((t=a.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",s),e});return this.sourceCache[e]=u,u}assignTexture(e,t,r,n){let i=this;return this.getDependency("texture",r.index).then(function(a){if(void 0===r.texCoord||0==r.texCoord||"aoMap"===t&&1==r.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),i.extensions[h.KHR_TEXTURE_TRANSFORM]){let o=void 0!==r.extensions?r.extensions[h.KHR_TEXTURE_TRANSFORM]:void 0;if(o){let s=i.associations.get(a);a=i.extensions[h.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),i.associations.set(a,s)}}return void 0!==n&&(a.encoding=n),e[t]=a,a})}assignFinalMaterial(e){let t=e.geometry,r=e.material,n=void 0===t.attributes.tangent,a=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){let s="PointsMaterial:"+r.uuid,l=this.cache.get(s);l||(l=new i.PointsMaterial,i.Material.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(s,l)),r=l}else if(e.isLine){let u="LineBasicMaterial:"+r.uuid,c=this.cache.get(u);c||(c=new i.LineBasicMaterial,i.Material.prototype.copy.call(c,r),c.color.copy(r.color),this.cache.add(u,c)),r=c}if(n||a||o){let h="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(h+="specular-glossiness:"),n&&(h+="derivative-tangents:"),a&&(h+="vertex-colors:"),o&&(h+="flat-shading:");let d=this.cache.get(h);d||(d=r.clone(),a&&(d.vertexColors=!0),o&&(d.flatShading=!0),n&&(d.normalScale&&(d.normalScale.y*=-1),d.clearcoatNormalScale&&(d.clearcoatNormalScale.y*=-1)),this.cache.add(h,d),this.associations.set(d,this.associations.get(r))),r=d}r.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return i.MeshStandardMaterial}loadMaterial(e){let t;let r=this,n=this.json,a=this.extensions,o=n.materials[e],s={},l=o.extensions||{},u=[];if(l[h.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){let c=a[h.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=c.getMaterialType(),u.push(c.extendParams(s,o,r))}else if(l[h.KHR_MATERIALS_UNLIT]){let d=a[h.KHR_MATERIALS_UNLIT];t=d.getMaterialType(),u.push(d.extendParams(s,o,r))}else{let f=o.pbrMetallicRoughness||{};if(s.color=new i.Color(1,1,1),s.opacity=1,Array.isArray(f.baseColorFactor)){let p=f.baseColorFactor;s.color.fromArray(p),s.opacity=p[3]}void 0!==f.baseColorTexture&&u.push(r.assignTexture(s,"map",f.baseColorTexture,i.sRGBEncoding)),s.metalness=void 0!==f.metallicFactor?f.metallicFactor:1,s.roughness=void 0!==f.roughnessFactor?f.roughnessFactor:1,void 0!==f.metallicRoughnessTexture&&(u.push(r.assignTexture(s,"metalnessMap",f.metallicRoughnessTexture)),u.push(r.assignTexture(s,"roughnessMap",f.metallicRoughnessTexture))),t=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)})))}!0===o.doubleSided&&(s.side=i.DoubleSide);let A=o.alphaMode||j.OPAQUE;if(A===j.BLEND?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,A===j.MASK&&(s.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&t!==i.MeshBasicMaterial&&(u.push(r.assignTexture(s,"normalMap",o.normalTexture)),s.normalScale=new i.Vector2(1,1),void 0!==o.normalTexture.scale)){let B=o.normalTexture.scale;s.normalScale.set(B,B)}return void 0!==o.occlusionTexture&&t!==i.MeshBasicMaterial&&(u.push(r.assignTexture(s,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(s.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&t!==i.MeshBasicMaterial&&(s.emissive=new i.Color().fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&t!==i.MeshBasicMaterial&&u.push(r.assignTexture(s,"emissiveMap",o.emissiveTexture,i.sRGBEncoding)),Promise.all(u).then(function(){let n;return n=t===G?a[h.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new t(s),o.name&&(n.name=o.name),X(n,o),r.associations.set(n,{materials:e}),o.extensions&&Q(a,n,o),n})}createUniqueName(e){let t=i.PropertyBinding.sanitizeNodeName(e||""),r=t;for(let n=1;this.nodeNamesUsed[r];++n)r=t+"_"+n;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){let t=this,r=this.extensions,n=this.primitiveCache,a=[];for(let o=0,s=e.length;o<s;o++){let l=e[o],u=function(e){let t=e.extensions&&e.extensions[h.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+W(t.attributes):e.indices+":"+W(e.attributes)+":"+e.mode}(l),c=n[u];if(c)a.push(c.promise);else{let d;d=l.extensions&&l.extensions[h.KHR_DRACO_MESH_COMPRESSION]?function(e){return r[h.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(r){return Z(r,e,t)})}(l):Z(new i.BufferGeometry,l,t),n[u]={primitive:l,promise:d},a.push(d)}}return Promise.all(a)}loadMesh(e){let t=this,r=this.json,n=this.extensions,a=r.meshes[e],o=a.primitives,s=[];for(let l=0,u=o.length;l<u;l++){var c;let h=void 0===o[l].material?(void 0===(c=this.cache).DefaultMaterial&&(c.DefaultMaterial=new i.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:i.FrontSide})),c.DefaultMaterial):this.getDependency("material",o[l].material);s.push(h)}return s.push(t.loadGeometries(o)),Promise.all(s).then(function(r){let s=r.slice(0,r.length-1),l=r[r.length-1],u=[];for(let c=0,h=l.length;c<h;c++){let d;let f=l[c],p=o[c],A=s[c];if(p.mode===k.TRIANGLES||p.mode===k.TRIANGLE_STRIP||p.mode===k.TRIANGLE_FAN||void 0===p.mode)!0!==(d=!0===a.isSkinnedMesh?new i.SkinnedMesh(f,A):new i.Mesh(f,A)).isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),p.mode===k.TRIANGLE_STRIP?d.geometry=z(d.geometry,i.TriangleStripDrawMode):p.mode===k.TRIANGLE_FAN&&(d.geometry=z(d.geometry,i.TriangleFanDrawMode));else if(p.mode===k.LINES)d=new i.LineSegments(f,A);else if(p.mode===k.LINE_STRIP)d=new i.Line(f,A);else if(p.mode===k.LINE_LOOP)d=new i.LineLoop(f,A);else if(p.mode===k.POINTS)d=new i.Points(f,A);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);Object.keys(d.geometry.morphAttributes).length>0&&function(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let r=0,n=t.weights.length;r<n;r++)e.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){let i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(let a=0,o=i.length;a<o;a++)e.morphTargetDictionary[i[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}(d,a),d.name=t.createUniqueName(a.name||"mesh_"+e),X(d,a),p.extensions&&Q(n,d,p),t.assignFinalMaterial(d),u.push(d)}for(let B=0,g=u.length;B<g;B++)t.associations.set(u[B],{meshes:e,primitives:B});if(1===u.length)return u[0];let m=new i.Group;t.associations.set(m,{meshes:e});for(let v=0,C=u.length;v<C;v++)m.add(u[v]);return m})}loadCamera(e){let t;let r=this.json.cameras[e],n=r[r.type];if(!n){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return"perspective"===r.type?t=new i.PerspectiveCamera(i.MathUtils.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===r.type&&(t=new i.OrthographicCamera(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),X(t,r),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],r={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return r.inverseBindMatrices=e,r})}loadAnimation(e){let t=this.json,r=t.animations[e],n=[],a=[],o=[],s=[],l=[];for(let u=0,c=r.channels.length;u<c;u++){let h=r.channels[u],d=r.samplers[h.sampler],f=h.target,p=f.node,A=void 0!==r.parameters?r.parameters[d.input]:d.input,B=void 0!==r.parameters?r.parameters[d.output]:d.output;n.push(this.getDependency("node",p)),a.push(this.getDependency("accessor",A)),o.push(this.getDependency("accessor",B)),s.push(d),l.push(f)}return Promise.all([Promise.all(n),Promise.all(a),Promise.all(o),Promise.all(s),Promise.all(l)]).then(function(t){let n=t[0],a=t[1],o=t[2],s=t[3],l=t[4],u=[];for(let c=0,h=n.length;c<h;c++){let d;let f=n[c],p=a[c],A=o[c],B=s[c],g=l[c];if(void 0===f)continue;switch(f.updateMatrix(),N[g.path]){case N.weights:d=i.NumberKeyframeTrack;break;case N.rotation:d=i.QuaternionKeyframeTrack;break;case N.position:case N.scale:default:d=i.VectorKeyframeTrack}let m=f.name?f.name:f.uuid,v=void 0!==B.interpolation?K[B.interpolation]:i.InterpolateLinear,C=[];N[g.path]===N.weights?f.traverse(function(e){e.morphTargetInfluences&&C.push(e.name?e.name:e.uuid)}):C.push(m);let y=A.array;if(A.normalized){let b=V(y.constructor),M=new Float32Array(y.length);for(let F=0,E=y.length;F<E;F++)M[F]=y[F]*b;y=M}for(let T=0,x=C.length;T<x;T++){let S=new d(C[T]+"."+N[g.path],p.array,y,v);"CUBICSPLINE"===B.interpolation&&(S.createInterpolant=function(e){let t=this instanceof i.QuaternionKeyframeTrack?_:U;return new t(this.times,this.values,this.getValueSize()/3,e)},S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(S)}}let I=r.name?r.name:"animation_"+e;return new i.AnimationClip(I,void 0,u)})}createNodeMesh(e){let t=this.json,r=this,n=t.nodes[e];return void 0===n.mesh?null:r.getDependency("mesh",n.mesh).then(function(e){let t=r._getNodeRef(r.meshCache,n.mesh,e);return void 0!==n.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,r=n.weights.length;t<r;t++)e.morphTargetInfluences[t]=n.weights[t]}),t})}loadNode(e){let t=this.json,r=this.extensions,n=this,a=t.nodes[e],o=a.name?n.createUniqueName(a.name):"";return(function(){let t=[],r=n._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return r&&t.push(r),void 0!==a.camera&&t.push(n.getDependency("camera",a.camera).then(function(e){return n._getNodeRef(n.cameraCache,a.camera,e)})),n._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){t.push(e)}),Promise.all(t)})().then(function(t){let s;if((s=!0===a.isBone?new i.Bone:t.length>1?new i.Group:1===t.length?t[0]:new i.Object3D)!==t[0])for(let l=0,u=t.length;l<u;l++)s.add(t[l]);if(a.name&&(s.userData.name=a.name,s.name=o),X(s,a),a.extensions&&Q(r,s,a),void 0!==a.matrix){let c=new i.Matrix4;c.fromArray(a.matrix),s.applyMatrix4(c)}else void 0!==a.translation&&s.position.fromArray(a.translation),void 0!==a.rotation&&s.quaternion.fromArray(a.rotation),void 0!==a.scale&&s.scale.fromArray(a.scale);return n.associations.has(s)||n.associations.set(s,{}),n.associations.get(s).nodes=e,s})}loadScene(e){let t=this.json,r=this.extensions,n=this.json.scenes[e],a=this,o=new i.Group;n.name&&(o.name=a.createUniqueName(n.name)),X(o,n),n.extensions&&Q(r,o,n);let s=n.nodes||[],l=[];for(let u=0,c=s.length;u<c;u++)l.push(function e(t,r,n,a){let o=n.nodes[t];return a.getDependency("node",t).then(function(e){let t;return void 0===o.skin?e:a.getDependency("skin",o.skin).then(function(e){t=e;let r=[];for(let n=0,i=t.joints.length;n<i;n++)r.push(a.getDependency("node",t.joints[n]));return Promise.all(r)}).then(function(r){return e.traverse(function(e){if(!e.isMesh)return;let n=[],a=[];for(let o=0,s=r.length;o<s;o++){let l=r[o];if(l){n.push(l);let u=new i.Matrix4;void 0!==t.inverseBindMatrices&&u.fromArray(t.inverseBindMatrices.array,16*o),a.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}e.bind(new i.Skeleton(n,a),e.matrixWorld)}),e})}).then(function(t){r.add(t);let i=[];if(o.children){let s=o.children;for(let l=0,u=s.length;l<u;l++){let c=s[l];i.push(e(c,t,n,a))}}return Promise.all(i)})}(s[u],o,t,a));return Promise.all(l).then(function(){return a.associations=(e=>{let t=new Map;for(let[r,n]of a.associations)(r instanceof i.Material||r instanceof i.Texture)&&t.set(r,n);return e.traverse(e=>{let r=a.associations.get(e);null!=r&&t.set(e,r)}),t})(o),o})}}function Z(e,t,r){let n=t.attributes,a=[];for(let o in n){let s=J[o]||o.toLowerCase();s in e.attributes||a.push(function(t,n){return r.getDependency("accessor",t).then(function(t){e.setAttribute(n,t)})}(n[o],s))}if(void 0!==t.indices&&!e.index){let l=r.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});a.push(l)}return X(e,t),!function(e,t,r){let n=t.attributes,a=new i.Box3;if(void 0===n.POSITION)return;{let o=r.json.accessors[n.POSITION],s=o.min,l=o.max;if(void 0!==s&&void 0!==l){if(a.set(new i.Vector3(s[0],s[1],s[2]),new i.Vector3(l[0],l[1],l[2])),o.normalized){let u=V(L[o.componentType]);a.min.multiplyScalar(u),a.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}let c=t.targets;if(void 0!==c){let h=new i.Vector3,d=new i.Vector3;for(let f=0,p=c.length;f<p;f++){let A=c[f];if(void 0!==A.POSITION){let B=r.json.accessors[A.POSITION],g=B.min,m=B.max;if(void 0!==g&&void 0!==m){if(d.setX(Math.max(Math.abs(g[0]),Math.abs(m[0]))),d.setY(Math.max(Math.abs(g[1]),Math.abs(m[1]))),d.setZ(Math.max(Math.abs(g[2]),Math.abs(m[2]))),B.normalized){let v=V(L[B.componentType]);d.multiplyScalar(v)}h.max(d)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(h)}e.boundingBox=a;let C=new i.Sphere;a.getCenter(C.center),C.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=C}(e,t,r),Promise.all(a).then(function(){return void 0!==t.targets?function(e,t,r){let n=!1,i=!1,a=!1;for(let o=0,s=t.length;o<s;o++){let l=t[o];if(void 0!==l.POSITION&&(n=!0),void 0!==l.NORMAL&&(i=!0),void 0!==l.COLOR_0&&(a=!0),n&&i&&a)break}if(!n&&!i&&!a)return Promise.resolve(e);let u=[],c=[],h=[];for(let d=0,f=t.length;d<f;d++){let p=t[d];if(n){let A=void 0!==p.POSITION?r.getDependency("accessor",p.POSITION):e.attributes.position;u.push(A)}if(i){let B=void 0!==p.NORMAL?r.getDependency("accessor",p.NORMAL):e.attributes.normal;c.push(B)}if(a){let g=void 0!==p.COLOR_0?r.getDependency("accessor",p.COLOR_0):e.attributes.color;h.push(g)}}return Promise.all([Promise.all(u),Promise.all(c),Promise.all(h)]).then(function(t){let r=t[0],o=t[1],s=t[2];return n&&(e.morphAttributes.position=r),i&&(e.morphAttributes.normal=o),a&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e})}(e,t.targets,r):e})}function z(e,t){let r=e.getIndex();if(null===r){let n=[],a=e.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let o=0;o<a.count;o++)n.push(o);e.setIndex(n),r=e.getIndex()}let s=r.count-2,l=[];if(t===i.TriangleFanDrawMode)for(let u=1;u<=s;u++)l.push(r.getX(0)),l.push(r.getX(u)),l.push(r.getX(u+1));else for(let c=0;c<s;c++)c%2==0?(l.push(r.getX(c)),l.push(r.getX(c+1)),l.push(r.getX(c+2))):(l.push(r.getX(c+2)),l.push(r.getX(c+1)),l.push(r.getX(c)));l.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let h=e.clone();return h.setIndex(l),h}var q=r(1964);let $=null;function ee(e,t,r){return n=>{r&&r(n),e&&($||($=new o),$.setDecoderPath("string"==typeof e?e:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),n.setDRACOLoader($)),t&&n.setMeshoptDecoder("function"==typeof l?l():l)}}function et(e,t=!0,r=!0,n){let i=(0,q.D)(u,e,ee(t,r,n));return i}et.preload=(e,t=!0,r=!0,n)=>q.D.preload(u,e,ee(t,r,n)),et.clear=e=>q.D.clear(u,e)},543:function(e,t,r){r.d(t,{useDrag:function(){return j}});let n={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function i(e,t,r){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*r):e*t*r/(t+r*e)}function a(e,t,r,n=.15){return 0===n?Math.max(t,Math.min(e,r)):e<t?-i(t-e,r-t,n)+t:e>r?+i(e-r,r-t,n)+r:e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let u={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function c(e){return e?e[0].toUpperCase()+e.slice(1):""}let h=["enter","leave"],d=["gotpointercapture","lostpointercapture"];function f(e){return"touches"in e}function p(e){return f(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function A(e){return f(e)?("touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches)[0]:e}function B(e){let t=A(e);return f(e)?t.identifier:t.pointerId}function g(e){let t=A(e);return[t.clientX,t.clientY]}function m(e,...t){return"function"==typeof e?e(...t):e}function v(){}function C(e,t){return Object.assign({},t,e||{})}class y{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){let{state:e,shared:t,ingKey:r,args:n}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=n,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){let t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?m(r.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}computeValues(e){let t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){let e=this.state;e._initial=e._values,e.initial=e.values}compute(e){let{state:t,config:r,shared:i}=this;t.args=this.args;let o=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,function(e){let t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){let{shiftKey:r,altKey:n,metaKey:i,ctrlKey:a}=e;Object.assign(t,{shiftKey:r,altKey:n,metaKey:i,ctrlKey:a})}return t}(e)),i.down=i.pressed=i.buttons%2==1||i.touches>0,o=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){let s=t._delta.map(Math.abs);n.addTo(t._distance,s)}this.axisIntent&&this.axisIntent(e);let[l,u]=t._movement,[c,h]=r.threshold,{_step:d,values:f}=t;if(r.hasCustomTransform?(!1===d[0]&&(d[0]=Math.abs(l)>=c&&f[0]),!1===d[1]&&(d[1]=Math.abs(u)>=h&&f[1])):(!1===d[0]&&(d[0]=Math.abs(l)>=c&&Math.sign(l)*c),!1===d[1]&&(d[1]=Math.abs(u)>=h&&Math.sign(u)*h)),t.intentional=!1!==d[0]||!1!==d[1],!t.intentional)return;let p=[0,0];if(r.hasCustomTransform){let[A,B]=f;p[0]=!1!==d[0]?A-d[0]:0,p[1]=!1!==d[1]?B-d[1]:0}else p[0]=!1!==d[0]?l-d[0]:0,p[1]=!1!==d[1]?u-d[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(p);let g=t.offset,v=t._active&&!t._blocked||t.active;v&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=m(r.bounds,t)),this.setup&&this.setup()),t.movement=p,this.computeOffset()));let[C,y]=t.offset,[[b,M],[F,E]]=t._bounds;t.overflow=[C<b?-1:C>M?1:0,y<F?-1:y>E?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);let T=t._active&&r.rubberband||[0,0];if(t.offset=function(e,[t,r],[n,i]){let[[o,s],[l,u]]=e;return[a(t,o,s,n),a(r,l,u,i)]}(t._bounds,t.offset,T),t.delta=n.sub(t.offset,g),this.computeMovement(),v&&(!t.last||o>32)){t.delta=n.sub(t.offset,g);let x=t.delta.map(Math.abs);n.addTo(t.distance,x),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&o>0&&(t.velocity=[x[0]/o,x[1]/o])}}emit(){let e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;let n=this.handler(l(l(l({},t),e),{},{[this.aliasKey]:e.values}));void 0!==n&&(e.memo=n)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class b extends y{constructor(...e){super(...e),o(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=n.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=n.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){let t=this.state,r=this.config;if(!t.axis&&e){let n="object"==typeof r.axisThreshold?r.axisThreshold[p(e)]:r.axisThreshold;t.axis=function([e,t],r){let n=Math.abs(e),i=Math.abs(t);return n>i&&n>r?"x":i>n&&i>r?"y":void 0}(t._movement,n)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}let M=e=>e,F={enabled:(e=!0)=>e,eventOptions:(e,t,r)=>l(l({},r.shared.eventOptions),e),preventDefault:(e=!1)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return n.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?n.toVector(e):void 0,transform(e,t,r){let n=e||r.shared.transform;return this.hasCustomTransform=!!n,n||M},threshold:e=>n.toVector(e,0)},E=l(l({},F),{},{axis(e,t,{axis:r}){if(this.lockDirection="lock"===r,!this.lockDirection)return r},axisThreshold:(e=0)=>e,bounds(e={}){if("function"==typeof e)return t=>E.bounds(e(t));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;let{left:t=-1/0,right:r=1/0,top:n=-1/0,bottom:i=1/0}=e;return[[t,r],[n,i]]}}),T={ArrowRight:(e=1)=>[10*e,0],ArrowLeft:(e=1)=>[-10*e,0],ArrowUp:(e=1)=>[0,-10*e],ArrowDown:(e=1)=>[0,10*e]},x="undefined"!=typeof window&&window.document&&window.document.createElement;function S(){return x&&"ontouchstart"in window||x&&window.navigator.maxTouchPoints>1}let I={isBrowser:x,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:S(),touchscreen:S(),pointer:x&&"onpointerdown"in window,pointerLock:x&&"exitPointerLock"in window.document},G={mouse:0,touch:0,pen:8},D=l(l({},E),{},{device(e,t,{pointer:{touch:r=!1,lock:n=!1,mouse:i=!1}={}}){return(this.pointerLock=n&&I.pointerLock,I.touch&&r)?"touch":this.pointerLock?"mouse":I.pointer&&!i?"pointer":I.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:r}){if(this.preventScrollDelay="number"==typeof r?r:r||void 0===r&&e?250:void 0,I.touchscreen&&!1!==r)return e||(void 0!==r?"y":void 0)},pointerCapture(e,t,{pointer:{capture:r=!0,buttons:n=1,keys:i=!0}={}}){return this.pointerButtons=n,this.keys=i,!this.pointerLock&&"pointer"===this.device&&r},threshold(e,t,{filterTaps:r=!1,tapsThreshold:i=3,axis:a}){let o=n.toVector(e,r?i:a?1:0);return this.filterTaps=r,this.tapsThreshold=i,o},swipe({velocity:e=.5,distance:t=50,duration:r=250}={}){return{velocity:this.transform(n.toVector(e)),distance:this.transform(n.toVector(t)),duration:r}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?l(l({},G),e):G});l(l({},F),{},{device(e,t,{shared:r,pointer:{touch:n=!1}={}}){if(r.target&&!I.touch&&I.gesture)return"gesture";if(I.touch&&n)return"touch";if(I.touchscreen){if(I.pointer)return"pointer";if(I.touch)return"touch"}},bounds(e,t,{scaleBounds:r={},angleBounds:n={}}){let i=e=>{let t=C(m(r,e),{min:-1/0,max:1/0});return[t.min,t.max]},a=e=>{let t=C(m(n,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof r&&"function"!=typeof n?[i(),a()]:e=>[i(e),a(e)]},threshold(e,t,r){this.lockDirection="lock"===r.axis;let i=n.toVector(e,this.lockDirection?[.1,3]:0);return i},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel:(e=!0)=>e}),l(l({},E),{},{mouseOnly:(e=!0)=>e}),l(l({},E),{},{mouseOnly:(e=!0)=>e});let R=new Map,U=new Map,w={key:"drag",engine:class extends b{constructor(...e){super(...e),o(this,"ingKey","dragging")}reset(){super.reset();let e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){let e=this.state;if(e._bounds instanceof HTMLElement){let t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),n={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=E.bounds(n)}}cancel(){let e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){let t=this.config,r=this.state;if(null!=e.buttons&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):-1!==t.pointerButtons&&t.pointerButtons!==e.buttons))return;let n=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),n&&n.size>1&&r._pointerActive||(this.start(e),this.setupPointer(e),r._pointerId=B(e),r._pointerActive=!0,this.computeValues(g(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==p(e)?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){let t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){let t=this.state,r=this.config;if(!t._pointerActive||t.type===e.type&&e.timeStamp===t.timeStamp)return;let i=B(e);if(void 0!==t._pointerId&&i!==t._pointerId)return;let a=g(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=n.sub(a,t._values),this.computeValues(a)),n.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll){if(!t.axis)return;if(t.axis===r.preventScrollAxis||"xy"===r.preventScrollAxis){t._active=!1,this.clean();return}this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(t){}let r=this.state,n=this.config;if(!r._active||!r._pointerActive)return;let i=B(e);if(void 0!==r._pointerId&&i!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);let[a,o]=r._distance;if(r.tap=a<=n.tapsThreshold&&o<=n.tapsThreshold,r.tap&&n.filterTaps)r._force=!0;else{let[s,l]=r.direction,[u,c]=r.velocity,[h,d]=r.movement,[f,p]=n.swipe.velocity,[A,g]=n.swipe.distance,m=n.swipe.duration;r.elapsedTime<m&&(Math.abs(u)>f&&Math.abs(h)>A&&(r.swipe[0]=s),Math.abs(c)>p&&Math.abs(d)>g&&(r.swipe[1]=l))}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){let t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,"persist"in e&&"function"==typeof e.persist&&e.persist();let t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){let t=T[e.key];if(t){let r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(i),r._keyboardActive=!0,n.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in T&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){let t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},resolver:D};var _=r(7378);let k={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=I.isBrowser?window:void 0)=>e,eventOptions:({passive:e=!0,capture:t=!1}={})=>({passive:e,capture:t}),transform:e=>e},L=["target","eventOptions","window","enabled","transform"];function P(e={},t){let r={};for(let[n,i]of Object.entries(t))switch(typeof i){case"function":r[n]=i.call(r,e[n],n,e);break;case"object":r[n]=P(e[n],i);break;case"boolean":i&&(r[n]=e[n])}return r}class H{constructor(e,t){o(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,n,i){let a=this._listeners,o=function(e,t=""){let r=u[e],n=r&&r[t]||t;return e+n}(t,r),s=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=l(l({},s),i);e.addEventListener(o,n,c);let h=()=>{e.removeEventListener(o,n,c),a.delete(h)};return a.add(h),h}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class O{constructor(){o(this,"_timeouts",new Map)}add(e,t,r=140,...n){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...n))}remove(e){let t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class J{constructor(e){o(this,"gestures",new Set),o(this,"_targetEventStore",new H(this)),o(this,"gestureEventStores",{}),o(this,"gestureTimeoutStores",{}),o(this,"handlers",{}),o(this,"config",{}),o(this,"pointerIds",new Set),o(this,"touchIds",new Set),o(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),e.drag&&N(this,"drag"),e.wheel&&N(this,"wheel"),e.scroll&&N(this,"scroll"),e.move&&N(this,"move"),e.pinch&&N(this,"pinch"),e.hover&&N(this,"hover")}setEventIds(e){return f(e)?(this.touchIds=new Set(Array.from(e.touches).filter(t=>{var r,n;return t.target===e.currentTarget||(null===(r=e.currentTarget)||void 0===r?void 0:null===(n=r.contains)||void 0===n?void 0:n.call(r,t.target))}).map(e=>e.identifier)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t,r={}){let{target:n,eventOptions:i,window:a,enabled:o,transform:s}=e,u=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,L);if(r.shared=P({target:n,eventOptions:i,window:a,enabled:o,transform:s},k),t){let c=U.get(t);r[t]=P(l({shared:r.shared},u),c)}else for(let h in u){let d=U.get(h);d&&(r[h]=P(l({shared:r.shared},u[h]),d))}return r}(e,t,this.config)}clean(){for(let e of(this._targetEventStore.clean(),this.gestures))this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){let t;let r=this.config.shared,n={};if(!r.target||(t=r.target())){if(r.enabled){for(let i of this.gestures){let a=this.config[i],o=K(n,a.eventOptions,!!t);if(a.enabled){let s=R.get(i);new s(this,e,i).bind(o)}}let u=K(n,r.eventOptions,!!t);for(let c in this.nativeHandlers)u(c,"",t=>this.nativeHandlers[c](l(l({},this.state.shared),{},{event:t,args:e})),void 0,!0)}for(let h in n)n[h]=function(...e){return 0===e.length?v:1===e.length?e[0]:function(){let t;for(let r of e)t=r.apply(this,arguments)||t;return t}}(...n[h]);if(!t)return n;for(let f in n){let{device:p,capture:A,passive:B}=function(e){let t=e.substring(2).toLowerCase(),r=!!~t.indexOf("passive");r&&(t=t.replace("passive",""));let n=d.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(n);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:r}}(f);this._targetEventStore.add(t,p,"",n[f],{capture:A,passive:B})}}}}function N(e,t){e.gestures.add(t),e.gestureEventStores[t]=new H(e,t),e.gestureTimeoutStores[t]=new O}let K=(e,t,r)=>(n,i,a,o={},s=!1)=>{var l,d;let f=null!==(l=o.capture)&&void 0!==l?l:t.capture,p=null!==(d=o.passive)&&void 0!==d?d:t.passive,A=s?n:function(e,t="",r=!1){let n=u[e],i=n&&n[t]||t;return"on"+c(e)+c(i)+(!function(e=!1,t){return e&&!h.includes(t)}(r,i)?"":"Capture")}(n,i,f);r&&p&&(A+="Passive"),e[A]=e[A]||[],e[A].push(a)};function j(e,t){return R.set(w.key,w.engine),U.set(w.key,w.resolver),function(e,t={},r,n){let i=_.useMemo(()=>new J(e),[]);if(i.applyHandlers(e,void 0),i.applyConfig(t,r),_.useEffect(i.effect.bind(i)),_.useEffect(()=>i.clean.bind(i),[]),void 0===t.target)return i.bind.bind(i)}({drag:e},t||{},"drag")}},8620:function(e,t,r){r.d(t,{u:function(){return i}});var n=r(9477);class i extends n.Loader{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,t,r,i){let a=this,o=new n.FileLoader(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,function(r){try{t(a.parse(r))}catch(n){i?i(n):console.error(n),a.manager.itemError(e)}},r,i)}parse(e){let t=this;function r(e,t,r,n,a,o,s,l){if(0==t||0==r){e.lineTo(l.x,l.y);return}n=n*Math.PI/180,t=Math.abs(t),r=Math.abs(r);let u=(s.x-l.x)/2,c=(s.y-l.y)/2,h=Math.cos(n)*u+Math.sin(n)*c,d=-Math.sin(n)*u+Math.cos(n)*c,f=t*t,p=r*r,A=h*h,B=d*d,g=A/f+B/p;if(g>1){let m=Math.sqrt(g);t*=m,r*=m,f=t*t,p=r*r}let v=f*B+p*A,C=(f*p-v)/v,y=Math.sqrt(Math.max(0,C));a===o&&(y=-y);let b=y*t*d/r,M=-y*r*h/t,F=Math.cos(n)*b-Math.sin(n)*M+(s.x+l.x)/2,E=Math.sin(n)*b+Math.cos(n)*M+(s.y+l.y)/2,T=i(1,0,(h-b)/t,(d-M)/r),x=i((h-b)/t,(d-M)/r,(-h-b)/t,(-d-M)/r)%(2*Math.PI);e.currentPath.absellipse(F,E,t,r,T,T+x,0===o,n)}function i(e,t,r,n){let i=Math.acos(Math.max(-1,Math.min(1,(e*r+t*n)/(Math.sqrt(e*e+t*t)*Math.sqrt(r*r+n*n)))));return e*n-t*r<0&&(i=-i),i}function a(e,t){t=Object.assign({},t);let r={};if(e.hasAttribute("class")){let n=e.getAttribute("class").split(/\s/).filter(Boolean).map(e=>e.trim());for(let i=0;i<n.length;i++)r=Object.assign(r,h["."+n[i]])}function a(n,i,a){void 0===a&&(a=function(e){return e.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),e}),e.hasAttribute(n)&&(t[i]=a(e.getAttribute(n))),r[n]&&(t[i]=a(r[n])),e.style&&""!==e.style[n]&&(t[i]=a(e.style[n]))}function o(e){return Math.max(0,Math.min(1,u(e)))}function s(e){return Math.max(0,u(e))}return e.hasAttribute("id")&&(r=Object.assign(r,h["#"+e.getAttribute("id")])),a("fill","fill"),a("fill-opacity","fillOpacity",o),a("fill-rule","fillRule"),a("opacity","opacity",o),a("stroke","stroke"),a("stroke-opacity","strokeOpacity",o),a("stroke-width","strokeWidth",s),a("stroke-linejoin","strokeLineJoin"),a("stroke-linecap","strokeLineCap"),a("stroke-miterlimit","strokeMiterLimit",s),a("visibility","visibility"),t}function o(e,t,r){let n;if("string"!=typeof e)throw TypeError("Invalid input: "+typeof e);let i={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},a=0,o=!0,s="",l="",u=[];function c(e,t,r){let n=SyntaxError('Unexpected character "'+e+'" at index '+t+".");throw n.partial=r,n}function h(){""!==s&&(""===l?u.push(Number(s)):u.push(Number(s)*Math.pow(10,Number(l)))),s="",l=""}let d=e.length;for(let f=0;f<d;f++){if(n=e[f],Array.isArray(t)&&t.includes(u.length%r)&&i.FLAGS.test(n)){a=1,s=n,h();continue}if(0===a){if(i.WHITESPACE.test(n))continue;if(i.DIGIT.test(n)||i.SIGN.test(n)){a=1,s=n;continue}if(i.POINT.test(n)){a=2,s=n;continue}i.COMMA.test(n)&&(o&&c(n,f,u),o=!0)}if(1===a){if(i.DIGIT.test(n)){s+=n;continue}if(i.POINT.test(n)){s+=n,a=2;continue}if(i.EXP.test(n)){a=3;continue}i.SIGN.test(n)&&1===s.length&&i.SIGN.test(s[0])&&c(n,f,u)}if(2===a){if(i.DIGIT.test(n)){s+=n;continue}if(i.EXP.test(n)){a=3;continue}i.POINT.test(n)&&"."===s[s.length-1]&&c(n,f,u)}if(3===a){if(i.DIGIT.test(n)){l+=n;continue}if(i.SIGN.test(n)){if(""===l){l+=n;continue}1===l.length&&i.SIGN.test(l)&&c(n,f,u)}}i.WHITESPACE.test(n)?(h(),a=0,o=!1):i.COMMA.test(n)?(h(),a=0,o=!0):i.SIGN.test(n)?(h(),a=1,s=n):i.POINT.test(n)?(h(),a=2,s=n):c(n,f,u)}return h(),u}let s=["mm","cm","in","pt","pc","px"],l={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function u(e){let r,n="px";if("string"==typeof e||e instanceof String)for(let i=0,a=s.length;i<a;i++){let o=s[i];if(e.endsWith(o)){n=o,e=e.substring(0,e.length-o.length);break}}return"px"===n&&"px"!==t.defaultUnit?r=l.in[t.defaultUnit]/t.defaultDPI:(r=l[n][t.defaultUnit])<0&&(r=l[n].in*t.defaultDPI),r*parseFloat(e)}let c=[],h={},d=[],f=new n.Matrix3,p=new n.Matrix3,A=new n.Matrix3,B=new n.Matrix3,g=new n.Vector2,m=new n.Vector3,v=new n.Matrix3,C=new DOMParser().parseFromString(e,"image/svg+xml");!function e(t,i){if(1!==t.nodeType)return;let s=function(e){if(!(e.hasAttribute("transform")||"use"===e.nodeName&&(e.hasAttribute("x")||e.hasAttribute("y"))))return null;let t=function(e){let t=new n.Matrix3;if("use"===e.nodeName&&(e.hasAttribute("x")||e.hasAttribute("y"))){let r=u(e.getAttribute("x")),i=u(e.getAttribute("y"));t.translate(r,i)}if(e.hasAttribute("transform")){let a=e.getAttribute("transform").split(")");for(let s=a.length-1;s>=0;s--){let l=a[s].trim();if(""===l)continue;let c=l.indexOf("("),h=l.length;if(c>0&&c<h){let d=l.substr(0,c),g=o(l.substr(c+1,h-c-1));switch(f.identity(),d){case"translate":if(g.length>=1){let m=g[0],v=m;g.length>=2&&(v=g[1]),f.translate(m,v)}break;case"rotate":if(g.length>=1){let C=0,y=0,b=0;C=-g[0]*Math.PI/180,g.length>=3&&(y=g[1],b=g[2]),p.identity().translate(-y,-b),A.identity().rotate(C),B.multiplyMatrices(A,p),p.identity().translate(y,b),f.multiplyMatrices(p,B)}break;case"scale":if(g.length>=1){let M=g[0],F=M;g.length>=2&&(F=g[1]),f.scale(M,F)}break;case"skewX":1===g.length&&f.set(1,Math.tan(g[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===g.length&&f.set(1,0,0,Math.tan(g[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===g.length&&f.set(g[0],g[2],g[4],g[1],g[3],g[5],0,0,1)}}t.premultiply(f)}}return t}(e);return d.length>0&&t.premultiply(d[d.length-1]),v.copy(t),d.push(t),t}(t),l=!0,C=null;switch(t.nodeName){case"svg":break;case"style":!function(e){if(e.sheet&&e.sheet.cssRules&&e.sheet.cssRules.length)for(let t=0;t<e.sheet.cssRules.length;t++){let r=e.sheet.cssRules[t];if(1!==r.type)continue;let n=r.selectorText.split(/,/gm).filter(Boolean).map(e=>e.trim());for(let i=0;i<n.length;i++)h[n[i]]=Object.assign(h[n[i]]||{},r.style)}}(t);break;case"g":i=a(t,i);break;case"path":i=a(t,i),t.hasAttribute("d")&&(C=function(e){let t=new n.ShapePath,i=new n.Vector2,a=new n.Vector2,s=new n.Vector2,l=!0,u=!1,c=e.getAttribute("d"),h=c.match(/[a-df-z][^a-df-z]*/gi);for(let d=0,f=h.length;d<f;d++){var p,A,B,g,m,v,C,y;let b;let M=h[d],F=M.charAt(0),E=M.substr(1).trim();switch(!0===l&&(u=!0,l=!1),F){case"M":b=o(E);for(let T=0,x=b.length;T<x;T+=2)i.x=b[T+0],i.y=b[T+1],a.x=i.x,a.y=i.y,0===T?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y),0===T&&s.copy(i);break;case"H":b=o(E);for(let S=0,I=b.length;S<I;S++)i.x=b[S],a.x=i.x,a.y=i.y,t.lineTo(i.x,i.y),0===S&&!0===u&&s.copy(i);break;case"V":b=o(E);for(let G=0,D=b.length;G<D;G++)i.y=b[G],a.x=i.x,a.y=i.y,t.lineTo(i.x,i.y),0===G&&!0===u&&s.copy(i);break;case"L":b=o(E);for(let R=0,U=b.length;R<U;R+=2)i.x=b[R+0],i.y=b[R+1],a.x=i.x,a.y=i.y,t.lineTo(i.x,i.y),0===R&&!0===u&&s.copy(i);break;case"C":b=o(E);for(let w=0,_=b.length;w<_;w+=6)t.bezierCurveTo(b[w+0],b[w+1],b[w+2],b[w+3],b[w+4],b[w+5]),a.x=b[w+2],a.y=b[w+3],i.x=b[w+4],i.y=b[w+5],0===w&&!0===u&&s.copy(i);break;case"S":b=o(E);for(let k=0,L=b.length;k<L;k+=4)t.bezierCurveTo((p=i.x)-(a.x-p),(A=i.y)-(a.y-A),b[k+0],b[k+1],b[k+2],b[k+3]),a.x=b[k+0],a.y=b[k+1],i.x=b[k+2],i.y=b[k+3],0===k&&!0===u&&s.copy(i);break;case"Q":b=o(E);for(let P=0,H=b.length;P<H;P+=4)t.quadraticCurveTo(b[P+0],b[P+1],b[P+2],b[P+3]),a.x=b[P+0],a.y=b[P+1],i.x=b[P+2],i.y=b[P+3],0===P&&!0===u&&s.copy(i);break;case"T":b=o(E);for(let O=0,J=b.length;O<J;O+=2){let N=(B=i.x)-(a.x-B),K=(g=i.y)-(a.y-g);t.quadraticCurveTo(N,K,b[O+0],b[O+1]),a.x=N,a.y=K,i.x=b[O+0],i.y=b[O+1],0===O&&!0===u&&s.copy(i)}break;case"A":b=o(E,[3,4],7);for(let j=0,Q=b.length;j<Q;j+=7){if(b[j+5]==i.x&&b[j+6]==i.y)continue;let X=i.clone();i.x=b[j+5],i.y=b[j+6],a.x=i.x,a.y=i.y,r(t,b[j],b[j+1],b[j+2],b[j+3],b[j+4],X,i),0===j&&!0===u&&s.copy(i)}break;case"m":b=o(E);for(let W=0,V=b.length;W<V;W+=2)i.x+=b[W+0],i.y+=b[W+1],a.x=i.x,a.y=i.y,0===W?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y),0===W&&s.copy(i);break;case"h":b=o(E);for(let Y=0,Z=b.length;Y<Z;Y++)i.x+=b[Y],a.x=i.x,a.y=i.y,t.lineTo(i.x,i.y),0===Y&&!0===u&&s.copy(i);break;case"v":b=o(E);for(let z=0,q=b.length;z<q;z++)i.y+=b[z],a.x=i.x,a.y=i.y,t.lineTo(i.x,i.y),0===z&&!0===u&&s.copy(i);break;case"l":b=o(E);for(let $=0,ee=b.length;$<ee;$+=2)i.x+=b[$+0],i.y+=b[$+1],a.x=i.x,a.y=i.y,t.lineTo(i.x,i.y),0===$&&!0===u&&s.copy(i);break;case"c":b=o(E);for(let et=0,er=b.length;et<er;et+=6)t.bezierCurveTo(i.x+b[et+0],i.y+b[et+1],i.x+b[et+2],i.y+b[et+3],i.x+b[et+4],i.y+b[et+5]),a.x=i.x+b[et+2],a.y=i.y+b[et+3],i.x+=b[et+4],i.y+=b[et+5],0===et&&!0===u&&s.copy(i);break;case"s":b=o(E);for(let en=0,ei=b.length;en<ei;en+=4)t.bezierCurveTo((m=i.x)-(a.x-m),(v=i.y)-(a.y-v),i.x+b[en+0],i.y+b[en+1],i.x+b[en+2],i.y+b[en+3]),a.x=i.x+b[en+0],a.y=i.y+b[en+1],i.x+=b[en+2],i.y+=b[en+3],0===en&&!0===u&&s.copy(i);break;case"q":b=o(E);for(let ea=0,eo=b.length;ea<eo;ea+=4)t.quadraticCurveTo(i.x+b[ea+0],i.y+b[ea+1],i.x+b[ea+2],i.y+b[ea+3]),a.x=i.x+b[ea+0],a.y=i.y+b[ea+1],i.x+=b[ea+2],i.y+=b[ea+3],0===ea&&!0===u&&s.copy(i);break;case"t":b=o(E);for(let es=0,el=b.length;es<el;es+=2){let eu=(C=i.x)-(a.x-C),ec=(y=i.y)-(a.y-y);t.quadraticCurveTo(eu,ec,i.x+b[es+0],i.y+b[es+1]),a.x=eu,a.y=ec,i.x=i.x+b[es+0],i.y=i.y+b[es+1],0===es&&!0===u&&s.copy(i)}break;case"a":b=o(E,[3,4],7);for(let eh=0,ed=b.length;eh<ed;eh+=7){if(0==b[eh+5]&&0==b[eh+6])continue;let ef=i.clone();i.x+=b[eh+5],i.y+=b[eh+6],a.x=i.x,a.y=i.y,r(t,b[eh],b[eh+1],b[eh+2],b[eh+3],b[eh+4],ef,i),0===eh&&!0===u&&s.copy(i)}break;case"Z":case"z":t.currentPath.autoClose=!0,t.currentPath.curves.length>0&&(i.copy(s),t.currentPath.currentPoint.copy(i),l=!0);break;default:console.warn(M)}u=!1}return t}(t));break;case"rect":i=a(t,i),C=function(e){let t=u(e.getAttribute("x")||0),r=u(e.getAttribute("y")||0),i=u(e.getAttribute("rx")||e.getAttribute("ry")||0),a=u(e.getAttribute("ry")||e.getAttribute("rx")||0),o=u(e.getAttribute("width")),s=u(e.getAttribute("height")),l=new n.ShapePath;return l.moveTo(t+i,r),l.lineTo(t+o-i,r),(0!==i||0!==a)&&l.bezierCurveTo(t+o-.448084975506*i,r,t+o,r+.448084975506*a,t+o,r+a),l.lineTo(t+o,r+s-a),(0!==i||0!==a)&&l.bezierCurveTo(t+o,r+s-.448084975506*a,t+o-.448084975506*i,r+s,t+o-i,r+s),l.lineTo(t+i,r+s),(0!==i||0!==a)&&l.bezierCurveTo(t+.448084975506*i,r+s,t,r+s-.448084975506*a,t,r+s-a),l.lineTo(t,r+a),(0!==i||0!==a)&&l.bezierCurveTo(t,r+.448084975506*a,t+.448084975506*i,r,t+i,r),l}(t);break;case"polygon":i=a(t,i),C=function(e){let t=new n.ShapePath,r=0;return e.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,function(e,n,i){let a=u(n),o=u(i);0===r?t.moveTo(a,o):t.lineTo(a,o),r++}),t.currentPath.autoClose=!0,t}(t);break;case"polyline":i=a(t,i),C=function(e){let t=new n.ShapePath,r=0;return e.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,function(e,n,i){let a=u(n),o=u(i);0===r?t.moveTo(a,o):t.lineTo(a,o),r++}),t.currentPath.autoClose=!1,t}(t);break;case"circle":i=a(t,i),C=function(e){let t=u(e.getAttribute("cx")||0),r=u(e.getAttribute("cy")||0),i=u(e.getAttribute("r")||0),a=new n.Path;a.absarc(t,r,i,0,2*Math.PI);let o=new n.ShapePath;return o.subPaths.push(a),o}(t);break;case"ellipse":i=a(t,i),C=function(e){let t=u(e.getAttribute("cx")||0),r=u(e.getAttribute("cy")||0),i=u(e.getAttribute("rx")||0),a=u(e.getAttribute("ry")||0),o=new n.Path;o.absellipse(t,r,i,a,0,2*Math.PI);let s=new n.ShapePath;return s.subPaths.push(o),s}(t);break;case"line":i=a(t,i),C=function(e){let t=u(e.getAttribute("x1")||0),r=u(e.getAttribute("y1")||0),i=u(e.getAttribute("x2")||0),a=u(e.getAttribute("y2")||0),o=new n.ShapePath;return o.moveTo(t,r),o.lineTo(i,a),o.currentPath.autoClose=!1,o}(t);break;case"defs":l=!1;break;case"use":i=a(t,i);let y=t.href.baseVal.substring(1),b=t.viewportElement.getElementById(y);b?e(b,i):console.warn("SVGLoader: 'use node' references non-existent node id: "+y)}if(C&&(void 0!==i.fill&&"none"!==i.fill&&C.color.setStyle(i.fill),function(e,t){function r(e){m.set(e.x,e.y,1).applyMatrix3(t),e.set(m.x,m.y)}let n=0!==t.elements[1]||0!==t.elements[3],i=e.subPaths;for(let a=0,o=i.length;a<o;a++){let s=i[a],l=s.curves;for(let u=0;u<l.length;u++){let c=l[u];c.isLineCurve?(r(c.v1),r(c.v2)):c.isCubicBezierCurve?(r(c.v0),r(c.v1),r(c.v2),r(c.v3)):c.isQuadraticBezierCurve?(r(c.v0),r(c.v1),r(c.v2)):c.isEllipseCurve&&(n&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),g.set(c.aX,c.aY),r(g),c.aX=g.x,c.aY=g.y,c.xRadius*=function(e){let t=e.elements;return Math.sqrt(t[0]*t[0]+t[1]*t[1])}(t),c.yRadius*=function(e){let t=e.elements;return Math.sqrt(t[3]*t[3]+t[4]*t[4])}(t))}}}(C,v),c.push(C),C.userData={node:t,style:i}),l){let M=t.childNodes;for(let F=0;F<M.length;F++)e(M[F],i)}s&&(d.pop(),d.length>0?v.copy(d[d.length-1]):v.identity())}(C.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4});let y={paths:c,xml:C.documentElement};return y}static createShapes(e){let t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},r={loc:t.ORIGIN,t:0};function i(e,n,i){let a;let o=i.x-n.x,s=i.y-n.y,l=e.x-n.x,u=e.y-n.y,c=o*u-l*s;if(e.x===n.x&&e.y===n.y){r.loc=t.ORIGIN,r.t=0;return}if(e.x===i.x&&e.y===i.y){r.loc=t.DESTINATION,r.t=1;return}if(c<-Number.EPSILON){r.loc=t.LEFT;return}if(c>Number.EPSILON){r.loc=t.RIGHT;return}if(o*l<0||s*u<0){r.loc=t.BEHIND;return}if(Math.sqrt(o*o+s*s)<Math.sqrt(l*l+u*u)){r.loc=t.BEYOND;return}a=0!==o?l/o:u/s,r.loc=t.BETWEEN,r.t=a}let a=0,o=999999999,s=-999999999,l=e.subPaths.map(e=>{let t=e.getPoints(),r=-999999999,i=999999999,l=-999999999,u=999999999;for(let c=0;c<t.length;c++){let h=t[c];h.y>r&&(r=h.y),h.y<i&&(i=h.y),h.x>l&&(l=h.x),h.x<u&&(u=h.x)}return s<=l&&(s=l+1),o>=u&&(o=u-1),{curves:e.curves,points:t,isCW:n.ShapeUtils.isClockWise(t),identifier:a++,boundingBox:new n.Box2(new n.Vector2(u,i),new n.Vector2(l,r))}});l=l.filter(e=>e.points.length>1);let u=l.map(a=>(function(e,a,o,s,l){(null==l||""===l)&&(l="nonzero");let u=new n.Vector2;e.boundingBox.getCenter(u);let c=[new n.Vector2(o,u.y),new n.Vector2(s,u.y)],h=function(e,a,o){let s=new n.Vector2;a.getCenter(s);let l=[];return o.forEach(a=>{if(a.boundingBox.containsPoint(s)){let o=function(e,a){let o=[],s=[];for(let l=1;l<e.length;l++){let u=e[l-1],c=e[l];for(let h=1;h<a.length;h++){let d=a[h-1],f=a[h],p=function(e,n,a,o){let s=e.x,l=n.x,u=a.x,c=o.x,h=e.y,d=n.y,f=a.y,p=o.y,A=(c-u)*(h-f)-(p-f)*(s-u),B=(p-f)*(l-s)-(c-u)*(d-h),g=A/B,m=((l-s)*(h-f)-(d-h)*(s-u))/B;if(0===B&&0!==A||g<=0||g>=1||m<0||m>1)return null;if(0===A&&0===B){for(let v=0;v<2;v++){if(i(0===v?a:o,e,n),r.loc==t.ORIGIN){let C=0===v?a:o;return{x:C.x,y:C.y,t:r.t}}if(r.loc==t.BETWEEN){let y=+(s+r.t*(l-s)).toPrecision(10),b=+(h+r.t*(d-h)).toPrecision(10);return{x:y,y:b,t:r.t}}}return null}{for(let M=0;M<2;M++)if(i(0===M?a:o,e,n),r.loc==t.ORIGIN){let F=0===M?a:o;return{x:F.x,y:F.y,t:r.t}}let E=+(s+g*(l-s)).toPrecision(10),T=+(h+g*(d-h)).toPrecision(10);return{x:E,y:T,t:g}}}(u,c,d,f);null!==p&&void 0===o.find(e=>e.t<=p.t+Number.EPSILON&&e.t>=p.t-Number.EPSILON)&&(o.push(p),s.push(new n.Vector2(p.x,p.y)))}}return s}(e,a.points);o.forEach(e=>{l.push({identifier:a.identifier,isCW:a.isCW,point:e})})}}),l.sort((e,t)=>e.point.x-t.point.x),l}(c,e.boundingBox,a);h.sort((e,t)=>e.point.x-t.point.x);let d=[],f=[];h.forEach(t=>{t.identifier===e.identifier?d.push(t):f.push(t)});let p=d[0].point.x,A=[],B=0;for(;B<f.length&&f[B].point.x<p;)A.length>0&&A[A.length-1]===f[B].identifier?A.pop():A.push(f[B].identifier),B++;if(A.push(e.identifier),"evenodd"===l){let g=A.length%2==0,m=A[A.length-2];return{identifier:e.identifier,isHole:g,for:m}}if("nonzero"===l){let v=!0,C=null,y=null;for(let b=0;b<A.length;b++){let M=A[b];v?(y=a[M].isCW,v=!1,C=M):y!==a[M].isCW&&(y=a[M].isCW,v=!0)}return{identifier:e.identifier,isHole:v,for:C}}console.warn('fill-rule: "'+l+'" is currently not implemented.')})(a,l,o,s,e.userData.style.fillRule)),c=[];return l.forEach(e=>{let t=u[e.identifier];if(!t.isHole){let r=new n.Shape;r.curves=e.curves;let i=u.filter(t=>t.isHole&&t.for===e.identifier);i.forEach(e=>{let t=l[e.identifier],i=new n.Path;i.curves=t.curves,r.holes.push(i)}),c.push(r)}}),c}static getStrokeStyle(e,t,r,n,i){return{strokeColor:t=void 0!==t?t:"#000",strokeWidth:e=void 0!==e?e:1,strokeLineJoin:r=void 0!==r?r:"miter",strokeLineCap:n=void 0!==n?n:"butt",strokeMiterLimit:i=void 0!==i?i:4}}static pointsToStroke(e,t,r,a){let o=[],s=[],l=[];if(0===i.pointsToStrokeWithBuffers(e,t,r,a,o,s,l))return null;let u=new n.BufferGeometry;return u.setAttribute("position",new n.Float32BufferAttribute(o,3)),u.setAttribute("normal",new n.Float32BufferAttribute(s,3)),u.setAttribute("uv",new n.Float32BufferAttribute(l,2)),u}static pointsToStrokeWithBuffers(e,t,r,i,a,o,s,l){let u,c,h,d,f;let p=new n.Vector2,A=new n.Vector2,B=new n.Vector2,g=new n.Vector2,m=new n.Vector2,v=new n.Vector2,C=new n.Vector2,y=new n.Vector2,b=new n.Vector2,M=new n.Vector2,F=new n.Vector2,E=new n.Vector2,T=new n.Vector2,x=new n.Vector2,S=new n.Vector2,I=new n.Vector2,G=new n.Vector2;r=void 0!==r?r:12,i=void 0!==i?i:.001,l=void 0!==l?l:0,e=function(e){let t=!1;for(let r=1,n=e.length-1;r<n;r++)if(e[r].distanceTo(e[r+1])<i){t=!0;break}if(!t)return e;let a=[];a.push(e[0]);for(let o=1,s=e.length-1;o<s;o++)e[o].distanceTo(e[o+1])>=i&&a.push(e[o]);return a.push(e[e.length-1]),a}(e);let D=e.length;if(D<2)return 0;let R=e[0].equals(e[D-1]),U=e[0],w=t.strokeWidth/2,_=1/(D-1),k=0,L,P=!1,H=0,O=3*l,J=2*l;z(e[0],e[1],p).multiplyScalar(w),y.copy(e[0]).sub(p),b.copy(e[0]).add(p),M.copy(y),F.copy(b);for(let N=1;N<D;N++){if(u=e[N],c=N===D-1?R?e[1]:void 0:e[N+1],z(U,u,p),B.copy(p).multiplyScalar(w),E.copy(u).sub(B),T.copy(u).add(B),L=k+_,h=!1,void 0!==c){z(u,c,A),B.copy(A).multiplyScalar(w),x.copy(u).sub(B),S.copy(u).add(B),d=!0,B.subVectors(c,U),0>p.dot(B)&&(d=!1),1===N&&(P=d),B.subVectors(c,u),B.normalize();let K=Math.abs(p.dot(B));if(0!==K){let j=w/K;B.multiplyScalar(-j),g.subVectors(u,U),m.copy(g).setLength(j).add(B),I.copy(m).negate();let Q=m.length(),X=g.length();g.divideScalar(X),v.subVectors(c,u);let W=v.length();switch(v.divideScalar(W),g.dot(I)<X&&v.dot(I)<W&&(h=!0),G.copy(m).add(u),I.add(u),f=!1,h?d?(S.copy(I),T.copy(I)):(x.copy(I),E.copy(I)):ee(),t.strokeLineJoin){case"bevel":et(d,h,L);break;case"round":er(d,h),d?$(u,E,x,L,0):$(u,S,T,L,1);break;default:let V=w*t.strokeMiterLimit/Q;V<1?"miter-clip"!==t.strokeLineJoin?et(d,h,L):(er(d,h),d?(v.subVectors(G,E).multiplyScalar(V).add(E),C.subVectors(G,x).multiplyScalar(V).add(x),q(E,L,0),q(v,L,0),q(u,L,.5),q(u,L,.5),q(v,L,0),q(C,L,0),q(u,L,.5),q(C,L,0),q(x,L,0)):(v.subVectors(G,T).multiplyScalar(V).add(T),C.subVectors(G,S).multiplyScalar(V).add(S),q(T,L,1),q(v,L,1),q(u,L,.5),q(u,L,.5),q(v,L,1),q(C,L,1),q(u,L,.5),q(C,L,1),q(S,L,1))):(h?(d?(q(b,k,1),q(y,k,0),q(G,L,0),q(b,k,1),q(G,L,0),q(I,L,1)):(q(b,k,1),q(y,k,0),q(G,L,1),q(y,k,0),q(I,L,0),q(G,L,1)),d?x.copy(G):S.copy(G)):d?(q(E,L,0),q(G,L,0),q(u,L,.5),q(u,L,.5),q(G,L,0),q(x,L,0)):(q(T,L,1),q(G,L,1),q(u,L,.5),q(u,L,.5),q(G,L,1),q(S,L,1)),f=!0)}}else ee()}else ee();R||N!==D-1||en(e[0],M,F,d,!0,k),k=L,U=u,y.copy(x),b.copy(S)}if(R){if(h&&a){let Y=G,Z=I;P!==d&&(Y=I,Z=G),d?(f||P)&&(Z.toArray(a,0),Z.toArray(a,9),f&&Y.toArray(a,3)):(f||!P)&&(Z.toArray(a,3),Z.toArray(a,9),f&&Y.toArray(a,0))}}else en(u,E,T,d,!1,L);return H;function z(e,t,r){return r.subVectors(t,e),r.set(-r.y,r.x).normalize()}function q(e,t,r){a&&(a[O]=e.x,a[O+1]=e.y,a[O+2]=0,o&&(o[O]=0,o[O+1]=0,o[O+2]=1),O+=3,s&&(s[J]=t,s[J+1]=r,J+=2)),H+=3}function $(e,t,n,i,a){p.copy(t).sub(e).normalize(),A.copy(n).sub(e).normalize();let o=Math.PI,s=p.dot(A);1>Math.abs(s)&&(o=Math.abs(Math.acos(s))),o/=r,B.copy(t);for(let l=0,u=r-1;l<u;l++)g.copy(B).rotateAround(e,o),q(B,i,a),q(g,i,a),q(e,i,.5),B.copy(g);q(g,i,a),q(n,i,a),q(e,i,.5)}function ee(){q(b,k,1),q(y,k,0),q(E,L,0),q(b,k,1),q(E,L,1),q(T,L,0)}function et(e,t,r){t?e?(q(b,k,1),q(y,k,0),q(E,L,0),q(b,k,1),q(E,L,0),q(I,L,1),q(E,r,0),q(x,r,0),q(I,r,.5)):(q(b,k,1),q(y,k,0),q(T,L,1),q(y,k,0),q(I,L,0),q(T,L,1),q(T,r,1),q(S,r,0),q(I,r,.5)):e?(q(E,r,0),q(x,r,0),q(u,r,.5)):(q(T,r,1),q(S,r,0),q(u,r,.5))}function er(e,t){t&&(e?(q(b,k,1),q(y,k,0),q(E,L,0),q(b,k,1),q(E,L,0),q(I,L,1),q(E,k,0),q(u,L,.5),q(I,L,1),q(u,L,.5),q(x,k,0),q(I,L,1)):(q(b,k,1),q(y,k,0),q(T,L,1),q(y,k,0),q(I,L,0),q(T,L,1),q(T,k,1),q(I,L,0),q(u,L,.5),q(u,L,.5),q(I,L,0),q(S,k,1)))}function en(e,r,n,i,o,s){switch(t.strokeLineCap){case"round":o?$(e,n,r,s,.5):$(e,r,n,s,.5);break;case"square":if(o)p.subVectors(r,e),A.set(p.y,-p.x),B.addVectors(p,A).add(e),g.subVectors(A,p).add(e),i?(B.toArray(a,3),g.toArray(a,0),g.toArray(a,9)):(B.toArray(a,3),B.toArray(a,9),g.toArray(a,0));else{p.subVectors(n,e),A.set(p.y,-p.x),B.addVectors(p,A).add(e),g.subVectors(A,p).add(e);let l=a.length;i?(B.toArray(a,l-3),g.toArray(a,l-6),g.toArray(a,l-12)):(B.toArray(a,l-6),g.toArray(a,l-3),g.toArray(a,l-12))}}}}}}}]);